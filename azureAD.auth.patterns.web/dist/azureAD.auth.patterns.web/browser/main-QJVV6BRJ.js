import{a as g,b as A,c as Kt,d as Ct}from"./chunk-43CL6XLF.js";var je=null,yu=!1,Mp=1,lb=null,at=Symbol("SIGNAL");function $(n){let e=je;return je=n,e}function Cu(){return je}var $a={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function za(n){if(yu)throw new Error("");if(je===null)return;je.consumerOnSignalRead(n);let e=je.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=je.recomputing;if(r&&(t=e!==void 0?e.nextProducer:je.producers,t!==void 0&&t.producer===n)){je.producersTail=t,t.lastReadVersion=n.version;return}let o=n.consumersTail;if(o!==void 0&&o.consumer===je&&(!r||db(o,je)))return;let i=Wi(je),s={producer:n,consumer:je,nextProducer:t,prevConsumer:o,lastReadVersion:n.version,nextConsumer:void 0};je.producersTail=s,e!==void 0?e.nextProducer=s:je.producers=s,i&&nE(n,s)}function XC(){Mp++}function Np(n){if(!(Wi(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Mp)){if(!n.producerMustRecompute(n)&&!Tu(n)){Rp(n);return}n.producerRecomputeValue(n),Rp(n)}}function kp(n){if(n.consumers===void 0)return;let e=yu;yu=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||ub(r)}}finally{yu=e}}function Op(){return je?.consumerAllowSignalWrites!==!1}function ub(n){n.dirty=!0,kp(n),n.consumerMarkedDirty?.(n)}function Rp(n){n.dirty=!1,n.lastCleanEpoch=Mp}function Ga(n){return n&&eE(n),$(n)}function eE(n){n.producersTail=void 0,n.recomputing=!0}function Eu(n,e){$(e),n&&tE(n)}function tE(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Wi(n))do t=Pp(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Tu(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Np(t),r!==t.version))return!0}return!1}function qa(n){if(Wi(n)){let e=n.producers;for(;e!==void 0;)e=Pp(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function nE(n,e){let t=n.consumersTail,r=Wi(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let o=n.producers;o!==void 0;o=o.nextProducer)nE(o.producer,o)}function Pp(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,o=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=o:e.consumersTail=o,o!==void 0)o.nextConsumer=r;else if(e.consumers=r,!Wi(e)){let i=e.producers;for(;i!==void 0;)i=Pp(i)}return t}function Wi(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function xp(n){lb?.(n)}function db(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Lp(n,e){return Object.is(n,e)}function Iu(n,e){let t=Object.create(fb);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Np(t),za(t),t.value===vu)throw t.error;return t.value};return r[at]=t,xp(t),r}var _p=Symbol("UNSET"),bp=Symbol("COMPUTING"),vu=Symbol("ERRORED"),fb=A(g({},$a),{value:_p,dirty:!0,error:null,equal:Lp,kind:"computed",producerMustRecompute(n){return n.value===_p||n.value===bp},producerRecomputeValue(n){if(n.value===bp)throw new Error("");let e=n.value;n.value=bp;let t=Ga(n),r,o=!1;try{r=n.computation(),$(null),o=e!==_p&&e!==vu&&r!==vu&&n.equal(e,r)}catch(i){r=vu,n.error=i}finally{Eu(n,t)}if(o){n.value=e;return}n.value=r,n.version++}});function hb(){throw new Error}var rE=hb;function oE(n){rE(n)}function Fp(n){rE=n}var pb=null;function Up(n,e){let t=Object.create(wu);t.value=n,e!==void 0&&(t.equal=e);let r=()=>iE(t);return r[at]=t,xp(t),[r,s=>Ka(t,s),s=>sE(t,s)]}function iE(n){return za(n),n.value}function Ka(n,e){Op()||oE(n),n.equal(n.value,e)||(n.value=e,gb(n))}function sE(n,e){Op()||oE(n),Ka(n,e(n.value))}var wu=A(g({},$a),{equal:Lp,value:void 0,kind:"signal"});function gb(n){n.version++,XC(),kp(n),pb?.(n)}function Hp(n){let e=$(null);try{return n()}finally{$(e)}}function B(n){return typeof n=="function"}function Yi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Au=Yi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Wa(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Fe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let i of t)i.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(B(r))try{r()}catch(i){e=i instanceof Au?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{aE(i)}catch(s){e=e??[],s instanceof Au?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Au(e)}}add(e){var t;if(e&&e!==this)if(this.closed)aE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Wa(t,e)}remove(e){let{_finalizers:t}=this;t&&Wa(t,e),e instanceof n&&e._removeParent(this)}};Fe.EMPTY=(()=>{let n=new Fe;return n.closed=!0,n})();var Bp=Fe.EMPTY;function Su(n){return n instanceof Fe||n&&"closed"in n&&B(n.remove)&&B(n.add)&&B(n.unsubscribe)}function aE(n){B(n)?n():n.unsubscribe()}var Wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qi={setTimeout(n,e,...t){let{delegate:r}=Qi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Qi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Du(n){Qi.setTimeout(()=>{let{onUnhandledError:e}=Wt;if(e)e(n);else throw n})}function Ya(){}var cE=jp("C",void 0,void 0);function lE(n){return jp("E",void 0,n)}function uE(n){return jp("N",n,void 0)}function jp(n,e,t){return{kind:n,value:e,error:t}}var Eo=null;function Ji(n){if(Wt.useDeprecatedSynchronousErrorHandling){let e=!Eo;if(e&&(Eo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Eo;if(Eo=null,t)throw r}}else n()}function dE(n){Wt.useDeprecatedSynchronousErrorHandling&&Eo&&(Eo.errorThrown=!0,Eo.error=n)}var To=class extends Fe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Su(e)&&e.add(this)):this.destination=vb}static create(e,t,r){return new Zi(e,t,r)}next(e){this.isStopped?$p(uE(e),this):this._next(e)}error(e){this.isStopped?$p(lE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?$p(cE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},mb=Function.prototype.bind;function Vp(n,e){return mb.call(n,e)}var zp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){_u(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){_u(r)}else _u(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){_u(t)}}},Zi=class extends To{constructor(e,t,r){super();let o;if(B(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&Wt.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Vp(e.next,i),error:e.error&&Vp(e.error,i),complete:e.complete&&Vp(e.complete,i)}):o=e}this.destination=new zp(o)}};function _u(n){Wt.useDeprecatedSynchronousErrorHandling?dE(n):Du(n)}function yb(n){throw n}function $p(n,e){let{onStoppedNotification:t}=Wt;t&&Qi.setTimeout(()=>t(n,e))}var vb={closed:!0,next:Ya,error:yb,complete:Ya};var Xi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Yt(n){return n}function Gp(...n){return qp(n)}function qp(n){return n.length===0?Yt:n.length===1?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}var Y=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){let i=Eb(t)?t:new Zi(t,r,o);return Ji(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=fE(r),new r((o,i)=>{let s=new Zi({next:a=>{try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Xi](){return this}pipe(...t){return qp(t)(this)}toPromise(t){return t=fE(t),new t((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function fE(n){var e;return(e=n??Wt.Promise)!==null&&e!==void 0?e:Promise}function Cb(n){return n&&B(n.next)&&B(n.error)&&B(n.complete)}function Eb(n){return n&&n instanceof To||Cb(n)&&Su(n)}function Tb(n){return B(n?.lift)}function X(n){return e=>{if(Tb(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ne(n,e,t,r,o){return new Kp(n,e,t,r,o)}var Kp=class extends To{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var hE=Yi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ve=(()=>{class n extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new bu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new hE}next(t){Ji(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ji(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ji(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Bp:(this.currentObservers=null,i.push(t),new Fe(()=>{this.currentObservers=null,Wa(i,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){let t=new Y;return t.source=this,t}}return n.create=(e,t)=>new bu(e,t),n})(),bu=class extends Ve{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Bp}};var Ue=class extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ct=new Y(n=>n.complete());function pE(n){return n&&B(n.schedule)}function gE(n){return n[n.length-1]}function mE(n){return B(gE(n))?n.pop():void 0}function Nr(n){return pE(gE(n))?n.pop():void 0}function vE(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(f){s(f)}}function c(u){try{l(r.throw(u))}catch(f){s(f)}}function l(u){u.done?i(u.value):o(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function yE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Io(n){return this instanceof Io?(this.v=n,this):new Io(n)}function CE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(E){return Promise.resolve(E).then(h,f)}}function a(h,E){r[h]&&(o[h]=function(I){return new Promise(function(w,S){i.push([h,I,w,S])>1||c(h,I)})},E&&(o[h]=E(o[h])))}function c(h,E){try{l(r[h](E))}catch(I){p(i[0][3],I)}}function l(h){h.value instanceof Io?Promise.resolve(h.value.v).then(u,f):p(i[0][2],h)}function u(h){c("next",h)}function f(h){c("throw",h)}function p(h,E){h(E),i.shift(),i.length&&c(i[0][0],i[0][1])}}function EE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof yE=="function"?yE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,c){s=n[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}}var Ru=n=>n&&typeof n.length=="number"&&typeof n!="function";function Mu(n){return B(n?.then)}function Nu(n){return B(n[Xi])}function ku(n){return Symbol.asyncIterator&&B(n?.[Symbol.asyncIterator])}function Ou(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Ib(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Pu=Ib();function xu(n){return B(n?.[Pu])}function Lu(n){return CE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:o}=yield Io(t.read());if(o)return yield Io(void 0);yield yield Io(r)}}finally{t.releaseLock()}})}function Fu(n){return B(n?.getReader)}function Pe(n){if(n instanceof Y)return n;if(n!=null){if(Nu(n))return wb(n);if(Ru(n))return Ab(n);if(Mu(n))return Sb(n);if(ku(n))return TE(n);if(xu(n))return Db(n);if(Fu(n))return _b(n)}throw Ou(n)}function wb(n){return new Y(e=>{let t=n[Xi]();if(B(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ab(n){return new Y(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Sb(n){return new Y(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Du)})}function Db(n){return new Y(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function TE(n){return new Y(e=>{bb(n,e).catch(t=>e.error(t))})}function _b(n){return TE(Lu(n))}function bb(n,e){var t,r,o,i;return vE(this,void 0,void 0,function*(){try{for(t=EE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})}function lt(n,e,t,r=0,o=!1){let i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function Uu(n,e=0){return X((t,r)=>{t.subscribe(ne(r,o=>lt(r,n,()=>r.next(o),e),()=>lt(r,n,()=>r.complete(),e),o=>lt(r,n,()=>r.error(o),e)))})}function Hu(n,e=0){return X((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function IE(n,e){return Pe(n).pipe(Hu(e),Uu(e))}function wE(n,e){return Pe(n).pipe(Hu(e),Uu(e))}function AE(n,e){return new Y(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function SE(n,e){return new Y(t=>{let r;return lt(t,e,()=>{r=n[Pu](),lt(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){t.error(s);return}i?t.complete():t.next(o)},0,!0)}),()=>B(r?.return)&&r.return()})}function Bu(n,e){if(!n)throw new Error("Iterable cannot be null");return new Y(t=>{lt(t,e,()=>{let r=n[Symbol.asyncIterator]();lt(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function DE(n,e){return Bu(Lu(n),e)}function _E(n,e){if(n!=null){if(Nu(n))return IE(n,e);if(Ru(n))return AE(n,e);if(Mu(n))return wE(n,e);if(ku(n))return Bu(n,e);if(xu(n))return SE(n,e);if(Fu(n))return DE(n,e)}throw Ou(n)}function we(n,e){return e?_E(n,e):Pe(n)}function z(...n){let e=Nr(n);return we(n,e)}function Wp(n,e){let t=B(n)?n:()=>n,r=o=>o.error(t());return new Y(e?o=>e.schedule(r,0,o):r)}function ju(n){return!!n&&(n instanceof Y||B(n.lift)&&B(n.subscribe))}var wo=Yi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function te(n,e){return X((t,r)=>{let o=0;t.subscribe(ne(r,i=>{r.next(n.call(e,i,o++))}))})}var{isArray:Rb}=Array;function Mb(n,e){return Rb(e)?n(...e):n(e)}function bE(n){return te(e=>Mb(n,e))}var{isArray:Nb}=Array,{getPrototypeOf:kb,prototype:Ob,keys:Pb}=Object;function RE(n){if(n.length===1){let e=n[0];if(Nb(e))return{args:e,keys:null};if(xb(e)){let t=Pb(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function xb(n){return n&&typeof n=="object"&&kb(n)===Ob}function ME(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}function Yp(...n){let e=Nr(n),t=mE(n),{args:r,keys:o}=RE(n);if(r.length===0)return we([],e);let i=new Y(Lb(r,e,o?s=>ME(o,s):Yt));return t?i.pipe(bE(t)):i}function Lb(n,e,t=Yt){return r=>{NE(e,()=>{let{length:o}=n,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)NE(e,()=>{let l=we(n[c],e),u=!1;l.subscribe(ne(r,f=>{i[c]=f,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function NE(n,e,t){n?lt(t,n,e):e()}function kE(n,e,t,r,o,i,s,a){let c=[],l=0,u=0,f=!1,p=()=>{f&&!c.length&&!l&&e.complete()},h=I=>l<r?E(I):c.push(I),E=I=>{i&&e.next(I),l++;let w=!1;Pe(t(I,u++)).subscribe(ne(e,S=>{o?.(S),i?h(S):e.next(S)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<r;){let S=c.shift();s?lt(e,s,()=>E(S)):E(S)}p()}catch(S){e.error(S)}}))};return n.subscribe(ne(e,h,()=>{f=!0,p()})),()=>{a?.()}}function qe(n,e,t=1/0){return B(e)?qe((r,o)=>te((i,s)=>e(r,i,o,s))(Pe(n(r,o))),t):(typeof e=="number"&&(t=e),X((r,o)=>kE(r,o,n,t)))}function OE(n=1/0){return qe(Yt,n)}function PE(){return OE(1)}function es(...n){return PE()(we(n,Nr(n)))}function Qa(n){return new Y(e=>{Pe(n()).subscribe(e)})}function Lt(n,e){return X((t,r)=>{let o=0;t.subscribe(ne(r,i=>n.call(e,i,o++)&&r.next(i)))})}function Ja(n){return X((e,t)=>{let r=null,o=!1,i;r=e.subscribe(ne(t,void 0,void 0,s=>{i=Pe(n(s,Ja(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function ts(n,e){return B(e)?qe(n,e,1):qe(n,1)}function Qp(n){return X((e,t)=>{let r=!1;e.subscribe(ne(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function zn(n){return n<=0?()=>ct:X((e,t)=>{let r=0;e.subscribe(ne(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function xE(n=Fb){return X((e,t)=>{let r=!1;e.subscribe(ne(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Fb(){return new wo}function Za(n){return X((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Gn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Lt((o,i)=>n(o,i,r)):Yt,zn(1),t?Qp(e):xE(()=>new wo))}function Vu(n){return n<=0?()=>ct:X((e,t)=>{let r=[];e.subscribe(ne(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(let o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Jp(...n){let e=Nr(n);return X((t,r)=>{(e?es(n,t,e):es(n,t)).subscribe(r)})}function ut(n,e){return X((t,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();t.subscribe(ne(r,c=>{o?.unsubscribe();let l=0,u=i++;Pe(n(c,u)).subscribe(o=ne(r,f=>r.next(e?e(c,f,u,l++):f),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Xa(n){return X((e,t)=>{Pe(n).subscribe(ne(t,()=>t.complete(),Ya)),!t.closed&&e.subscribe(t)})}function Ke(n,e,t){let r=B(n)||e||t?{next:n,error:e,complete:t}:n;return r?X((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(ne(i,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),i.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Yt}var Zp;function $u(){return Zp}function gn(n){let e=Zp;return Zp=n,e}var LE=Symbol("NotFound");function ns(n){return n===LE||n?.name==="\u0275NotFound"}var _=class extends Error{code;constructor(e,t){super(Kn(e,t)),this.code=e}};function Bb(n){return`NG0${Math.abs(n)}`}function Kn(n,e){return`${Bb(n)}${e?": "+e:""}`}function ee(n){for(let e in n)if(n[e]===ee)return e;throw Error("")}function kr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(kr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function hg(n,e){return n?e?`${n} ${e}`:n:e||""}var jb=ee({__forward_ref__:ee});function Yu(n){return n.__forward_ref__=Yu,n.toString=function(){return kr(this())},n}function dt(n){return pg(n)?n():n}function pg(n){return typeof n=="function"&&n.hasOwnProperty(jb)&&n.__forward_ref__===Yu}function b(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function bo(n){return{providers:n.providers||[],imports:n.imports||[]}}function ic(n){return Vb(n,Qu)}function gg(n){return ic(n)!==null}function Vb(n,e){return n.hasOwnProperty(e)&&n[e]||null}function $b(n){let e=n?.[Qu]??null;return e||null}function eg(n){return n&&n.hasOwnProperty(Gu)?n[Gu]:null}var Qu=ee({\u0275prov:ee}),Gu=ee({\u0275inj:ee}),D=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=b({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function mg(n){return n&&!!n.\u0275providers}var yg=ee({\u0275cmp:ee}),vg=ee({\u0275dir:ee}),Cg=ee({\u0275pipe:ee}),Eg=ee({\u0275mod:ee}),tc=ee({\u0275fac:ee}),Ro=ee({__NG_ELEMENT_ID__:ee}),FE=ee({__NG_ENV_ID__:ee});function Tg(n){return typeof n=="string"?n:n==null?"":String(n)}function jE(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Tg(n)}var VE=ee({ngErrorCode:ee}),zb=ee({ngErrorMessage:ee}),Gb=ee({ngTokenPath:ee});function Ig(n,e){return $E("",-200,e)}function Ju(n,e){throw new _(-201,!1)}function $E(n,e,t){let r=new _(e,n);return r[VE]=e,r[zb]=n,t&&(r[Gb]=t),r}function qb(n){return n[VE]}var tg;function zE(){return tg}function Et(n){let e=tg;return tg=n,e}function wg(n,e,t){let r=ic(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Ju(n,"Injector")}var Kb={},Ao=Kb,Wb="__NG_DI_FLAG__",ng=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=So(t)||0;try{return this.injector.get(e,r&8?null:Ao,r)}catch(o){if(ns(o))return o;throw o}}};function Yb(n,e=0){let t=$u();if(t===void 0)throw new _(-203,!1);if(t===null)return wg(n,void 0,e);{let r=Qb(e),o=t.retrieve(n,r);if(ns(o)){if(r.optional)return null;throw o}return o}}function N(n,e=0){return(zE()||Yb)(dt(n),e)}function C(n,e){return N(n,So(e))}function So(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Qb(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function rg(n){let e=[];for(let t=0;t<n.length;t++){let r=dt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new _(900,!1);let o,i=0;for(let s=0;s<r.length;s++){let a=r[s],c=Jb(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}e.push(N(o,i))}else e.push(N(r))}return e}function Jb(n){return n[Wb]}function Do(n,e){let t=n.hasOwnProperty(tc);return t?n[tc]:null}function Zu(n,e){n.forEach(t=>Array.isArray(t)?Zu(t,e):e(t))}function Ag(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function sc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var Mo={},Qt=[],yn=new D(""),Sg=new D("",-1),Dg=new D(""),nc=class{get(e,t=Ao){if(t===Ao){let o=$E("",-201);throw o.name="\u0275NotFound",o}return t}};function _g(n){return n[Eg]||null}function Wn(n){return n[yg]||null}function Xu(n){return n[vg]||null}function bg(n){return n[Cg]||null}function Ft(n){return{\u0275providers:n}}function GE(n){return Ft([{provide:yn,multi:!0,useValue:n}])}function qE(...n){return{\u0275providers:ed(!0,n),\u0275fromNgModule:!0}}function ed(n,...e){let t=[],r=new Set,o,i=s=>{t.push(s)};return Zu(e,s=>{let a=s;qu(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&KE(o,i),t}function KE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:o}=n[t];Rg(o,i=>{e(i,r)})}}function qu(n,e,t,r){if(n=dt(n),!n)return!1;let o=null,i=eg(n),s=!i&&Wn(n);if(!i&&!s){let c=n.ngModule;if(i=eg(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=n}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)qu(l,e,t,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let l;try{Zu(i.imports,u=>{qu(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&KE(l,e)}if(!a){let l=Do(o)||(()=>new o);e({provide:o,useFactory:l,deps:Qt},o),e({provide:Dg,useValue:o,multi:!0},o),e({provide:yn,useValue:()=>N(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let l=n;Rg(c,u=>{e(u,l)})}}else return!1;return o!==n&&n.providers!==void 0}function Rg(n,e){for(let t of n)mg(t)&&(t=t.\u0275providers),Array.isArray(t)?Rg(t,e):e(t)}var Zb=ee({provide:String,useValue:ee});function WE(n){return n!==null&&typeof n=="object"&&Zb in n}function Xb(n){return!!(n&&n.useExisting)}function eR(n){return!!(n&&n.useFactory)}function Ku(n){return typeof n=="function"}var ac=new D(""),zu={},UE={},Xp;function cc(){return Xp===void 0&&(Xp=new nc),Xp}var Ae=class{},_o=class extends Ae{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,ig(e,s=>this.processProvider(s)),this.records.set(Sg,rs(void 0,this)),o.has("environment")&&this.records.set(Ae,rs(void 0,this));let i=this.records.get(ac);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(Dg,Qt,{self:!0}))}retrieve(e,t){let r=So(t)||0;try{return this.get(e,Ao,r)}catch(o){if(ns(o))return o;throw o}}destroy(){ec(this),this._destroyed=!0;let e=$(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),$(e)}}onDestroy(e){return ec(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ec(this);let t=gn(this),r=Et(void 0),o;try{return e()}finally{gn(t),Et(r)}}get(e,t=Ao,r){if(ec(this),e.hasOwnProperty(FE))return e[FE](this);let o=So(r),i,s=gn(this),a=Et(void 0);try{if(!(o&4)){let l=this.records.get(e);if(l===void 0){let u=iR(e)&&ic(e);u&&this.injectableDefInScope(u)?l=rs(og(e),zu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,o)}let c=o&2?cc():this.parent;return t=o&8&&t===Ao?null:t,c.get(e,t)}catch(c){let l=qb(c);throw l===-200||l===-201?new _(l,null):c}finally{Et(a),gn(s)}}resolveInjectorInitializers(){let e=$(null),t=gn(this),r=Et(void 0),o;try{let i=this.get(yn,Qt,{self:!0});for(let s of i)s()}finally{gn(t),Et(r),$(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(kr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=dt(e);let t=Ku(e)?e:dt(e&&e.provide),r=nR(e);if(!Ku(e)&&e.multi===!0){let o=this.records.get(t);o||(o=rs(void 0,zu,!0),o.factory=()=>rg(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let o=$(null);try{if(t.value===UE)throw Ig(kr(e));return t.value===zu&&(t.value=UE,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&oR(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{$(o)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=dt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function og(n){let e=ic(n),t=e!==null?e.factory:Do(n);if(t!==null)return t;if(n instanceof D)throw new _(204,!1);if(n instanceof Function)return tR(n);throw new _(204,!1)}function tR(n){if(n.length>0)throw new _(204,!1);let t=$b(n);return t!==null?()=>t.factory(n):()=>new n}function nR(n){if(WE(n))return rs(void 0,n.useValue);{let e=YE(n);return rs(e,zu)}}function YE(n,e,t){let r;if(Ku(n)){let o=dt(n);return Do(o)||og(o)}else if(WE(n))r=()=>dt(n.useValue);else if(eR(n))r=()=>n.useFactory(...rg(n.deps||[]));else if(Xb(n))r=(o,i)=>N(dt(n.useExisting),i!==void 0&&i&8?8:void 0);else{let o=dt(n&&(n.useClass||n.provide));if(rR(n))r=()=>new o(...rg(n.deps));else return Do(o)||og(o)}return r}function ec(n){if(n.destroyed)throw new _(205,!1)}function rs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function rR(n){return!!n.deps}function oR(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function iR(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function ig(n,e){for(let t of n)Array.isArray(t)?ig(t,e):t&&mg(t)?ig(t.\u0275providers,e):e(t)}function He(n,e){let t;n instanceof _o?(ec(n),t=n):t=new ng(n);let r,o=gn(t),i=Et(void 0);try{return e()}finally{gn(o),Et(i)}}function QE(){return zE()!==void 0||$u()!=null}var Qe=0,O=1,F=2,Se=3,Ut=4,Ht=5,It=6,os=7,$e=8,Bt=9,Yn=10,se=11,is=12,Mg=13,No=14,ft=15,ko=16,Oo=17,Po=18,lc=19,Ng=20,qn=21,td=22,uc=23,wt=24,xo=25,dc=26,le=27,JE=1,Jt=6,vn=7,fc=8,hc=9,Je=10;function jt(n){return Array.isArray(n)&&typeof n[JE]=="object"}function At(n){return Array.isArray(n)&&n[JE]===!0}function kg(n){return(n.flags&4)!==0}function Qn(n){return n.componentOffset>-1}function pc(n){return(n.flags&1)===1}function Lo(n){return!!n.template}function Fo(n){return(n[F]&512)!==0}function xr(n){return(n[F]&256)===256}var ZE="svg",XE="math";function St(n){for(;Array.isArray(n);)n=n[Qe];return n}function eT(n,e){return St(e[n])}function Zt(n,e){return St(e[n.index])}function ss(n,e){return n.data[e]}function tT(n,e){return n[e]}function Xt(n,e){let t=e[n];return jt(t)?t:t[Qe]}function nd(n){return(n[F]&128)===128}function nT(n){return At(n[Se])}function Uo(n,e){return e==null?null:n[e]}function Og(n){n[Oo]=0}function Pg(n){n[F]&1024||(n[F]|=1024,nd(n)&&as(n))}function rT(n,e){for(;n>0;)e=e[No],n--;return e}function gc(n){return!!(n[F]&9216||n[wt]?.dirty)}function rd(n){n[Yn].changeDetectionScheduler?.notify(8),n[F]&64&&(n[F]|=1024),gc(n)&&as(n)}function as(n){n[Yn].changeDetectionScheduler?.notify(0);let e=Or(n);for(;e!==null&&!(e[F]&8192||(e[F]|=8192,!nd(e)));)e=Or(e)}function xg(n,e){if(xr(n))throw new _(911,!1);n[qn]===null&&(n[qn]=[]),n[qn].push(e)}function oT(n,e){if(n[qn]===null)return;let t=n[qn].indexOf(e);t!==-1&&n[qn].splice(t,1)}function Or(n){let e=n[Se];return At(e)?e[Se]:e}function iT(n){return n[os]??=[]}function sT(n){return n.cleanup??=[]}var K={lFrame:vT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var sg=!1;function aT(){return K.lFrame.elementDepthCount}function cT(){K.lFrame.elementDepthCount++}function Lg(){K.lFrame.elementDepthCount--}function Fg(){return K.bindingsEnabled}function Ug(){return K.skipHydrationRootTNode!==null}function Hg(n){return K.skipHydrationRootTNode===n}function lT(n){K.skipHydrationRootTNode=n}function Bg(){K.skipHydrationRootTNode=null}function ye(){return K.lFrame.lView}function Lr(){return K.lFrame.tView}function od(n){return K.lFrame.contextLView=n,n[$e]}function id(n){return K.lFrame.contextLView=null,n}function Dt(){let n=jg();for(;n!==null&&n.type===64;)n=n.parent;return n}function jg(){return K.lFrame.currentTNode}function uT(){let n=K.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function cs(n,e){let t=K.lFrame;t.currentTNode=n,t.isParent=e}function Vg(){return K.lFrame.isParent}function dT(){K.lFrame.isParent=!1}function fT(){return K.lFrame.contextLView}function $g(){return sg}function zg(n){let e=sg;return sg=n,e}function hT(n){return K.lFrame.bindingIndex=n}function Gg(){return K.lFrame.bindingIndex++}function pT(){return K.lFrame.inI18n}function gT(n,e){let t=K.lFrame;t.bindingIndex=t.bindingRootIndex=n,sd(e)}function mT(){return K.lFrame.currentDirectiveIndex}function sd(n){K.lFrame.currentDirectiveIndex=n}function qg(n){K.lFrame.currentQueryIndex=n}function sR(n){let e=n[O];return e.type===2?e.declTNode:e.type===1?n[Ht]:null}function Kg(n,e,t){if(t&4){let o=e,i=n;for(;o=o.parent,o===null&&!(t&1);)if(o=sR(i),o===null||(i=i[No],o.type&10))break;if(o===null)return!1;e=o,n=i}let r=K.lFrame=yT();return r.currentTNode=e,r.lView=n,!0}function ad(n){let e=yT(),t=n[O];K.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yT(){let n=K.lFrame,e=n===null?null:n.child;return e===null?vT(n):e}function vT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function CT(){let n=K.lFrame;return K.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Wg=CT;function cd(){let n=CT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ET(n){return(K.lFrame.contextLView=rT(n,K.lFrame.contextLView))[$e]}function ld(){return K.lFrame.selectedIndex}function Fr(n){K.lFrame.selectedIndex=n}function TT(){let n=K.lFrame;return ss(n.tView,n.selectedIndex)}function Yg(){return K.lFrame.currentNamespace}var IT=!0;function ud(){return IT}function Jn(n){IT=n}function ag(n,e=null,t=null,r){let o=Qg(n,e,t,r);return o.resolveInjectorInitializers(),o}function Qg(n,e=null,t=null,r,o=new Set){let i=[t||Qt,qE(n)];return r=r||(typeof n=="object"?void 0:kr(n)),new _o(i,e||cc(),r||null,o)}var Tt=class n{static THROW_IF_NOT_FOUND=Ao;static NULL=new nc;static create(e,t){if(Array.isArray(e))return ag({name:""},t,e,"");{let r=e.name??"";return ag({name:r},e.parent,e.providers,r)}}static \u0275prov=b({token:n,providedIn:"any",factory:()=>N(Sg)});static __NG_ELEMENT_ID__=-1},xe=new D(""),Zn=(()=>{class n{static __NG_ELEMENT_ID__=aR;static __NG_ENV_ID__=t=>t}return n})(),cg=class extends Zn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return xr(this._lView)}onDestroy(e){let t=this._lView;return xg(t,e),()=>oT(t,e)}};function aR(){return new cg(ye())}var wT=!1,Cn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ue(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Y(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=b({token:n,providedIn:"root",factory:()=>new n})}return n})(),lg=class extends Ve{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,QE()&&(this.destroyRef=C(Zn,{optional:!0})??void 0,this.pendingTasks=C(Cn,{optional:!0})??void 0)}emit(e){let t=$(null);try{super.next(e)}finally{$(t)}}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof Fe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},We=lg;function Wu(...n){}function Jg(n){let e,t;function r(){n=Wu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Zg(n){return queueMicrotask(()=>n()),()=>{n=Wu}}var Xg="isAngularZone",rc=Xg+"_ID",cR=0,Ye=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new We(!1);onMicrotaskEmpty=new We(!1);onStable=new We(!1);onError=new We(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=wT}=e;if(typeof Zone>"u")throw new _(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,dR(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Xg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new _(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new _(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,lR,Wu,Wu);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},lR={};function em(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function uR(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Jg(()=>{n.callbackScheduled=!1,ug(n),n.isCheckStableRunning=!0,em(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),ug(n)}function dR(n){let e=()=>{uR(n)},t=cR++;n._inner=n._inner.fork({name:"angular",properties:{[Xg]:!0,[rc]:t,[rc+t]:!0},onInvokeTask:(r,o,i,s,a,c)=>{if(fR(c))return r.invokeTask(i,s,a,c);try{return HE(n),r.invokeTask(i,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),BE(n)}},onInvoke:(r,o,i,s,a,c,l)=>{try{return HE(n),r.invoke(i,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!hR(c)&&e(),BE(n)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,ug(n),em(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function ug(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function HE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function BE(n){n._nesting--,em(n)}var oc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new We;onMicrotaskEmpty=new We;onStable=new We;onError=new We;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}};function fR(n){return AT(n,"__ignore_ng_zone__")}function hR(n){return AT(n,"__scheduler_tick__")}function AT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var mn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Vt=new D("",{factory:()=>{let n=C(Ye),e=C(Ae),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(mn),t.handleError(r))})}}}),ST={provide:yn,useValue:()=>{let n=C(mn,{optional:!0})},multi:!0},pR=new D("",{factory:()=>{let n=C(xe).defaultView;if(!n)return;let e=C(Vt),t=i=>{e(i.reason),i.preventDefault()},r=i=>{i.error?e(i.error):e(new Error(i.message,{cause:i})),i.preventDefault()},o=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(o):o(),C(Zn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function tm(){return Ft([GE(()=>void C(pR))])}function en(n,e){let[t,r,o]=Up(n,e?.equal),i=t,s=i[at];return i.set=r,i.update=o,i.asReadonly=DT.bind(i),i}function DT(){let n=this[at];if(n.readonlyFn===void 0){let e=()=>this();e[at]=n,n.readonlyFn=e}return n.readonlyFn}var dd=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=gR}return n})();function gR(){return new dd(ye(),Dt())}var Pr=class{},mc=new D("",{factory:()=>!0});var nm=new D(""),yc=(()=>{class n{internalPendingTasks=C(Cn);scheduler=C(Pr);errorHandler=C(Vt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=b({token:n,providedIn:"root",factory:()=>new n})}return n})(),rm=(()=>{class n{static \u0275prov=b({token:n,providedIn:"root",factory:()=>new dg})}return n})(),dg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},fg=class{[at];constructor(e){this[at]=e}destroy(){this[at].destroy()}};function En(n){return Hp(n)}var fd={JSACTION:"jsaction"};function Ac(n){return{toString:n}.toString()}function SR(n){return typeof n=="function"}function sI(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Cd=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Od=(()=>{let n=()=>aI;return n.ngInherit=!0,n})();function aI(n){return n.type.prototype.ngOnChanges&&(n.setInput=_R),DR}function DR(){let n=lI(this),e=n?.current;if(e){let t=n.previous;if(t===Mo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function _R(n,e,t,r,o){let i=this.declaredInputs[r],s=lI(n)||bR(n,{previous:Mo,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[i];a[i]=new Cd(l&&l.currentValue,t,c===Mo),sI(n,e,o,t)}var cI="__ngSimpleChanges__";function lI(n){return n[cI]||null}function bR(n,e){return n[cI]=e}var _T=[];var Q=function(n,e=null,t){for(let r=0;r<_T.length;r++){let o=_T[r];o(n,e,t)}};function RR(n,e,t){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=aI(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),i&&((t.preOrderHooks??=[]).push(n,i),(t.preOrderCheckHooks??=[]).push(n,i))}function uI(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function hd(n,e,t){dI(n,e,3,t)}function pd(n,e,t,r){(n[F]&3)===t&&dI(n,e,t,r)}function om(n,e){let t=n[F];(t&3)===e&&(t&=16383,t+=1,n[F]=t)}function dI(n,e,t,r){let o=r!==void 0?n[Oo]&65535:0,i=r??-1,s=e.length-1,a=0;for(let c=o;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Oo]+=65536),(a<i||i==-1)&&(MR(n,t,e,c),n[Oo]=(n[Oo]&4294901760)+c+2),c++}function bT(n,e){Q(4,n,e);let t=$(null);try{e.call(n)}finally{$(t),Q(5,n,e)}}function MR(n,e,t,r){let o=t[r]<0,i=t[r+1],s=o?-t[r]:t[r],a=n[s];o?n[F]>>14<n[Oo]>>16&&(n[F]&3)===e&&(n[F]+=16384,bT(a,i)):bT(a,i)}var us=-1,Ec=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,o){this.factory=e,this.name=o,this.canSeeViewProviders=t,this.injectImpl=r}};function NR(n){return(n.flags&8)!==0}function kR(n){return(n.flags&16)!==0}function OR(n,e,t){let r=0;for(;r<t.length;){let o=t[r];if(typeof o=="number"){if(o!==0)break;r++;let i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{let i=o,s=t[++r];xR(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function PR(n){return n===3||n===4||n===6}function xR(n){return n.charCodeAt(0)===64}function Pd(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?t=o:t===0||(t===-1||t===2?RT(n,t,o,null,e[++r]):RT(n,t,o,null,null))}}return n}function RT(n,e,t,r,o){let i=0,s=n.length;if(e===-1)s=-1;else for(;i<n.length;){let a=n[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<n.length;){let a=n[i];if(typeof a=="number")break;if(a===t){o!==null&&(n[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),o!==null&&n.splice(i++,0,o)}function fI(n){return n!==us}function Ed(n){return n&32767}function LR(n){return n>>16}function Td(n,e){let t=LR(n),r=e;for(;t>0;)r=r[No],t--;return r}var dm=!0;function MT(n){let e=dm;return dm=n,e}var FR=256,hI=FR-1,pI=5,UR=0,Tn={};function HR(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ro)&&(r=t[Ro]),r==null&&(r=t[Ro]=UR++);let o=r&hI,i=1<<o;e.data[n+(o>>pI)]|=i}function gI(n,e){let t=mI(n,e);if(t!==-1)return t;let r=e[O];r.firstCreatePass&&(n.injectorIndex=e.length,im(r.data,n),im(e,null),im(r.blueprint,null));let o=_m(n,e),i=n.injectorIndex;if(fI(o)){let s=Ed(o),a=Td(o,e),c=a[O].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function im(n,e){n.push(0,0,0,0,0,0,0,0,e)}function mI(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function _m(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;o!==null;){if(r=TI(o),r===null)return us;if(t++,o=o[No],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return us}function BR(n,e,t){HR(n,e,t)}function yI(n,e,t){if(t&8||n!==void 0)return n;Ju(e,"NodeInjector")}function vI(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let o=n[Bt],i=Et(void 0);try{return o?o.get(e,r,t&8):wg(e,r,t&8)}finally{Et(i)}}return yI(r,e,t)}function CI(n,e,t,r=0,o){if(n!==null){if(e[F]&2048&&!(r&2)){let s=GR(n,e,t,r,Tn);if(s!==Tn)return s}let i=EI(n,e,t,r,Tn);if(i!==Tn)return i}return vI(e,t,r,o)}function EI(n,e,t,r,o){let i=$R(t);if(typeof i=="function"){if(!Kg(e,n,r))return r&1?yI(o,t,r):vI(e,t,r,o);try{let s;if(s=i(r),s==null&&!(r&8))Ju(t);else return s}finally{Wg()}}else if(typeof i=="number"){let s=null,a=mI(n,e),c=us,l=r&1?e[ft][Ht]:null;for((a===-1||r&4)&&(c=a===-1?_m(n,e):e[a+8],c===us||!kT(r,!1)?a=-1:(s=e[O],a=Ed(c),e=Td(c,e)));a!==-1;){let u=e[O];if(NT(i,a,u.data)){let f=jR(a,e,t,s,r,l);if(f!==Tn)return f}c=e[a+8],c!==us&&kT(r,e[O].data[a+8]===l)&&NT(i,a,e)?(s=u,a=Ed(c),e=Td(c,e)):a=-1}}return o}function jR(n,e,t,r,o,i){let s=e[O],a=s.data[n+8],c=r==null?Qn(a)&&dm:r!=s&&(a.type&3)!==0,l=o&1&&i===a,u=VR(a,s,t,c,l);return u!==null?fm(e,s,u,a,o):Tn}function VR(n,e,t,r,o){let i=n.providerIndexes,s=e.data,a=i&1048575,c=n.directiveStart,l=n.directiveEnd,u=i>>20,f=r?a:a+u,p=o?a+u:l;for(let h=f;h<p;h++){let E=s[h];if(h<c&&t===E||h>=c&&E.type===t)return h}if(o){let h=s[c];if(h&&Lo(h)&&h.type===t)return c}return null}function fm(n,e,t,r,o){let i=n[t],s=e.data;if(i instanceof Ec){let a=i;if(a.resolving){let h=jE(s[t]);throw Ig(h)}let c=MT(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],u,f=a.injectImpl?Et(a.injectImpl):null,p=Kg(n,r,0);try{i=n[t]=a.factory(void 0,o,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&RR(t,s[t],e)}finally{f!==null&&Et(f),MT(c),a.resolving=!1,Wg()}}return i}function $R(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ro)?n[Ro]:void 0;return typeof e=="number"?e>=0?e&hI:zR:e}function NT(n,e,t){let r=1<<n;return!!(t[e+(n>>pI)]&r)}function kT(n,e){return!(n&2)&&!(n&1&&e)}var Bo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return CI(this._tNode,this._lView,e,So(r),t)}};function zR(){return new Bo(Dt(),ye())}function xd(n){return Ac(()=>{let e=n.prototype.constructor,t=e[tc]||hm(e),r=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){let i=o[tc]||hm(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function hm(n){return pg(n)?()=>{let e=hm(dt(n));return e&&e()}:Do(n)}function GR(n,e,t,r,o){let i=n,s=e;for(;i!==null&&s!==null&&s[F]&2048&&!Fo(s);){let a=EI(i,s,t,r|2,Tn);if(a!==Tn)return a;let c=i.parent;if(!c){let l=s[Ng];if(l){let u=l.get(t,Tn,r);if(u!==Tn)return u}c=TI(s),s=s[No]}i=c}return o}function TI(n){let e=n[O],t=e.type;return t===2?e.declTNode:t===1?n[Ht]:null}function qR(){return Ld(Dt(),ye())}function Ld(n,e){return new bm(Zt(n,e))}var bm=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=qR}return n})();var II="ngSkipHydration",KR="ngskiphydration";function wI(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===KR)return!0}return!1}function AI(n){return n.hasAttribute(II)}function Id(n){return(n.flags&128)===128}function SI(n){if(Id(n))return!0;let e=n.parent;for(;e;){if(Id(n)||wI(e))return!0;e=e.parent}return!1}var Rm=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Rm||{}),DI=new Map,WR=0;function YR(){return WR++}function QR(n){DI.set(n[lc],n)}function pm(n){DI.delete(n[lc])}var OT="__ngContext__";function hs(n,e){jt(e)?(n[OT]=e[lc],QR(e)):n[OT]=e}function _I(n){return RI(n[is])}function bI(n){return RI(n[Ut])}function RI(n){for(;n!==null&&!At(n);)n=n[Ut];return n}var gm;function Mm(n){gm=n}function Sc(){if(gm!==void 0)return gm;if(typeof document<"u")return document;throw new _(210,!1)}var In=new D("",{factory:()=>JR}),JR="ng";var Fd=new D(""),Dc=new D("",{providedIn:"platform",factory:()=>"unknown"});var Ud=new D("",{factory:()=>Sc().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function ZR(){let n=new $o;return n.store=XR(Sc(),C(In)),n}var $o=(()=>{class n{static \u0275prov=b({token:n,providedIn:"root",factory:ZR});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function XR(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var MI="h",NI="b",eM="f",tM="n",kI="e",OI="t",Hd="c",Nm="x",Tc="r",PI="i",xI="n",km="d";var LI="di",FI="s",UI="p";var _c=new D(""),HI=!1,Om=new D("",{factory:()=>HI});var Pm=new D(""),BI=!1,jI=new D(""),xm=new D("",{factory:()=>new Map});var bc="ngb";var VI=(n,e,t)=>{let r=n,o=r.__jsaction_fns??new Map,i=o.get(e)??[];i.push(t),o.set(e,i),r.__jsaction_fns=o},$I=(n,e)=>{let t=n,r=t.getAttribute(bc)??"",o=e.get(r)??new Set;o.has(t)||o.add(t),e.set(r,o)};var zI=n=>{n.removeAttribute(fd.JSACTION),n.removeAttribute(bc),n.__jsaction_fns=void 0},GI=new D("",{factory:()=>({})});function Lm(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var mm=new Map;function qI(n,e){return mm.set(n,e),()=>mm.delete(n)}var PT=!1,KI=(n,e,t,r)=>{};function nM(n,e,t,r){KI(n,e,t,r)}function WI(){PT||(KI=(n,e,t,r)=>{let o=n[Bt].get(In);mm.get(o)?.(e,t,r)},PT=!0)}var Bd=new D("");function jd(n){return(n.flags&32)===32}var rM="__nghData__",Fm=rM,oM="__nghDeferData__",YI=oM;var gd="ngh",QI="nghm",JI=()=>null;function iM(n,e,t=!1){let r=n.getAttribute(gd);if(r==null)return null;let[o,i]=r.split("|");if(r=t?i:o,!r)return null;let s=i?`|${i}`:"",a=t?o:s,c={};if(r!==""){let u=e.get($o,null,{optional:!0});u!==null&&(c=u.get(Fm,[])[Number(r)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,Vd(l,0,n.nextSibling)),a?n.setAttribute(gd,a):n.removeAttribute(gd),l}function ZI(){JI=iM}function XI(n,e,t=!1){return JI(n,e,t)}function ew(n){let e=n._lView;return e[O].type===2?null:(Fo(e)&&(e=e[le]),e)}function sM(n){return n.textContent?.replace(/\s/gm,"")}function aM(n){let e=Sc(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(i){let s=sM(i);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,o=[];for(;r=t.nextNode();)o.push(r);for(let i of o)i.textContent==="ngetn"?i.replaceWith(e.createTextNode("")):i.remove()}function Vd(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function ym(n,e){return n.segmentHeads?.[e]??null}function tw(n){return n.get(jI,!1,{optional:!0})}function cM(n,e){let t=n.data,r=t[kI]?.[e]??null;return r===null&&t[Hd]?.[e]&&(r=Um(n,e)),r}function nw(n,e){return n.data[Hd]?.[e]??null}function Um(n,e){let t=nw(n,e)??[],r=0;for(let o of t)r+=o[Tc]*(o[Nm]??1);return r}function lM(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[km];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function rw(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[km];n.disconnectedNodes=t?new Set(t):null}return!!lM(n)?.has(e)}function $d(n,e){let t=n[It];return t!==null&&!Ug()&&!jd(e)&&!rw(t,e.index-le)}function uM(n,e){let t=e.get(Bd),o=e.get($o).get(YI,{}),i=!1,s=n,a=null,c=[];for(;!i&&s;){i=t.has(s);let l=t.hydrating.get(s);if(a===null&&l!=null){a=l.promise;break}c.unshift(s),s=o[s][UI]}return{parentBlockPromise:a,hydrationQueue:c}}function sm(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===QI}function xT(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function ow(n){for(let r of n.body.childNodes)if(sm(r))return;let e=xT(n.body.previousSibling);if(sm(e))return;let t=xT(n.head.lastChild);if(!sm(t))throw new _(-507,!1)}function iw(n,e){let t=n.contentQueries;if(t!==null){let r=$(null);try{for(let o=0;o<t.length;o+=2){let i=t[o],s=t[o+1];if(s!==-1){let a=n.data[s];qg(i),a.contentQueries(2,e[s],s)}}}finally{$(r)}}}function vm(n,e,t){qg(0);let r=$(null);try{e(n,t)}finally{$(r)}}function sw(n,e,t){if(kg(e)){let r=$(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{$(r)}}}var nn=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(nn||{});var dM=/^>|^->|<!--|-->|--!>|<!-$/g,fM=/(<|>)/g,hM="\u200B$1\u200B";function pM(n){return n.replace(dM,e=>e.replace(fM,hM))}function aw(n){return n.ownerDocument.body}function cw(n){return n instanceof Function?n():n}function gM(n,e,t){let r=n.length;for(;;){let o=n.indexOf(e,t);if(o===-1)return o;if(o===0||n.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}var lw="ng-template";function mM(n,e,t,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&gM(e[o+1].toLowerCase(),t,0)!==-1)return!0}else if(Hm(n))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&typeof(i=e[o])=="string";)if(i.toLowerCase()===t)return!0}return!1}function Hm(n){return n.type===4&&n.value!==lw}function yM(n,e,t){let r=n.type===4&&!t?lw:n.value;return e===r}function vM(n,e,t){let r=4,o=n.attrs,i=o!==null?TM(o):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!tn(r)&&!tn(c))return!1;if(s&&tn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!yM(n,c,t)||c===""&&e.length===1){if(tn(r))return!1;s=!0}}else if(r&8){if(o===null||!mM(n,o,c,t)){if(tn(r))return!1;s=!0}}else{let l=e[++a],u=CM(c,o,Hm(n),t);if(u===-1){if(tn(r))return!1;s=!0;continue}if(l!==""){let f;if(u>i?f="":f=o[u+1].toLowerCase(),r&2&&l!==f){if(tn(r))return!1;s=!0}}}}return tn(r)||s}function tn(n){return(n&1)===0}function CM(n,e,t,r){if(e===null)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){let s=e[o];if(s===n)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return IM(e,n)}function EM(n,e,t=!1){for(let r=0;r<e.length;r++)if(vM(n,e[r],t))return!0;return!1}function TM(n){for(let e=0;e<n.length;e++){let t=n[e];if(PR(t))return e}return n.length}function IM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function LT(n,e){return n?":not("+e.trim()+")":e}function wM(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!tn(s)&&(e+=LT(i,o),o=""),r=s,i=i||!tn(r);t++}return o!==""&&(e+=LT(i,o)),e}function AM(n){return n.map(wM).join(",")}function SM(n){let e=[],t=[],r=1,o=2;for(;r<n.length;){let i=n[r];if(typeof i=="string")o===2?i!==""&&e.push(i,n[++r]):o===8&&t.push(i);else{if(!tn(o))break;o=i}r++}return t.length&&e.push(1,...t),e}var ms={};function uw(n,e){return n.createText(e)}function DM(n,e,t){n.setValue(e,t)}function dw(n,e){return n.createComment(pM(e))}function Bm(n,e,t){return n.createElement(e,t)}function wd(n,e,t,r,o){n.insertBefore(e,t,r,o)}function fw(n,e,t){n.appendChild(e,t)}function FT(n,e,t,r,o){r!==null?wd(n,e,t,r,o):fw(n,e,t)}function jm(n,e,t,r){n.removeChild(null,e,t,r)}function hw(n){n.textContent=""}function _M(n,e,t){n.setAttribute(e,"style",t)}function bM(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function pw(n,e,t){let{mergedAttrs:r,classes:o,styles:i}=t;r!==null&&OR(n,e,r),o!==null&&bM(n,e,o),i!==null&&_M(n,e,i)}function Vm(n,e,t,r,o,i,s,a,c,l,u){let f=le+r,p=f+o,h=RM(f,p),E=typeof l=="function"?l():l;return h[O]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:u}}function RM(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ms);return t}function MM(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Vm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function $m(n,e,t,r,o,i,s,a,c,l,u){let f=e.blueprint.slice();return f[Qe]=o,f[F]=r|4|128|8|64|1024,(l!==null||n&&n[F]&2048)&&(f[F]|=2048),Og(f),f[Se]=f[No]=n,f[$e]=t,f[Yn]=s||n&&n[Yn],f[se]=a||n&&n[se],f[Bt]=c||n&&n[Bt]||null,f[Ht]=i,f[lc]=YR(),f[It]=u,f[Ng]=l,f[ft]=e.type==2?n[ft]:f,f}function NM(n,e,t){let r=Zt(e,n),o=MM(t),i=n[Yn].rendererFactory,s=zm(n,$m(n,o,null,gw(t),r,e,null,i.createRenderer(r,t),null,null,null));return n[e.index]=s}function gw(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function mw(n,e,t,r){if(t===0)return-1;let o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function zm(n,e){return n[is]?n[Mg][Ut]=e:n[is]=e,n[Mg]=e,e}function Gm(n=1){yw(Lr(),ye(),ld()+n,!1)}function yw(n,e,t,r){if(!r)if((e[F]&3)===3){let i=n.preOrderCheckHooks;i!==null&&hd(e,i,t)}else{let i=n.preOrderHooks;i!==null&&pd(e,i,0,t)}Fr(t)}var zd=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(zd||{});function Cm(n,e,t,r){let o=$(null);try{let[i,s,a]=n.inputs[t],c=null;(s&zd.SignalBased)!==0&&(c=e[i][at]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,i):sI(e,c,i,r)}finally{$(o)}}var Hr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Hr||{}),kM;function qm(n,e){return kM(n,e)}var ps=new Set,Gd=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Gd||{}),Xn=new D(""),UT=new Set;function Br(n){UT.has(n)||(UT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Km=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=b({token:n,providedIn:"root",factory:()=>new n})}return n})(),vw=[0,1,2,3],Cw=(()=>{class n{ngZone=C(Ye);scheduler=C(Pr);errorHandler=C(mn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){C(Xn,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Q(16),this.executing=!0;for(let r of vw)for(let o of this.sequences)if(!(o.erroredOrDestroyed||!o.hooks[r]))try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let i=o.hooks[r];return i(o.pipelinedValue)},o.snapshot))}catch(i){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Q(17)}register(t){let{view:r}=t;r!==void 0?((r[xo]??=[]).push(t),as(r),r[F]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Gd.AFTER_NEXT_RENDER,t):t()}static \u0275prov=b({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ad=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,o,i,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=o,this.snapshot=s,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[xo];e&&(this.view[xo]=e.filter(t=>t!==this))}};function Wm(n,e){let t=e?.injector??C(Tt);return Br("NgAfterNextRender"),PM(n,t,e,!0)}function OM(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function PM(n,e,t,r){let o=e.get(Km);o.impl??=e.get(Cw);let i=e.get(Xn,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Zn):null,a=e.get(dd,null,{optional:!0}),c=new Ad(o.impl,OM(n),a?.view,r,s,i?.snapshot(null));return o.impl.register(c),c}var xM=new D("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Ew(n,e,t){let r=n.get(xM);if(Array.isArray(e))for(let o of e)r.queue.add(o),t?.detachedLeaveAnimationFns?.push(o);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function LM(n,e){for(let[t,r]of e)Ew(n,r.animateFns)}function HT(n,e,t,r){let o=n?.[dc]?.enter;e!==null&&o&&o.has(t.index)&&LM(r,o)}function ls(n,e,t,r,o,i,s,a){if(o!=null){let c,l=!1;At(o)?c=o:jt(o)&&(l=!0,o=o[Qe]);let u=St(o);n===0&&r!==null?(HT(a,r,i,t),s==null?fw(e,r,u):wd(e,r,u,s||null,!0)):n===1&&r!==null?(HT(a,r,i,t),wd(e,r,u,s||null,!0)):n===2?BT(a,i,t,f=>{jm(e,u,l,f)}):n===3&&BT(a,i,t,()=>{e.destroyNode(u)}),c!=null&&YM(e,n,t,c,i,r,s)}}function FM(n,e){Tw(n,e),e[Qe]=null,e[Ht]=null}function UM(n,e,t,r,o,i){r[Qe]=o,r[Ht]=e,qd(n,r,t,1,o,i)}function Tw(n,e){e[Yn].changeDetectionScheduler?.notify(9),qd(n,e,e[se],2,null,null)}function HM(n){let e=n[is];if(!e)return am(n[O],n);for(;e;){let t=null;if(jt(e))t=e[is];else{let r=e[Je];r&&(t=r)}if(!t){for(;e&&!e[Ut]&&e!==n;)jt(e)&&am(e[O],e),e=e[Se];e===null&&(e=n),jt(e)&&am(e[O],e),t=e&&e[Ut]}e=t}}function Ym(n,e){let t=n[hc],r=t.indexOf(e);t.splice(r,1)}function Qm(n,e){if(xr(e))return;let t=e[se];t.destroyNode&&qd(n,e,t,3,null,null),HM(e)}function am(n,e){if(xr(e))return;let t=$(null);try{e[F]&=-129,e[F]|=256,e[wt]&&qa(e[wt]),VM(n,e),jM(n,e),e[O].type===1&&e[se].destroy();let r=e[ko];if(r!==null&&At(e[Se])){r!==e[Se]&&Ym(r,e);let o=e[Po];o!==null&&o.detachView(n)}pm(e)}finally{$(t)}}function BT(n,e,t,r){let o=n?.[dc];if(o==null||o.leave==null||!o.leave.has(e.index))return r(!1);n&&ps.add(n),Ew(t,()=>{if(o.leave&&o.leave.has(e.index)){let s=o.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}o.detachedLeaveAnimationFns=void 0}o.running=Promise.allSettled(a),BM(n,r)}else n&&ps.delete(n),r(!1)},o)}function BM(n,e){let t=n[dc]?.running;if(t){t.then(()=>{n[dc].running=void 0,ps.delete(n),e(!0)});return}e(!1)}function jM(n,e){let t=n.cleanup,r=e[os];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[os]=null);let o=e[qn];if(o!==null){e[qn]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=e[uc];if(i!==null){e[uc]=null;for(let s of i)s.destroy()}}function VM(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let o=e[t[r]];if(!(o instanceof Ec)){let i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];Q(4,a,c);try{c.call(a)}finally{Q(5,a,c)}}else{Q(4,o,i);try{i.call(o)}finally{Q(5,o,i)}}}}}function $M(n,e,t){return zM(n,e.parent,t)}function zM(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Qe];if(Qn(r)){let{encapsulation:o}=n.data[r.directiveStart+r.componentOffset];if(o===nn.None||o===nn.Emulated)return null}return Zt(r,t)}function GM(n,e,t){return KM(n,e,t)}function qM(n,e,t){return n.type&40?Zt(n,t):null}var KM=qM,jT;function Jm(n,e,t,r){let o=$M(n,r,e),i=e[se],s=r.parent||e[Ht],a=GM(s,r,e);if(o!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)FT(i,o,t[c],a,!1);else FT(i,o,t,a,!1);jT!==void 0&&jT(i,r,e,t,o)}function vc(n,e){if(e!==null){let t=e.type;if(t&3)return Zt(e,n);if(t&4)return Em(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return vc(n,r);{let o=n[e.index];return At(o)?Em(-1,o):St(o)}}else{if(t&128)return vc(n,e.next);if(t&32)return qm(e,n)()||St(n[e.index]);{let r=Iw(n,e);if(r!==null){if(Array.isArray(r))return r[0];let o=Or(n[ft]);return vc(o,r)}else return vc(n,e.next)}}}return null}function Iw(n,e){if(e!==null){let r=n[ft][Ht],o=e.projection;return r.projection[o]}return null}function Em(n,e){let t=Je+n+1;if(t<e.length){let r=e[t],o=r[O].firstChild;if(o!==null)return vc(r,o)}return e[vn]}function Zm(n,e,t,r,o,i,s){for(;t!=null;){let a=r[Bt];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&hs(St(c),r),t.flags|=2),!jd(t))if(l&8)Zm(n,e,t.child,r,o,i,!1),ls(e,n,a,o,c,t,i,r);else if(l&32){let u=qm(t,r),f;for(;f=u();)ls(e,n,a,o,f,t,i,r);ls(e,n,a,o,c,t,i,r)}else l&16?WM(n,e,r,t,o,i):ls(e,n,a,o,c,t,i,r);t=s?t.projectionNext:t.next}}function qd(n,e,t,r,o,i){Zm(t,r,n.firstChild,e,o,i,!1)}function WM(n,e,t,r,o,i){let s=t[ft],c=s[Ht].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ls(e,n,t[Bt],o,u,r,i,t)}else{let l=c,u=s[Se];Id(r)&&(l.flags|=128),Zm(n,e,l,u,o,i,!0)}}function YM(n,e,t,r,o,i,s){let a=r[vn],c=St(r);a!==c&&ls(e,n,t,i,a,o,s);for(let l=Je;l<r.length;l++){let u=r[l];qd(u[O],u,n,e,i,a)}}function ww(n,e,t,r,o){let i=ld(),s=r&2;try{Fr(-1),s&&e.length>le&&yw(n,e,le,!1),Q(s?2:0,o,t),t(r,o)}finally{Fr(i),Q(s?3:1,o,t)}}function Xm(n,e,t){rN(n,e,t),(t.flags&64)===64&&oN(n,e,t)}function ey(n,e,t=Zt){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?t(e,n):n[s];n[o++]=a}}}function QM(n,e,t,r){let i=r.get(Om,HI)||t===nn.ShadowDom||t===nn.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,i);return JM(s),s}function JM(n){Aw(n)}var Aw=()=>null;function ZM(n){AI(n)?hw(n):aM(n)}function Sw(){Aw=ZM}function XM(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function eN(n,e,t,r,o,i){let s=e[O];if(ny(n,s,e,t,r)){Qn(n)&&nN(e,n.index);return}n.type&3&&(t=XM(t)),tN(n,e,t,r,o,i)}function tN(n,e,t,r,o,i){if(n.type&3){let s=Zt(n,e);r=i!=null?i(r,n.value||"",t):r,o.setProperty(s,t,r)}else n.type&12}function nN(n,e){let t=Xt(e,n);t[F]&16||(t[F]|=64)}function rN(n,e,t){let r=t.directiveStart,o=t.directiveEnd;Qn(t)&&NM(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||gI(t,e);let i=t.initialInputs;for(let s=r;s<o;s++){let a=n.data[s],c=fm(e,n,s,t);if(hs(c,e),i!==null&&sN(e,s-r,c,a,t,i),Lo(a)){let l=Xt(t.index,e);l[$e]=fm(e,n,s,t)}}}function oN(n,e,t){let r=t.directiveStart,o=t.directiveEnd,i=t.index,s=mT();try{Fr(i);for(let a=r;a<o;a++){let c=n.data[a],l=e[a];sd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&iN(c,l)}}finally{Fr(-1),sd(s)}}function iN(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Dw(n,e){let t=n.directiveRegistry,r=null;if(t)for(let o=0;o<t.length;o++){let i=t[o];EM(e,i.selectors,!1)&&(r??=[],Lo(i)?r.unshift(i):r.push(i))}return r}function sN(n,e,t,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Cm(r,t,c,l)}}function _w(n,e,t,r,o){let i=le+t,s=e[O],a=o(s,e,n,r,t);e[i]=a,cs(n,!0);let c=n.type===2;return c?(pw(e[se],a,n),(aT()===0||pc(n))&&hs(a,e),cT()):hs(a,e),ud()&&(!c||!jd(n))&&Jm(s,e,a,n),n}function bw(n){let e=n;return Vg()?dT():(e=e.parent,cs(e,!1)),e}function ty(n,e){let t=n[Bt];if(!t)return;let r;try{r=t.get(Vt,null)}catch{r=null}r?.(e)}function ny(n,e,t,r,o){let i=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],f=e.data[l];Cm(f,t[l],u,o),a=!0}if(i)for(let c of i){let l=t[c],u=e.data[c];Cm(u,l,r,o),a=!0}return a}function aN(n,e){let t=Xt(e,n),r=t[O];cN(r,t);let o=t[Qe];o!==null&&t[It]===null&&(t[It]=XI(o,t[Bt])),Q(18),ry(r,t,t[$e]),Q(19,t[$e])}function cN(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ry(n,e,t){ad(e);try{let r=n.viewQuery;r!==null&&vm(1,r,t);let o=n.template;o!==null&&ww(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Po]?.finishViewCreation(n),n.staticContentQueries&&iw(n,e),n.staticViewQueries&&vm(2,n.viewQuery,t);let i=n.components;i!==null&&lN(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[F]&=-5,cd()}}function lN(n,e){for(let t=0;t<e.length;t++)aN(n,e[t])}function Rw(n,e,t,r){let o=$(null);try{let i=e.tView,a=n[F]&4096?4096:16,c=$m(n,i,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[ko]=l;let u=n[Po];return u!==null&&(c[Po]=u.createEmbeddedView(i)),ry(i,c,t),c}finally{$(o)}}function Tm(n,e){return!e||e.firstChild===null||Id(n)}function Ic(n,e,t,r,o=!1){for(;t!==null;){if(t.type===128){t=o?t.projectionNext:t.next;continue}let i=e[t.index];i!==null&&r.push(St(i)),At(i)&&Mw(i,r);let s=t.type;if(s&8)Ic(n,e,t.child,r);else if(s&32){let a=qm(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Iw(e,t);if(Array.isArray(a))r.push(...a);else{let c=Or(e[ft]);Ic(c[O],c,a,r,!0)}}t=o?t.projectionNext:t.next}return r}function Mw(n,e){for(let t=Je;t<n.length;t++){let r=n[t],o=r[O].firstChild;o!==null&&Ic(r[O],r,o,e)}n[vn]!==n[Qe]&&e.push(n[vn])}function Nw(n){if(n[xo]!==null){for(let e of n[xo])e.impl.addSequence(e);n[xo].length=0}}var kw=[];function uN(n){return n[wt]??dN(n)}function dN(n){let e=kw.pop()??Object.create(hN);return e.lView=n,e}function fN(n){n.lView[wt]!==n&&(n.lView=null,kw.push(n))}var hN=A(g({},$a),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{as(n.lView)},consumerOnSignalRead(){this.lView[wt]=this}});function pN(n){let e=n[wt]??Object.create(gN);return e.lView=n,e}var gN=A(g({},$a),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Or(n.lView);for(;e&&!Ow(e[O]);)e=Or(e);e&&Pg(e)},consumerOnSignalRead(){this.lView[wt]=this}});function Ow(n){return n.type!==2}function Pw(n){if(n[uc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[uc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[F]&8192)}}var mN=100;function xw(n,e=0){let r=n[Yn].rendererFactory,o=!1;o||r.begin?.();try{yN(n,e)}finally{o||r.end?.()}}function yN(n,e){let t=$g();try{zg(!0),Im(n,e);let r=0;for(;gc(n);){if(r===mN)throw new _(103,!1);r++,Im(n,1)}}finally{zg(t)}}function vN(n,e,t,r){if(xr(e))return;let o=e[F],i=!1,s=!1;ad(e);let a=!0,c=null,l=null;i||(Ow(n)?(l=uN(e),c=Ga(l)):Cu()===null?(a=!1,l=pN(e),c=Ga(l)):e[wt]&&(qa(e[wt]),e[wt]=null));try{Og(e),hT(n.bindingStartIndex),t!==null&&ww(n,e,t,2,r);let u=(o&3)===3;if(!i)if(u){let h=n.preOrderCheckHooks;h!==null&&hd(e,h,null)}else{let h=n.preOrderHooks;h!==null&&pd(e,h,0,null),om(e,0)}if(s||CN(e),Pw(e),Lw(e,0),n.contentQueries!==null&&iw(n,e),!i)if(u){let h=n.contentCheckHooks;h!==null&&hd(e,h)}else{let h=n.contentHooks;h!==null&&pd(e,h,1),om(e,1)}TN(n,e);let f=n.components;f!==null&&Uw(e,f,0);let p=n.viewQuery;if(p!==null&&vm(2,p,r),!i)if(u){let h=n.viewCheckHooks;h!==null&&hd(e,h)}else{let h=n.viewHooks;h!==null&&pd(e,h,2),om(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[td]){for(let h of e[td])h();e[td]=null}i||(Nw(e),e[F]&=-73)}catch(u){throw i||as(e),u}finally{l!==null&&(Eu(l,c),a&&fN(l)),cd()}}function Lw(n,e){for(let t=_I(n);t!==null;t=bI(t))for(let r=Je;r<t.length;r++){let o=t[r];Fw(o,e)}}function CN(n){for(let e=_I(n);e!==null;e=bI(e)){if(!(e[F]&2))continue;let t=e[hc];for(let r=0;r<t.length;r++){let o=t[r];Pg(o)}}}function EN(n,e,t){Q(18);let r=Xt(e,n);Fw(r,t),Q(19,r[$e])}function Fw(n,e){nd(n)&&Im(n,e)}function Im(n,e){let r=n[O],o=n[F],i=n[wt],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&Tu(i)),s||=!1,i&&(i.dirty=!1),n[F]&=-9217,s)vN(r,n,r.template,n[$e]);else if(o&8192){let a=$(null);try{Pw(n),Lw(n,1);let c=r.components;c!==null&&Uw(n,c,1),Nw(n)}finally{$(a)}}}function Uw(n,e,t){for(let r=0;r<e.length;r++)EN(n,e[r],t)}function TN(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let o=t[r];if(o<0)Fr(~o);else{let i=o,s=t[++r],a=t[++r];gT(s,i);let c=e[i];Q(24,c),a(2,c),Q(25,c)}}}finally{Fr(-1)}}function Kd(n,e){let t=$g()?64:1088;for(n[Yn].changeDetectionScheduler?.notify(e);n;){n[F]|=t;let r=Or(n);if(Fo(n)&&!r)return n;n=r}return null}function Hw(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Bw(n,e,t,r=!0){let o=e[O];if(wN(o,e,n,t),r){let s=Em(t,n),a=e[se],c=a.parentNode(n[vn]);c!==null&&UM(o,n[Ht],a,e,c,s)}let i=e[It];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function IN(n,e){let t=Sd(n,e);return t!==void 0&&Qm(t[O],t),t}function Sd(n,e){if(n.length<=Je)return;let t=Je+e,r=n[t];if(r){let o=r[ko];o!==null&&o!==n&&Ym(o,r),e>0&&(n[t-1][Ut]=r[Ut]);let i=sc(n,Je+e);FM(r[O],r);let s=i[Po];s!==null&&s.detachView(i[O]),r[Se]=null,r[Ut]=null,r[F]&=-129}return r}function wN(n,e,t,r){let o=Je+r,i=t.length;r>0&&(t[o-1][Ut]=e),r<i-Je?(e[Ut]=t[o],Ag(t,Je+r,e)):(t.push(e),e[Ut]=null),e[Se]=t;let s=e[ko];s!==null&&t!==s&&jw(s,e);let a=e[Po];a!==null&&a.insertView(n),rd(e),e[F]|=128}function jw(n,e){let t=n[hc],r=e[Se];if(jt(r))n[F]|=2;else{let o=r[Se][ft];e[ft]!==o&&(n[F]|=2)}t===null?n[hc]=[e]:t.push(e)}var Ur=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[O];return Ic(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[$e]}set context(e){this._lView[$e]=e}get destroyed(){return xr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Se];if(At(e)){let t=e[fc],r=t?t.indexOf(this):-1;r>-1&&(Sd(e,r),sc(t,r))}this._attachedToViewContainer=!1}Qm(this._lView[O],this._lView)}onDestroy(e){xg(this._lView,e)}markForCheck(){Kd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[F]&=-129}reattach(){rd(this._lView),this._lView[F]|=128}detectChanges(){this._lView[F]|=1024,xw(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Fo(this._lView),t=this._lView[ko];t!==null&&!e&&Ym(t,this._lView),Tw(this._lView[O],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new _(902,!1);this._appRef=e;let t=Fo(this._lView),r=this._lView[ko];r!==null&&!t&&jw(r,this._lView),rd(this._lView)}};var Wd=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=AN;constructor(t,r,o){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,o){let i=Rw(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:o});return new Ur(i)}}return n})();function AN(){return Vw(Dt(),ye())}function Vw(n,e){return n.type&4?new Wd(e,n,Ld(n,e)):null}function Yd(n,e,t,r,o){let i=n.data[e];if(i===null)i=SN(n,e,t,r,o),pT()&&(i.flags|=32);else if(i.type&64){i.type=t,i.value=r,i.attrs=o;let s=uT();i.injectorIndex=s===null?-1:s.injectorIndex}return cs(i,!0),i}function SN(n,e,t,r,o){let i=jg(),s=Vg(),a=s?i:i&&i.parent,c=n.data[e]=_N(n,a,t,e,r,o);return DN(n,c,i,s),c}function DN(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function _N(n,e,t,r,o,i){let s=e?e.injectorIndex:-1,a=0;return Ug()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var bN=new RegExp(`^(\\d+)*(${NI}|${MI})*(.*)`);function RN(n){let e=n.match(bN),[t,r,o,i]=e,s=r?parseInt(r,10):o,a=[];for(let[c,l,u]of i.matchAll(/(f|n)(\d*)/g)){let f=parseInt(u,10)||1;a.push(l,f)}return[s,...a]}function MN(n){return!n.prev&&n.parent?.type===8}function cm(n){return n.index-le}function NN(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Qd(n,e,t,r){let o=cm(r),i=NN(n,o);if(i===void 0){let s=n.data[xI];if(s?.[o])i=ON(s[o],t);else if(e.firstChild===r)i=n.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(MN(r)){let l=cm(r.parent);i=ym(n,l)}else{let l=Zt(c,t);if(a)i=l.firstChild;else{let u=cm(c),f=ym(n,u);if(c.type===2&&f){let h=Um(n,u)+1;i=Jd(h,f)}else i=l.nextSibling}}}}return i}function Jd(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function kN(n,e){let t=n;for(let r=0;r<e.length;r+=2){let o=e[r],i=e[r+1];for(let s=0;s<i;s++)switch(o){case eM:t=t.firstChild;break;case tM:t=t.nextSibling;break}}return t}function ON(n,e){let[t,...r]=RN(n),o;if(t===MI)o=e[ft][Qe];else if(t===NI)o=aw(e[ft][Qe]);else{let i=Number(t);o=St(e[i+le])}return kN(o,r)}var PN=!1;function $w(n){PN=n}function xN(n){let e=n[It];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let o=n[se];for(let i of r.values())LN(o,t,i)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function LN(n,e,t){for(let r of t.node.cases[t.case]){let o=e.get(r.index-le);o&&jm(n,o,!1)}}function oy(n){let e=n[Jt]??[],r=n[Se][se],o=[];for(let i of e)i.data[LI]!==void 0?o.push(i):zw(i,r);n[Jt]=o}function FN(n){let{lContainer:e}=n,t=e[Jt];if(t===null)return;let o=e[Se][se];for(let i of t)zw(i,o)}function zw(n,e){let t=0,r=n.firstChild;if(r){let o=n.data[Tc];for(;t<o;){let i=r.nextSibling;jm(e,r,!1),r=i,t++}}}function Zd(n){oy(n);let e=n[Qe];jt(e)&&Dd(e);for(let t=Je;t<n.length;t++)Dd(n[t])}function Dd(n){xN(n);let e=n[O];for(let t=le;t<e.bindingStartIndex;t++)if(At(n[t])){let r=n[t];Zd(r)}else jt(n[t])&&Dd(n[t])}function iy(n){let e=n._views;for(let t of e){let r=ew(t);r!==null&&r[Qe]!==null&&(jt(r)?Dd(r):Zd(r))}}function UN(n,e,t,r){n!==null&&(t.cleanup(e),Zd(n.lContainer),iy(r))}function HN(n,e){let t=[];for(let r of e)for(let o=0;o<(r[Nm]??1);o++){let i={data:r,firstChild:null};r[Tc]>0&&(i.firstChild=n,n=Jd(r[Tc],n)),t.push(i)}return[n,t]}var Gw=()=>null,BN=()=>null;function qw(){Gw=jN,BN=VN}function jN(n,e){return Kw(n,e)?n[Jt].shift():(oy(n),null)}function wm(n,e){return Gw(n,e)}function VN(n,e,t){if(e.tView.ssrId===null)return null;let r=wm(n,e.tView.ssrId);return t[O].firstUpdatePass&&r===null&&$N(t,e),r}function $N(n,e){let t=e;for(;t;){if(VT(n,t))return;if((t.flags&256)===256)break;t=t.prev}for(t=e.next;t&&(t.flags&512)===512;){if(VT(n,t))return;t=t.next}}function Kw(n,e){let t=n[Jt];return!e||t===null||t.length===0?!1:t[0].data[PI]===e}function VT(n,e){let t=e.tView?.ssrId;if(t==null)return!1;let r=n[e.index];return At(r)&&Kw(r,t)?(oy(r),!0):!1}var Ww=class{},Xd=class{},Am=class{resolveComponentFactory(e){throw new _(917,!1)}},Rc=class{static NULL=new Am},jo=class{};var Yw=(()=>{class n{static \u0275prov=b({token:n,providedIn:"root",factory:()=>null})}return n})();var md={},ds=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let o=this.injector.get(e,md,r);return o!==md||t===md?o:this.parentInjector.get(e,t,r)}};function _d(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=hg(o,a);else if(i==2){let c=a,l=e[++s];r=hg(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}function bt(n,e=0){let t=ye();if(t===null)return N(n,e);let r=Dt();return CI(r,t,dt(n),e)}function Qw(n,e,t,r,o){let i=r===null?null:{"":-1},s=o(n,t);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}qN(n,e,t,a,i,c,l)}i!==null&&r!==null&&zN(t,r,i)}function zN(n,e,t){let r=n.localNames=[];for(let o=0;o<e.length;o+=2){let i=t[e[o+1]];if(i==null)throw new _(-301,!1);r.push(e[o],i)}}function GN(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function qN(n,e,t,r,o,i,s){let a=r.length,c=!1;for(let p=0;p<a;p++){let h=r[p];!c&&Lo(h)&&(c=!0,GN(n,t,p)),BR(gI(t,e),n,h.type)}ZN(t,n.data.length,a);for(let p=0;p<a;p++){let h=r[p];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,f=mw(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let p=0;p<a;p++){let h=r[p];if(t.mergedAttrs=Pd(t.mergedAttrs,h.hostAttrs),WN(n,t,e,f,h),JN(f,h,o),s!==null&&s.has(h)){let[I,w]=s.get(h);t.directiveToIndex.set(h.type,[f,I+t.directiveStart,w+t.directiveStart])}else(i===null||!i.has(h))&&t.directiveToIndex.set(h.type,f);h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let E=h.type.prototype;!l&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(E.ngOnChanges||E.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),f++}KN(n,t,i)}function KN(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let o=n.data[r];if(t===null||!t.has(o))$T(0,e,o,r),$T(1,e,o,r),GT(e,r,!1);else{let i=t.get(o);zT(0,e,i,r),zT(1,e,i,r),GT(e,r,!0)}}}function $T(n,e,t,r){let o=n===0?t.inputs:t.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[i]??=[],s[i].push(r),Jw(e,i)}}function zT(n,e,t,r){let o=n===0?t.inputs:t.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),Jw(e,s)}}function Jw(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function GT(n,e,t){let{attrs:r,inputs:o,hostDirectiveInputs:i}=n;if(r===null||!t&&o===null||t&&i===null||Hm(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&o.hasOwnProperty(c)){let l=o[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&i.hasOwnProperty(c)){let l=i[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function WN(n,e,t,r,o){n.data[r]=o;let i=o.factory||(o.factory=Do(o.type,!0)),s=new Ec(i,Lo(o),bt,null);n.blueprint[r]=s,t[r]=s,YN(n,e,r,mw(n,t,o.hostVars,ms),o)}function YN(n,e,t,r,o){let i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;QN(s)!=a&&s.push(a),s.push(t,r,i)}}function QN(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function JN(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Lo(e)&&(t[""]=n)}}function ZN(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Zw(n,e,t,r,o,i,s,a){let c=e[O],l=c.consts,u=Uo(l,s),f=Yd(c,n,t,r,u);return i&&Qw(c,e,f,Uo(l,a),o),f.mergedAttrs=Pd(f.mergedAttrs,f.attrs),f.attrs!==null&&_d(f,f.attrs,!1),f.mergedAttrs!==null&&_d(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function Xw(n,e){uI(n,e),kg(e)&&n.queries.elementEnd(e)}function XN(n,e,t,r,o,i){let s=e.consts,a=Uo(s,o),c=Yd(e,n,t,r,a);if(c.mergedAttrs=Pd(c.mergedAttrs,c.attrs),i!=null){let l=Uo(s,i);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&_d(c,c.attrs,!1),c.mergedAttrs!==null&&_d(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function eA(n,e,t){if(t===ms)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function yd(n,e,t){return function r(o){let i=Qn(n)?Xt(n.index,e):e;Kd(i,5);let s=e[$e],a=qT(e,s,t,o),c=r.__ngNextListenerFn__;for(;c;)a=qT(e,s,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function qT(n,e,t,r){let o=$(null);try{return Q(6,e,t),t(r)!==!1}catch(i){return ty(n,i),!1}finally{Q(7,e,t),$(o)}}function tA(n,e,t,r,o,i,s,a){let c=pc(n),l=!1,u=null;if(!r&&c&&(u=tk(e,t,i,n.index)),u!==null){let f=u.__ngLastListenerFn__||u;f.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let f=Zt(n,t),p=r?r(f):f;nM(t,p,i,a);let h=o.listen(p,i,a);if(!ek(i)){let E=r?I=>r(St(I[n.index])):n.index;nA(E,e,t,i,a,h,!1)}}return l}function ek(n){return n.startsWith("animation")||n.startsWith("transition")}function tk(n,e,t,r){let o=n.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===t&&o[i+1]===r){let a=e[os],c=o[i+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function nA(n,e,t,r,o,i,s){let a=e.firstCreatePass?sT(e):null,c=iT(t),l=c.length;c.push(o,i),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function KT(n,e,t,r,o,i){let s=e[t],a=e[O],l=a.data[t].outputs[r],f=s[l].subscribe(i);nA(n.index,a,e,o,i,f,!0)}var Sm=Symbol("BINDING");var bd=class extends Rc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Wn(e);return new gs(t,this.ngModule)}};function nk(n){return Object.keys(n).map(e=>{let[t,r,o]=n[e],i={propName:t,templateName:e,isSignal:(r&zd.SignalBased)!==0};return o&&(i.transform=o),i})}function rk(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function ok(n,e,t){let r=e instanceof Ae?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new ds(t,r):t}function ik(n){let e=n.get(jo,null);if(e===null)throw new _(407,!1);let t=n.get(Yw,null),r=n.get(Pr,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function sk(n,e){let t=rA(n);return Bm(e,t,t==="svg"?ZE:t==="math"?XE:null)}function rA(n){return(n.selectors[0][0]||"div").toLowerCase()}var gs=class extends Xd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=nk(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=rk(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=AM(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,o,i,s){Q(22);let a=$(null);try{let c=this.componentDef,l=ak(r,c,s,i),u=ok(c,o||this.ngModule,e),f=ik(u),p=f.rendererFactory.createRenderer(null,c),h=r?QM(p,r,c.encapsulation,u):sk(c,p),E=s?.some(WT)||i?.some(S=>typeof S!="function"&&S.bindings.some(WT)),I=$m(null,l,null,512|gw(c),null,null,f,p,u,null,XI(h,u,!0));I[le]=h,ad(I);let w=null;try{let S=Zw(le,I,2,"#host",()=>l.directiveRegistry,!0,0);pw(p,h,S),hs(h,I),Xm(l,I,S),sw(l,S,I),Xw(l,S),t!==void 0&&lk(S,this.ngContentSelectors,t),w=Xt(S.index,I),I[$e]=w[$e],ry(l,I,null)}catch(S){throw w!==null&&pm(w),pm(I),S}finally{Q(23),cd()}return new Rd(this.componentType,I,!!E)}finally{$(a)}}};function ak(n,e,t,r){let o=n?["ng-version","21.0.0"]:SM(e.selectors[0]),i=null,s=null,a=0;if(t)for(let u of t)a+=u[Sm].requiredVars,u.create&&(u.targetIdx=0,(i??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let f=r[u];if(typeof f!="function")for(let p of f.bindings){a+=p[Sm].requiredVars;let h=u+1;p.create&&(p.targetIdx=h,(i??=[]).push(p)),p.update&&(p.targetIdx=h,(s??=[]).push(p))}}let c=[e];if(r)for(let u of r){let f=typeof u=="function"?u:u.type,p=Xu(f);c.push(p)}return Vm(0,null,ck(i,s),1,a,c,null,null,null,[o],null)}function ck(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function WT(n){let e=n[Sm].kind;return e==="input"||e==="twoWay"}var Rd=class extends Ww{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=ss(t[O],le),this.location=Ld(this._tNode,t),this.instance=Xt(this._tNode.index,t)[$e],this.hostView=this.changeDetectorRef=new Ur(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView,i=ny(r,o[O],o,e,t);this.previousInputValues.set(e,t);let s=Xt(r.index,o);Kd(s,1)}get injector(){return new Bo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function lk(n,e,t){let r=n.projection=[];for(let o=0;o<e.length;o++){let i=t[o];r.push(i!=null&&i.length?Array.from(i):null)}}var ys=(()=>{class n{static __NG_ELEMENT_ID__=uk}return n})();function uk(){let n=Dt();return fk(n,ye())}var dk=ys,oA=class extends dk{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ld(this._hostTNode,this._hostLView)}get injector(){return new Bo(this._hostTNode,this._hostLView)}get parentInjector(){let e=_m(this._hostTNode,this._hostLView);if(fI(e)){let t=Td(e,this._hostLView),r=Ed(e),o=t[O].data[r+8];return new Bo(o,t)}else return new Bo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=YT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Je}createEmbeddedView(e,t,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=wm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},i,s);return this.insertImpl(a,o,Tm(this._hostTNode,s)),a}createComponent(e,t,r,o,i,s,a){let c=e&&!SR(e),l;if(c)l=t;else{let w=t||{};l=w.index,r=w.injector,o=w.projectableNodes,i=w.environmentInjector||w.ngModuleRef,s=w.directives,a=w.bindings}let u=c?e:new gs(Wn(e)),f=r||this.parentInjector;if(!i&&u.ngModule==null){let S=(c?f:this.parentInjector).get(Ae,null);S&&(i=S)}let p=Wn(u.componentType??{}),h=wm(this._lContainer,p?.id??null),E=h?.firstChild??null,I=u.create(f,o,E,i,s,a);return this.insertImpl(I.hostView,l,Tm(this._hostTNode,h)),I}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let o=e._lView;if(nT(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=o[Se],l=new oA(c,c[Ht],c[Se]);l.detach(l.indexOf(e))}}let i=this._adjustIndex(t),s=this._lContainer;return Bw(s,o,i,r),e.attachToViewContainerRef(),Ag(lm(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=YT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Sd(this._lContainer,t);r&&(sc(lm(this._lContainer),t),Qm(r[O],r))}detach(e){let t=this._adjustIndex(e,-1),r=Sd(this._lContainer,t);return r&&sc(lm(this._lContainer),t)!=null?new Ur(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function YT(n){return n[fc]}function lm(n){return n[fc]||(n[fc]=[])}function fk(n,e){let t,r=e[n.index];return At(r)?t=r:(t=Hw(r,e,null,n),e[n.index]=t,zm(e,t)),iA(t,e,n,r),new oA(t,n,e)}function hk(n,e){let t=n[se],r=t.createComment(""),o=Zt(e,n),i=t.parentNode(o);return wd(t,i,r,t.nextSibling(o),!1),r}var iA=sA,sy=()=>!1;function pk(n,e,t){return sy(n,e,t)}function sA(n,e,t,r){if(n[vn])return;let o;t.type&8?o=St(r):o=hk(e,t),n[vn]=o}function gk(n,e,t){if(n[vn]&&n[Jt])return!0;let r=t[It],o=e.index-le;if(!r||SI(e)||rw(r,o))return!1;let s=ym(r,o),a=r.data[Hd]?.[o],[c,l]=HN(s,a);return n[vn]=c,n[Jt]=l,!0}function mk(n,e,t,r){sy(n,t,e)||sA(n,e,t,r)}function aA(){iA=mk,sy=gk}var Vo=class{},ef=class{};var Md=class extends Vo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new bd(this);constructor(e,t,r,o=!0){super(),this.ngModuleType=e,this._parent=t;let i=_g(e);this._bootstrapComponents=cw(i.bootstrap),this._r3Injector=Qg(e,t,[{provide:Vo,useValue:this},{provide:Rc,useValue:this.componentFactoryResolver},...r],kr(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Nd=class extends ef{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Md(this.moduleType,e,[])}};var wc=class extends Vo{injector;componentFactoryResolver=new bd(this);instance=null;constructor(e){super();let t=new _o([...e.providers,{provide:Vo,useValue:this},{provide:Rc,useValue:this.componentFactoryResolver}],e.parent||cc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function vs(n,e,t=null){return new wc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var yk=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=ed(!1,t.type),o=r.length>0?vs([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=b({token:n,providedIn:"environment",factory:()=>new n(N(Ae))})}return n})();function rn(n){return Ac(()=>{let e=cA(n),t=A(g({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Rm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(yk).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||nn.Emulated,styles:n.styles||Qt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Br("NgStandalone"),lA(t);let r=n.dependencies;return t.directiveDefs=QT(r,vk),t.pipeDefs=QT(r,bg),t.id=Tk(t),t})}function vk(n){return Wn(n)||Xu(n)}function Cs(n){return Ac(()=>({type:n.type,bootstrap:n.bootstrap||Qt,declarations:n.declarations||Qt,imports:n.imports||Qt,exports:n.exports||Qt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ck(n,e){if(n==null)return Mo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let o=n[r],i,s,a,c;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,c=o[3]||null):(i=o,s=o,a=zd.None,c=null),t[i]=[r,a,c],e[i]=s}return t}function Ek(n){if(n==null)return Mo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Mc(n){return Ac(()=>{let e=cA(n);return lA(e),e})}function cA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Mo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Qt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Ck(n.inputs,e),outputs:Ek(n.outputs),debugInfo:null}}function lA(n){n.features?.forEach(e=>e(n))}function QT(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let o of t){let i=e(o);i!==null&&r.push(i)}return r}:null}function Tk(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let i of r.join("|"))e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ik(n,e,t,r,o,i,s,a){if(t.firstCreatePass){n.mergedAttrs=Pd(n.mergedAttrs,n.attrs);let u=n.tView=Vm(2,n,o,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),cs(n,!1);let c=uA(t,e,n,r);ud()&&Jm(t,e,c,n),hs(c,e);let l=Hw(c,e,c,n);e[r+le]=l,zm(e,l),pk(l,n,e)}function wk(n,e,t,r,o,i,s,a,c,l,u){let f=t+le,p;return e.firstCreatePass?(p=Yd(e,f,4,s||null,a||null),Fg()&&Qw(e,n,p,Uo(e.consts,l),Dw),uI(e,p)):p=e.data[f],Ik(p,n,e,t,r,o,i,c),pc(p)&&Xm(e,n,p),l!=null&&ey(n,p,u),p}function tf(n,e,t,r,o,i,s,a){let c=ye(),l=Lr(),u=Uo(l.consts,i);return wk(c,l,n,e,t,r,o,u,void 0,s,a),tf}var uA=dA;function dA(n,e,t,r){return Jn(!0),e[se].createComment("")}function Ak(n,e,t,r){let o=!$d(e,t);Jn(o);let i=e[It]?.data[OI]?.[r]??null;if(i!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=i),o)return dA(n,e);let s=e[It],a=Qd(s,n,e,t);Vd(s,r,a);let c=Um(s,r);return Jd(c,a)}function fA(){uA=Ak}var _t=(function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n})(_t||{}),JT=0,Sk=1,De=(function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n})(De||{});var Dk=0,Nc=1;var _k=4,bk=5;var Rk=7,fs=8,Mk=9,ay=(function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n})(ay||{});function vd(n,e){let t=kk(n),r=e[t];if(r!==null){for(let o of r)o();e[t]=null}}function Nk(n){vd(1,n),vd(0,n),vd(2,n)}function kk(n){let e=_k;return n===1?e=bk:n===2&&(e=Mk),e}function hA(n){return n+1}function Es(n,e){let t=n[O],r=hA(e.index);return n[r]}function kc(n,e){let t=hA(e.index);return n.data[t]}function Ok(n,e,t){let r=e[O],o=kc(r,t);switch(n){case De.Complete:return o.primaryTmplIndex;case De.Loading:return o.loadingTmplIndex;case De.Error:return o.errorTmplIndex;case De.Placeholder:return o.placeholderTmplIndex;default:return null}}function ZT(n,e){return e===De.Placeholder?n.placeholderBlockConfig?.[JT]??null:e===De.Loading?n.loadingBlockConfig?.[JT]??null:null}function Pk(n){return n.loadingBlockConfig?.[Sk]??null}function XT(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function xk(n,e){let t=e.primaryTmplIndex+le;return ss(n,t)}var Lk=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,o,i){if(!this.cachedInjectors.has(t)){let s=o.length>0?vs(o,r,i):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=b({token:n,providedIn:"environment",factory:()=>new n})}return n})();var pA=new D("");function um(n,e,t){return n.get(Lk).getOrCreateInjector(e,n,t,"")}function Fk(n,e,t){if(n instanceof ds){let o=n.injector,i=n.parentInjector,s=um(i,e,t);return new ds(o,s)}let r=n.get(Ae);if(r!==n){let o=um(r,e,t);return new ds(n,o)}return um(n,e,t)}function Ho(n,e,t,r=!1){let o=t[Se],i=o[O];if(xr(o))return;let s=Es(o,e),a=s[Nc],c=s[Rk];if(!(c!==null&&n<c)&&eI(a,n)&&eI(s[Dk]??-1,n)){let l=kc(i,e),f=!r&&!0&&(Pk(l)!==null||ZT(l,De.Loading)!==null||ZT(l,De.Placeholder))?Bk:Hk;try{f(n,s,t,e,o)}catch(p){ty(o,p)}}}function Uk(n,e){let t=n[Jt]?.findIndex(o=>o.data[FI]===e[Nc])??-1;return{dehydratedView:t>-1?n[Jt][t]:null,dehydratedViewIx:t}}function Hk(n,e,t,r,o){Q(20);let i=Ok(n,o,r);if(i!==null){e[Nc]=n;let s=o[O],a=i+le,c=ss(s,a),l=0;IN(t,l);let u;if(n===De.Complete){let E=kc(s,r),I=E.providers;I&&I.length>0&&(u=Fk(o[Bt],E,I))}let{dehydratedView:f,dehydratedViewIx:p}=Uk(t,e),h=Rw(o,c,null,{injector:u,dehydratedView:f});if(Bw(t,h,l,Tm(c,f)),Kd(h,2),p>-1&&t[Jt]?.splice(p,1),(n===De.Complete||n===De.Error)&&Array.isArray(e[fs])){for(let E of e[fs])E();e[fs]=null}}Q(21)}function eI(n,e){return n<e}function tI(n,e,t){n.loadingPromise.then(()=>{n.loadingState===_t.COMPLETE?Ho(De.Complete,e,t):n.loadingState===_t.FAILED&&Ho(De.Error,e,t)})}var Bk=null;var nf=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var cy=new D("");function Ts(n){return!!n&&typeof n.then=="function"}function ly(n){return!!n&&typeof n.subscribe=="function"}var gA=new D("");var uy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=C(gA,{optional:!0})??[];injector=C(Tt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let i=He(this.injector,o);if(Ts(i))t.push(i);else if(ly(i)){let s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jr=new D("");function mA(){Fp(()=>{let n="";throw new _(600,n)})}function yA(n){return n.isBoundToModule}var jk=10;var Rt=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=C(Vt);afterRenderManager=C(Km);zonelessEnabled=C(mc);rootEffectScheduler=C(rm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ve;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=C(Cn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(te(t=>!t))}constructor(){C(Xn,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=C(Ae);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,o=Tt.NULL){return this._injector.get(Ye).run(()=>{Q(10);let s=t instanceof Xd;if(!this._injector.get(uy).done){let E="";throw new _(405,E)}let c;s?c=t:c=this._injector.get(Rc).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=yA(c)?void 0:this._injector.get(Vo),u=r||c.selector,f=c.create(o,[],u,l),p=f.location.nativeElement,h=f.injector.get(cy,null);return h?.registerApplication(p),f.onDestroy(()=>{this.detachView(f.hostView),Cc(this.components,f),h?.unregisterApplication(p)}),this._loadComponent(f),Q(11,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Q(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Gd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new _(101,!1);let t=$(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,$(t),this.afterTick.next(),Q(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(jo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<jk;)Q(14),this.synchronizeOnce(),Q(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!r&&!gc(o))continue;let i=r&&!this.zonelessEnabled?0:1;xw(o,i),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>gc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Cc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(t),this._injector.get(jr,[]).forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Cc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new _(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Cc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Vk(){let n,e;return{promise:new Promise((r,o)=>{n=r,e=o}),resolve:n,reject:e}}function vA(n,e,t){let r=e[Bt],o=e[O];if(n.loadingState!==_t.NOT_STARTED)return n.loadingPromise??Promise.resolve();let i=Es(e,t),s=xk(o,n);n.loadingState=_t.IN_PROGRESS,vd(1,i);let a=n.dependencyResolverFn,c=r.get(yc).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(l=>{let u=!1,f=[],p=[];for(let h of l)if(h.status==="fulfilled"){let E=h.value,I=Wn(E)||Xu(E);if(I)f.push(I);else{let w=bg(E);w&&p.push(w)}}else{u=!0;break}if(u){if(n.loadingState=_t.FAILED,n.errorTmplIndex===null){let E=new _(-750,!1);ty(e,E)}}else{n.loadingState=_t.COMPLETE;let h=s.tView;if(f.length>0){h.directiveRegistry=XT(h.directiveRegistry,f);let E=f.map(w=>w.type),I=ed(!1,...E);n.providers=I}p.length>0&&(h.pipeRegistry=XT(h.pipeRegistry,p))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,c()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=_t.COMPLETE,c()}),n.loadingPromise)}function $k(n,e){return e[Bt].get(pA,null,{optional:!0})?.behavior!==ay.Manual}function zk(n,e,t){let r=e[O],o=e[t.index];if(!$k(n,e))return;let i=Es(e,t),s=kc(r,t);switch(Nk(i),s.loadingState){case _t.NOT_STARTED:Ho(De.Loading,t,o),vA(s,e,t),s.loadingState===_t.IN_PROGRESS&&tI(s,t,o);break;case _t.IN_PROGRESS:Ho(De.Loading,t,o),tI(s,t,o);break;case _t.COMPLETE:Ho(De.Complete,t,o);break;case _t.FAILED:Ho(De.Error,t,o);break;default:}}async function CA(n,e,t){let r=n.get(Bd);if(r.hydrating.has(e))return;let{parentBlockPromise:i,hydrationQueue:s}=uM(e,n);if(s.length===0)return;i!==null&&s.shift(),Kk(r,s),i!==null&&await i;let a=s[0];r.has(a)?await nI(n,s,t):r.awaitParentBlock(a,async()=>await nI(n,s,t))}async function nI(n,e,t){let r=n.get(Bd),o=r.hydrating,i=n.get(Cn),s=i.add();for(let c=0;c<e.length;c++){let l=e[c],u=r.get(l);if(u!=null){if(await Yk(u),await Wk(n),Gk(u)){FN(u),rI(e.slice(c),r);break}o.get(l).resolve()}else{qk(c,e,r),rI(e.slice(c),r);break}}let a=e[e.length-1];await o.get(a)?.promise,i.remove(s),t&&t(e),UN(r.get(a),e,r,n.get(Rt))}function Gk(n){return Es(n.lView,n.tNode)[Nc]===De.Error}function qk(n,e,t){let r=n-1,o=r>-1?t.get(e[r]):null;o&&Zd(o.lContainer)}function rI(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function Kk(n,e){for(let t of e)n.hydrating.set(t,Vk())}function Wk(n){return new Promise(e=>Wm(e,{injector:n}))}async function Yk(n){let{tNode:e,lView:t}=n,r=Es(t,e);return new Promise(o=>{Qk(r,o),zk(2,t,e)})}function Qk(n,e){Array.isArray(n[fs])||(n[fs]=[]),n[fs].push(e)}var Q$=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function rf(n,e,t){let r=ye(),o=Gg();if(eA(r,o,e)){let i=Lr(),s=TT();eN(s,r,n,e,r[se],t)}return rf}function oI(n,e,t,r,o){ny(e,n,t,o?"class":"style",r)}function er(n,e,t,r){let o=ye(),i=o[O],s=n+le,a=i.firstCreatePass?Zw(s,o,2,e,Dw,Fg(),t,r):i.data[s];if(_w(a,o,n,e,dy),pc(a)){let c=o[O];Xm(c,o,a),sw(c,a,o)}return r!=null&&ey(o,a),er}function wn(){let n=Lr(),e=Dt(),t=bw(e);return n.firstCreatePass&&Xw(n,t),Hg(t)&&Bg(),Lg(),t.classesWithoutHost!=null&&NR(t)&&oI(n,t,ye(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&kR(t)&&oI(n,t,ye(),t.stylesWithoutHost,!1),wn}function Is(n,e,t,r){return er(n,e,t,r),wn(),Is}function tr(n,e,t,r){let o=ye(),i=o[O],s=n+le,a=i.firstCreatePass?XN(s,i,2,e,t,r):i.data[s];return _w(a,o,n,e,dy),r!=null&&ey(o,a),tr}function nr(){let n=Dt(),e=bw(n);return Hg(e)&&Bg(),Lg(),nr}var dy=(n,e,t,r,o)=>(Jn(!0),Bm(e[se],r,Yg()));function Jk(n,e,t,r,o){let i=!$d(e,t);if(Jn(i),i)return Bm(e[se],r,Yg());let s=e[It],a=Qd(s,n,e,t);return nw(s,o)&&Vd(s,o,a.nextSibling),s&&(wI(t)||AI(a))&&Qn(t)&&(lT(t),hw(a)),a}function EA(){dy=Jk}var Zk=(n,e,t,r,o)=>(Jn(!0),dw(e[se],""));function Xk(n,e,t,r,o){let i,s=!$d(e,t);if(Jn(s),s)return dw(e[se],"");let a=e[It],c=Qd(a,n,e,t),l=cM(a,o);return Vd(a,o,c),i=Jd(l,c),i}function TA(){Zk=Xk}function fy(){return ye()}var Oc="en-US";var eO=Oc;function IA(n){typeof n=="string"&&(eO=n.toLowerCase().replace(/_/g,"-"))}function of(n,e,t){let r=ye(),o=Lr(),i=Dt();return tO(o,r,r[se],i,n,e,t),of}function sf(n,e,t){let r=ye(),o=Lr(),i=Dt();return(i.type&3||t)&&tA(i,o,r,t,r[se],n,e,yd(i,r,e)),sf}function tO(n,e,t,r,o,i,s){let a=!0,c=null;if((r.type&3||s)&&(c??=yd(r,e,i),tA(r,n,e,s,t,o,i,c)&&(a=!1)),a){let l=r.outputs?.[o],u=r.hostDirectiveOutputs?.[o];if(u&&u.length)for(let f=0;f<u.length;f+=2){let p=u[f],h=u[f+1];c??=yd(r,e,i),KT(r,e,p,h,o,c)}if(l&&l.length)for(let f of l)c??=yd(r,e,i),KT(r,e,f,o,o,c)}}function af(n=1){return ET(n)}function hy(n){let e=fT();return tT(e,le+n)}function Ze(n,e=""){let t=ye(),r=Lr(),o=n+le,i=r.firstCreatePass?Yd(r,o,1,e,null):r.data[o],s=wA(r,t,i,e,n);t[o]=s,ud()&&Jm(r,t,s,i),cs(i,!1)}var wA=(n,e,t,r,o)=>(Jn(!0),uw(e[se],r));function nO(n,e,t,r,o){let i=!$d(e,t);if(Jn(i),i)return uw(e[se],r);let s=e[It];return Qd(s,n,e,t)}function AA(){wA=nO}function rO(n,e,t,r=""){return eA(n,Gg(),t)?e+Tg(t)+r:ms}function cf(n,e,t){let r=ye(),o=rO(r,n,e,t);return o!==ms&&oO(r,ld(),o),cf}function oO(n,e,t){let r=eT(e,n);DM(n[se],r,t)}function py(n,e){return Vw(n,e)}var kd=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},gy=(()=>{class n{compileModuleSync(t){return new Nd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),o=_g(t),i=cw(o.declarations).reduce((s,a)=>{let c=Wn(a);return c&&s.push(new gs(c)),s},[]);return new kd(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var SA=(()=>{class n{applicationErrorHandler=C(Vt);appRef=C(Rt);taskService=C(Cn);ngZone=C(Ye);zonelessEnabled=C(mc);tracing=C(Xn,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Fe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(rc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(C(nm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Zg:Jg;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(rc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Zg(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DA(){return[{provide:Pr,useExisting:SA},{provide:Ye,useClass:oc},{provide:mc,useValue:!0}]}function iO(){return typeof $localize<"u"&&$localize.locale||Oc}var lf=new D("",{factory:()=>C(lf,{optional:!0,skipSelf:!0})||iO()});function Pc(n,e){return Iu(n,e?.equal)}var Ey={JSACTION:"__jsaction",OWNER:"__owner"},MA={};function sO(n){return n[Ey.JSACTION]}function _A(n,e){n[Ey.JSACTION]=e}function aO(n){return MA[n]}function cO(n,e){MA[n]=e}var k={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},lO=[k.MOUSEENTER,k.MOUSELEAVE,"pointerenter","pointerleave"],n2=[k.CLICK,k.DBLCLICK,k.FOCUSIN,k.FOCUSOUT,k.KEYDOWN,k.KEYUP,k.KEYPRESS,k.MOUSEOVER,k.MOUSEOUT,k.SUBMIT,k.TOUCHSTART,k.TOUCHEND,k.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],uO=[k.FOCUS,k.BLUR,k.ERROR,k.LOAD,k.TOGGLE],Ty=n=>uO.indexOf(n)>=0;function dO(n){return n===k.MOUSEENTER?k.MOUSEOVER:n===k.MOUSELEAVE?k.MOUSEOUT:n===k.POINTERENTER?k.POINTEROVER:n===k.POINTERLEAVE?k.POINTEROUT:n}function fO(n,e,t,r){let o=!1;Ty(e)&&(o=!0);let i=typeof r=="boolean"?{capture:o,passive:r}:o;return n.addEventListener(e,t,i),{eventType:e,handler:t,capture:o,passive:r}}function hO(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function pO(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var bA=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function gO(n){return n.which===2||n.which==null&&n.button===4}function mO(n){return bA&&n.metaKey||!bA&&n.ctrlKey||gO(n)||n.shiftKey}function yO(n,e,t){let r=n.relatedTarget;return(n.type===k.MOUSEOVER&&e===k.MOUSEENTER||n.type===k.MOUSEOUT&&e===k.MOUSELEAVE||n.type===k.POINTEROVER&&e===k.POINTERENTER||n.type===k.POINTEROUT&&e===k.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function vO(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let o=r,i=n[o];typeof i!="function"&&(t[o]=i)}return n.type===k.MOUSEOVER?t.type=k.MOUSEENTER:n.type===k.MOUSEOUT?t.type=k.MOUSELEAVE:n.type===k.POINTEROVER?t.type=k.POINTERENTER:t.type=k.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var CO=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),hf=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){CO&&(this.element.style.cursor="pointer"),this.handlerInfos.push(fO(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)hO(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},EO={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function Vr(n){return n.eventType}function Iy(n,e){n.eventType=e}function df(n){return n.event}function NA(n,e){n.event=e}function kA(n){return n.targetElement}function OA(n,e){n.targetElement=e}function PA(n){return n.eic}function TO(n,e){n.eic=e}function IO(n){return n.timeStamp}function wO(n,e){n.timeStamp=e}function ff(n){return n.eia}function xA(n,e,t){n.eia=[e,t]}function my(n){n.eia=void 0}function uf(n){return n[1]}function AO(n){return n.eirp}function LA(n,e){n.eirp=e}function FA(n){return n.eir}function UA(n,e){n.eir=e}function HA(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function SO(n,e,t,r,o,i,s,a){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:o,eia:i,eirp:s,eiack:a}}var yy=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return Vr(this.eventInfo)}setEventType(e){Iy(this.eventInfo,e)}getEvent(){return df(this.eventInfo)}setEvent(e){NA(this.eventInfo,e)}getTargetElement(){return kA(this.eventInfo)}setTargetElement(e){OA(this.eventInfo,e)}getContainer(){return PA(this.eventInfo)}setContainer(e){TO(this.eventInfo,e)}getTimestamp(){return IO(this.eventInfo)}setTimestamp(e){wO(this.eventInfo,e)}getAction(){let e=ff(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){my(this.eventInfo);return}xA(this.eventInfo,e.name,e.element)}getIsReplay(){return AO(this.eventInfo)}setIsReplay(e){LA(this.eventInfo,e)}getResolved(){return FA(this.eventInfo)}setResolved(e){UA(this.eventInfo,e)}clone(){return new n(HA(this.eventInfo))}},DO={},_O=/\s*;\s*/,bO=k.CLICK,vy=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&Vr(e)===k.CLICK&&mO(df(e))?Iy(e,k.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){FA(e)||(this.populateAction(e,kA(e)),UA(e,!0))}resolveParentAction(e){let t=ff(e),r=t&&uf(t);my(e);let o=r&&this.getParentNode(r);o&&this.populateAction(e,o)}populateAction(e,t){let r=t;for(;r&&r!==PA(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!ff(e));)r=this.getParentNode(r);let o=ff(e);if(o&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(Vr(e)===k.MOUSEENTER||Vr(e)===k.MOUSELEAVE||Vr(e)===k.POINTERENTER||Vr(e)===k.POINTERLEAVE)))if(yO(df(e),Vr(e),uf(o))){let i=vO(df(e),uf(o));NA(e,i),OA(e,uf(o))}else my(e)}getParentNode(e){let t=e[Ey.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),o=r[Vr(t)];o!==void 0&&xA(t,o,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=sO(e);if(!t){let r=e.getAttribute(fd.JSACTION);if(!r)t=DO,_A(e,t);else{if(t=aO(r),!t){t={};let o=r.split(_O);for(let i=0;i<o.length;i++){let s=o[i];if(!s)continue;let a=s.indexOf(EO.EVENT_ACTION_SEPARATOR),c=a!==-1,l=c?s.substr(0,a).trim():bO,u=c?s.substr(a+1).trim():s;t[l]=u}cO(r,t)}_A(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},BA=(function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n})(BA||{}),Cy=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new yy(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&RO(r.element,t)&&pO(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function RO(n,e){return n.tagName==="A"&&(e.getEventType()===k.CLICK||e.getEventType()===k.CLICKMOD)}var jA=Symbol.for("propagationStopped"),wy={REPLAY:101};var MO="`preventDefault` called during event replay.";var NO="`composedPath` called during event replay.",pf=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new vy({clickModSupport:t}),this.dispatcher=new Cy(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&PO(e),kO(e);e.getAction();){if(xO(e),Ty(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),OO(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function kO(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[jA]=!0,t()};zo(e,"stopPropagation",r),zo(e,"stopImmediatePropagation",r)}function OO(n){return!!n.getEvent()[jA]}function PO(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);zo(e,"target",t),zo(e,"eventPhase",wy.REPLAY),zo(e,"preventDefault",()=>{throw r(),new Error(MO+"")}),zo(e,"composedPath",()=>{throw new Error(NO+"")})}function xO(n){let e=n.getEvent(),t=n.getAction()?.element;t&&zo(e,"currentTarget",t,{configurable:!0})}function zo(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function VA(n,e){n.ecrd(t=>{e.dispatch(t)},BA.I_AM_THE_JSACTION_FRAMEWORK)}function LO(n){return n?.q??[]}function FO(n){n&&(RA(n.c,n.et,n.h),RA(n.c,n.etc,n.h,!0))}function RA(n,e,t,r){for(let o=0;o<e.length;o++)n.removeEventListener(e[o],t,r)}var UO=!1,$A=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=UO;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,o){let i=SO(t,r,r.target,o,Date.now());this.handleEventInfo(i)}handleEventInfo(t){if(!this.dispatcher){LA(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,o){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&lO.indexOf(t)>=0)return;let i=(a,c,l)=>{this.handleEvent(a,c,l)};this.eventHandlers[t]=i;let s=dO(r||t);if(s!==t){let a=this.browserEventTypeToExtraEventTypes[s]||[];a.push(t),this.browserEventTypeToExtraEventTypes[s]=a}this.containerManager.addEventListener(s,a=>c=>{i(t,c,a)},o)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),FO(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let o=t[r],i=this.getEventTypesForBrowserEventType(o.eventType);for(let s=0;s<i.length;s++){let a=HA(o);Iy(a,i[s]),this.handleEventInfo(a)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let o=0;o<this.queuedEventInfos.length;o++)this.handleEventInfo(this.queuedEventInfos[o]);this.queuedEventInfos=null}}}return n})();function zA(n,e=window){return LO(e._ejsas?.[n])}function Ay(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var QA=Symbol("InputSignalNode#UNSET"),yP=A(g({},wu),{transformFn:void 0,applyValueToInputSignal(n,e){Ka(n,e)}});function JA(n,e){let t=Object.create(yP);t.value=n,t.transformFn=e?.transform;function r(){if(za(t),t.value===QA){let o=null;throw new _(-950,o)}return t.value}return r[at]=t,r}function GA(n,e){return JA(n,e)}function vP(n){return JA(QA,n)}var ZA=(GA.required=vP,GA);var Sy=new D(""),CP=new D("");function xc(n){return!n.moduleRef}function EP(n){let e=xc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ye);return t.run(()=>{xc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Vt),o;if(t.runOutsideAngular(()=>{o=t.onError.subscribe({next:r})}),xc(n)){let i=()=>e.destroy(),s=n.platformInjector.get(Sy);s.add(i),e.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Sy);s.add(i),n.moduleRef.onDestroy(()=>{Cc(n.allPlatformModules,n.moduleRef),o.unsubscribe(),s.delete(i)})}return IP(r,t,()=>{let i=e.get(Cn),s=i.add(),a=e.get(uy);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(lf,Oc);if(IA(c||Oc),!e.get(CP,!0))return xc(n)?e.get(Rt):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(xc(n)){let u=e.get(Rt);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return TP?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void i.remove(s))})})}var TP;function IP(n,e,t){try{let r=t();return Ts(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var mf=null;function wP(n=[],e){return Tt.create({name:e,providers:[{provide:ac,useValue:"platform"},{provide:Sy,useValue:new Set([()=>mf=null])},...n]})}function AP(n=[]){if(mf)return mf;let e=wP(n);return mf=e,mA(),SP(e),e}function SP(n){let e=n.get(Fd,null);He(n,()=>{e?.forEach(t=>t())})}var Dy=(()=>{class n{static __NG_ELEMENT_ID__=DP}return n})();function DP(n){return _P(Dt(),ye(),(n&16)===16)}function _P(n,e,t){if(Qn(n)&&!t){let r=Xt(n.index,e);return new Ur(r,r)}else if(n.type&175){let r=e[ft];return new Ur(r,e)}return null}function XA(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:o}=n;Q(8);try{let i=o?.injector??AP(r),s=[DA(),ST,...t||[]],a=new wc({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return EP({r3Injector:a.injector,platformInjector:i,rootComponent:e})}catch(i){return Promise.reject(i)}finally{Q(9)}}var gf=new WeakSet,qA="",yf=[];function KA(n){return n.get(Pm,BI)}function eS(){let n=[{provide:Pm,useFactory:()=>{let e=!0;{let t=C(In);e=!!window._ejsas?.[t]}return e&&Br("NgEventReplay"),e}}];return n.push({provide:yn,useValue:()=>{let e=C(Rt),{injector:t}=e;if(!gf.has(e)){let r=C(xm);if(KA(t)){WI();let o=t.get(In),i=qI(o,(s,a,c)=>{s.nodeType===Node.ELEMENT_NODE&&(VI(s,a,c),$I(s,r))});e.onDestroy(i)}}},multi:!0},{provide:jr,useFactory:()=>{let e=C(Rt),{injector:t}=e;return()=>{if(!KA(t)||gf.has(e))return;gf.add(e);let r=t.get(In);e.onDestroy(()=>{gf.delete(e),Ay(r)}),e.whenStable().then(()=>{if(e.destroyed)return;let o=t.get(GI);bP(o,t);let i=t.get(xm);i.get(qA)?.forEach(zI),i.delete(qA);let s=o.instance;tw(t)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),n}var bP=(n,e)=>{let t=e.get(In),r=window._ejsas[t],o=n.instance=new $A(new hf(r.c));for(let a of r.et)o.addEvent(a);for(let a of r.etc)o.addEvent(a);let i=zA(t);o.replayEarlyEventInfos(i),Ay(t);let s=new pf(a=>{RP(e,a,a.currentTarget)});VA(o,s)};function RP(n,e,t){let r=(t&&t.getAttribute(bc))??"";/d\d+/.test(r)?MP(r,n,e,t):e.eventPhase===wy.REPLAY&&Lm(e,t)}function MP(n,e,t,r){yf.push({event:t,currentTarget:r}),CA(e,n,NP)}function NP(n){let e=[...yf],t=new Set(n);yf=[];for(let{event:r,currentTarget:o}of e){let i=o.getAttribute(bc);t.has(i)?Lm(r,o):yf.push({event:r,currentTarget:o})}}var WA=!1;function kP(){WA||(WA=!0,ZI(),EA(),AA(),TA(),fA(),aA(),qw(),Sw())}function OP(n){return n.whenStable()}function tS(){let n=[{provide:_c,useFactory:()=>{let e=!0;return e=!!C($o,{optional:!0})?.get(Fm,null),e&&Br("NgHydration"),e}},{provide:yn,useValue:()=>{$w(!1),C(_c)&&(ow(Sc()),kP())},multi:!0}];return n.push({provide:Om,useFactory:()=>C(_c)},{provide:jr,useFactory:()=>{if(C(_c)){let e=C(Rt);return()=>{OP(e).then(()=>{e.destroyed||iy(e)})}}return()=>{}},multi:!0}),Ft(n)}var oS=null;function rr(){return oS}function _y(n){oS??=n}var Lc=class{},by=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:()=>C(iS),providedIn:"platform"})}return n})();var iS=(()=>{class n extends by{_location;_history;_doc=C(xe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return rr().getBaseHref(this._doc)}onPopState(t){let r=rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=rr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function sS(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function nS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function $r(n){return n&&n[0]!=="?"?`?${n}`:n}var Cf=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:()=>C(cS),providedIn:"root"})}return n})(),aS=new D(""),cS=(()=>{class n extends Cf{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??C(xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return sS(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+$r(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+$r(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+$r(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(N(by),N(aS,8))};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ws=(()=>{class n{_subject=new Ve;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=LP(nS(rS(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$r(r))}normalize(t){return n.stripTrailingSlash(xP(this._basePath,rS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$r(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$r(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=$r;static joinWithSlash=sS;static stripTrailingSlash=nS;static \u0275fac=function(r){return new(r||n)(N(Cf))};static \u0275prov=b({token:n,factory:()=>PP(),providedIn:"root"})}return n})();function PP(){return new ws(N(Cf))}function xP(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function rS(n){return n.replace(/\/index.html$/,"")}function LP(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Ry=(()=>{class n{_viewContainer;_context=new Ef;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lS(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lS(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(bt(ys),bt(Wd))};static \u0275dir=Mc({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Ef=class{$implicit=null;ngIf=null};function lS(n,e){if(n&&!n.createEmbeddedView)throw new _(2020,!1)}var zr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Cs({type:n});static \u0275inj=bo({})}return n})();function Fc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[o,i]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var Go=class{};var uS="browser";var Uc=class{_doc;constructor(e){this._doc=e}manager},Tf=(()=>{class n extends Uc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o,i){return t.addEventListener(r,o,i),()=>this.removeEventListener(t,r,o,i)}removeEventListener(t,r,o,i){return t.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||n)(N(xe))};static \u0275prov=b({token:n,factory:n.\u0275fac})}return n})(),Af=new D(""),Oy=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let o=t.filter(s=>!(s instanceof Tf));this._plugins=o.slice().reverse();let i=t.find(s=>s instanceof Tf);i&&this._plugins.push(i)}addEventListener(t,r,o,i){return this._findPluginFor(r).addEventListener(t,r,o,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(i=>i.supports(t)),!r)throw new _(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(N(Af),N(Ye))};static \u0275prov=b({token:n,factory:n.\u0275fac})}return n})(),My="ng-app-id";function dS(n){for(let e of n)e.remove()}function fS(n,e){let t=e.createElement("style");return t.textContent=n,t}function HP(n,e,t,r){let o=n.head?.querySelectorAll(`style[${My}="${e}"],link[${My}="${e}"]`);if(o)for(let i of o)i.removeAttribute(My),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&t.set(i.textContent,{usage:0,elements:[i]})}function ky(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Py=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,o,i={}){this.doc=t,this.appId=r,this.nonce=o,HP(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let o of t)this.addUsage(o,this.inline,fS);r?.forEach(o=>this.addUsage(o,this.external,ky))}removeStyles(t,r){for(let o of t)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(t,r,o){let i=r.get(t);i?i.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(t,this.doc)))})}removeUsage(t,r){let o=r.get(t);o&&(o.usage--,o.usage<=0&&(dS(o.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])dS(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(t,fS(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(t,ky(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(N(xe),N(In),N(Ud,8),N(Dc))};static \u0275prov=b({token:n,factory:n.\u0275fac})}return n})(),Ny={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},xy=/%COMP%/g;var pS="%COMP%",BP=`_nghost-${pS}`,jP=`_ngcontent-${pS}`,VP=!0,$P=new D("",{factory:()=>VP});function zP(n){return jP.replace(xy,n)}function GP(n){return BP.replace(xy,n)}function gS(n,e){return e.map(t=>t.replace(xy,n))}var Ly=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,o,i,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Hc(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let o=this.getOrCreateRenderer(t,r);return o instanceof wf?o.applyToHost(t):o instanceof Bc&&o.applyStyles(),o}getOrCreateRenderer(t,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,f=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case nn.Emulated:i=new wf(c,l,r,this.appId,u,s,a,f,p);break;case nn.ShadowDom:return new If(c,t,r,s,a,this.nonce,f,p,l);case nn.ExperimentalIsolatedShadowDom:return new If(c,t,r,s,a,this.nonce,f,p);default:i=new Bc(c,l,r,u,s,a,f,p);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(N(Oy),N(Py),N(In),N($P),N(xe),N(Ye),N(Ud),N(Xn,8))};static \u0275prov=b({token:n,factory:n.\u0275fac})}return n})(),Hc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,o,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Ny[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(hS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(hS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new _(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;let i=Ny[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let o=Ny[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(Hr.DashCase|Hr.Important)?e.style.setProperty(t,r,o&Hr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Hr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,o){if(typeof e=="string"&&(e=rr().getGlobalEventTarget(this.doc,e),!e))throw new _(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(e,t,i)),this.eventManager.addEventListener(e,t,i,o)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function hS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var If=class extends Hc{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,o,i,s,a,c,l){super(e,o,i,a,c),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=gS(r.id,u);for(let p of u){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=p,this.shadowRoot.appendChild(h)}let f=r.getExternalStyles?.();if(f)for(let p of f){let h=ky(p,o);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Bc=class extends Hc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,o,i,s,a,c,l){super(e,i,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=l?gS(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ps.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},wf=class extends Bc{contentAttr;hostAttr;constructor(e,t,r,o,i,s,a,c,l){let u=o+"-"+r.id;super(e,t,r,i,s,a,c,l,u),this.contentAttr=zP(u),this.hostAttr=GP(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Sf=class n extends Lc{supportsDOMEvents=!0;static makeCurrent(){_y(new n)}onAndCancel(e,t,r,o){return e.addEventListener(t,r,o),()=>{e.removeEventListener(t,r,o)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=qP();return t==null?null:KP(t)}resetBaseElement(){jc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Fc(document.cookie,e)}},jc=null;function qP(){return jc=jc||document.head.querySelector("base"),jc?jc.getAttribute("href"):null}function KP(n){return new URL(n,document.baseURI).pathname}var WP=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:n.\u0275fac})}return n})(),mS=["alt","control","meta","shift"],YP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},QP={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},yS=(()=>{class n extends Uc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,o,i){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rr().onAndCancel(t,s.domEventName,a,i))}static parseEventName(t){let r=t.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),mS.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let o=YP[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),mS.forEach(s=>{if(s!==o){let a=QP[s];a(t)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{n.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(N(xe))};static \u0275prov=b({token:n,factory:n.\u0275fac})}return n})();function Fy(n,e,t){let r=g({rootComponent:n,platformRef:t?.platformRef},JP(e));return XA(r)}function JP(n){return{appProviders:[...nx,...n?.providers??[]],platformProviders:tx}}function ZP(){Sf.makeCurrent()}function XP(){return new mn}function ex(){return Mm(document),document}var tx=[{provide:Dc,useValue:uS},{provide:Fd,useValue:ZP,multi:!0},{provide:xe,useFactory:ex}];var nx=[{provide:ac,useValue:"root"},{provide:mn,useFactory:XP},{provide:Af,useClass:Tf,multi:!0},{provide:Af,useClass:yS,multi:!0},Ly,Py,Oy,{provide:jo,useExisting:Ly},{provide:Go,useClass:WP},[]];var ir=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let o=t.slice(0,r),i=t.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let o=(e.op==="a"?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":let i=e.value;if(!i)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(i=>i.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var _f=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},bf=class{encodeKey(e){return vS(e)}encodeValue(e){return vS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function rx(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var ox=/%(\d[a-f0-9])/gi,ix={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function vS(n){return encodeURIComponent(n).replace(ox,(e,t)=>ix[t]??e)}function Df(n){return`${n}`}var or=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new bf,e.fromString){if(e.fromObject)throw new _(2805,!1);this.map=rx(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],o=Array.isArray(r)?r.map(Df):[Df(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let o=e[r];Array.isArray(o)?o.forEach(i=>{t.push({param:r,value:i,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Df(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],o=r.indexOf(Df(e.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function sx(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function CS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function ES(n){return typeof Blob<"u"&&n instanceof Blob}function TS(n){return typeof FormData<"u"&&n instanceof FormData}function ax(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var IS="Content-Type",wS="Accept",AS="text/plain",SS="application/json",cx=`${SS}, ${AS}, */*`,As=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,o){this.url=t,this.method=e.toUpperCase();let i;if(sx(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i){if(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),i.priority&&(this.priority=i.priority),i.cache&&(this.cache=i.cache),i.credentials&&(this.credentials=i.credentials),typeof i.timeout=="number"){if(i.timeout<1||!Number.isInteger(i.timeout))throw new _(2822,"");this.timeout=i.timeout}i.mode&&(this.mode=i.mode),i.redirect&&(this.redirect=i.redirect),i.integrity&&(this.integrity=i.integrity),i.referrer&&(this.referrer=i.referrer),i.referrerPolicy&&(this.referrerPolicy=i.referrerPolicy),this.transferCache=i.transferCache}if(this.headers??=new ir,this.context??=new _f,!this.params)this.params=new or,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||CS(this.body)||ES(this.body)||TS(this.body)||ax(this.body)?this.body:this.body instanceof or?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||TS(this.body)?null:ES(this.body)?this.body.type||null:CS(this.body)?null:typeof this.body=="string"?AS:this.body instanceof or?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?SS:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,u=e.credentials||this.credentials,f=e.referrer||this.referrer,p=e.integrity||this.integrity,h=e.referrerPolicy||this.referrerPolicy,E=e.transferCache??this.transferCache,I=e.timeout??this.timeout,w=e.body!==void 0?e.body:this.body,S=e.withCredentials??this.withCredentials,G=e.reportProgress??this.reportProgress,ie=e.headers||this.headers,Z=e.params||this.params,Ge=e.context??this.context;return e.setHeaders!==void 0&&(ie=Object.keys(e.setHeaders).reduce(($n,Co)=>$n.set(Co,e.setHeaders[Co]),ie)),e.setParams&&(Z=Object.keys(e.setParams).reduce(($n,Co)=>$n.set(Co,e.setParams[Co]),Z)),new n(t,r,w,{params:Z,headers:ie,context:Ge,reportProgress:G,responseType:o,withCredentials:S,transferCache:E,keepalive:i,cache:a,priority:s,timeout:I,mode:c,redirect:l,credentials:u,referrer:f,integrity:p,referrerPolicy:h})}},qo=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(qo||{}),Ds=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,t=200,r="OK"){this.headers=e.headers||new ir,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},Rf=class n extends Ds{constructor(e={}){super(e)}type=qo.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_s=class n extends Ds{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=qo.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},Ss=class extends Ds{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},lx=200,ux=204;var dx=new D("");var fx=/^\)\]\}',?\n/;var Hy=(()=>{class n{xhrFactory;tracingService=C(Xn,{optional:!0});constructor(t){this.xhrFactory=t}maybePropagateTrace(t){return this.tracingService?.propagate?this.tracingService.propagate(t):t}handle(t){if(t.method==="JSONP")throw new _(-2800,!1);let r=this.xhrFactory;return z(null).pipe(ut(()=>new Y(i=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((w,S)=>s.setRequestHeader(w,S.join(","))),t.headers.has(wS)||s.setRequestHeader(wS,cx),!t.headers.has(IS)){let w=t.detectContentTypeHeader();w!==null&&s.setRequestHeader(IS,w)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let w=t.responseType.toLowerCase();s.responseType=w!=="json"?w:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let w=s.statusText||"OK",S=new ir(s.getAllResponseHeaders()),G=s.responseURL||t.url;return c=new Rf({headers:S,status:s.status,statusText:w,url:G}),c},u=this.maybePropagateTrace(()=>{let{headers:w,status:S,statusText:G,url:ie}=l(),Z=null;S!==ux&&(Z=typeof s.response>"u"?s.responseText:s.response),S===0&&(S=Z?lx:0);let Ge=S>=200&&S<300;if(t.responseType==="json"&&typeof Z=="string"){let $n=Z;Z=Z.replace(fx,"");try{Z=Z!==""?JSON.parse(Z):null}catch(Co){Z=$n,Ge&&(Ge=!1,Z={error:Co,text:Z})}}Ge?(i.next(new _s({body:Z,headers:w,status:S,statusText:G,url:ie||void 0})),i.complete()):i.error(new Ss({error:Z,headers:w,status:S,statusText:G,url:ie||void 0}))}),f=this.maybePropagateTrace(w=>{let{url:S}=l(),G=new Ss({error:w,status:s.status||0,statusText:s.statusText||"Unknown Error",url:S||void 0});i.error(G)}),p=f;t.timeout&&(p=this.maybePropagateTrace(w=>{let{url:S}=l(),G=new Ss({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:S||void 0});i.error(G)}));let h=!1,E=this.maybePropagateTrace(w=>{h||(i.next(l()),h=!0);let S={type:qo.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(S.total=w.total),t.responseType==="text"&&s.responseText&&(S.partialText=s.responseText),i.next(S)}),I=this.maybePropagateTrace(w=>{let S={type:qo.UploadProgress,loaded:w.loaded};w.lengthComputable&&(S.total=w.total),i.next(S)});return s.addEventListener("load",u),s.addEventListener("error",f),s.addEventListener("timeout",p),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",E),a!==null&&s.upload&&s.upload.addEventListener("progress",I)),s.send(a),i.next({type:qo.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",u),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",E),a!==null&&s.upload&&s.upload.removeEventListener("progress",I)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(N(Go))};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hx(n,e){return e(n)}function px(n,e,t){return(r,o)=>He(t,()=>e(r,i=>n(i,o)))}var By=new D(""),DS=new D("",{factory:()=>[]}),jy=new D(""),_S=new D("",{providedIn:"root",factory:()=>!0});var Vy=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:function(r){let o=null;return r?o=new(r||n):o=N(Hy),o},providedIn:"root"})}return n})();var Mf=(()=>{class n{backend;injector;chain=null;pendingTasks=C(yc);contributeToStability=C(_S);constructor(t,r){this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(DS),...this.injector.get(jy,[])]));this.chain=r.reduceRight((o,i)=>px(o,i,this.injector),hx)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(Za(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(N(Vy),N(Ae))};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$y=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:function(r){let o=null;return r?o=new(r||n):o=N(Mf),o},providedIn:"root"})}return n})();function Uy(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer,referrerPolicy:n.referrerPolicy}}var bS=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,o={}){let i;if(t instanceof As)i=t;else{let c;o.headers instanceof ir?c=o.headers:c=new ir(o.headers);let l;o.params&&(o.params instanceof or?l=o.params:l=new or({fromObject:o.params})),i=new As(t,r,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache,keepalive:o.keepalive,priority:o.priority,cache:o.cache,mode:o.mode,redirect:o.redirect,credentials:o.credentials,referrer:o.referrer,referrerPolicy:o.referrerPolicy,integrity:o.integrity,timeout:o.timeout})}let s=z(i).pipe(ts(c=>this.handler.handle(c)));if(t instanceof As||o.observe==="events")return s;let a=s.pipe(Lt(c=>c instanceof _s));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(te(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new _(2806,!1);return c.body}));case"blob":return a.pipe(te(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new _(2807,!1);return c.body}));case"text":return a.pipe(te(c=>{if(c.body!==null&&typeof c.body!="string")throw new _(2808,!1);return c.body}));case"json":default:return a.pipe(te(c=>c.body))}case"response":return a;default:throw new _(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new or().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,Uy(o,r))}post(t,r,o={}){return this.request("POST",t,Uy(o,r))}put(t,r,o={}){return this.request("PUT",t,Uy(o,r))}static \u0275fac=function(r){return new(r||n)(N($y))};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var gx=new D("",{factory:()=>!0}),mx="XSRF-TOKEN",yx=new D("",{providedIn:"root",factory:()=>mx}),vx="X-XSRF-TOKEN",Cx=new D("",{providedIn:"root",factory:()=>vx}),Ex=(()=>{class n{cookieName=C(yx);doc=C(xe);lastCookieString="";lastToken=null;parseCount=0;getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:function(r){let o=null;return r?o=new(r||n):o=N(Ex),o},providedIn:"root"})}return n})();function Tx(n,e){let t=n.url.toLowerCase();if(!C(gx)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=C(RS).getToken(),o=C(Cx);return r!=null&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}function zy(...n){let e=[bS,Mf,{provide:$y,useExisting:Mf},{provide:Vy,useFactory:()=>C(dx,{optional:!0})??C(Hy)},{provide:DS,useValue:Tx,multi:!0}];for(let t of n)e.push(...t.\u0275providers);return Ft(e)}var Ix=new D(""),wx="b",Ax="h",Sx="s",Dx="st",_x="u",bx="rt",Gy=new D(""),Rx=["GET","HEAD"];function Mx(n,e){let h=C(Gy),{isCacheActive:t}=h,r=Kt(h,["isCacheActive"]),{transferCache:o,method:i}=n;if(!t||o===!1||i==="POST"&&!r.includePostRequests&&!o||i!=="POST"&&!Rx.includes(i)||!r.includeRequestsWithAuthHeaders&&Nx(n)||r.filter?.(n)===!1)return e(n);let s=C($o);if(C(Ix,{optional:!0}))throw new _(2803,!1);let c=n.url,l=kx(n,c),u=s.get(l,null),f=r.includeHeaders;if(typeof o=="object"&&o.includeHeaders&&(f=o.includeHeaders),u){let{[wx]:E,[bx]:I,[Ax]:w,[Sx]:S,[Dx]:G,[_x]:ie}=u,Z=E;switch(I){case"arraybuffer":Z=new TextEncoder().encode(E).buffer;break;case"blob":Z=new Blob([E]);break}let Ge=new ir(w);return z(new _s({body:Z,headers:Ge,status:S,statusText:G,url:ie}))}return e(n)}function Nx(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function MS(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function kx(n,e){let{params:t,method:r,responseType:o}=n,i=MS(t),s=n.serializeBody();s instanceof URLSearchParams?s=MS(s):typeof s!="string"&&(s="");let a=[r,o,e,s,i].join("|"),c=Ox(a);return c}function Ox(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function NS(n){return[{provide:Gy,useFactory:()=>(Br("NgHttpTransferCache"),g({isCacheActive:!0},n))},{provide:jy,useValue:Mx,multi:!0},{provide:jr,multi:!0,useFactory:()=>{let e=C(Rt),t=C(Gy);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var kS=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(N(xe))};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Nf=(function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n})(Nf||{});function Px(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function OS(){return Px(Nf.EventReplay,eS())}function PS(...n){let e=[],t=new Set;for(let{\u0275providers:o,\u0275kind:i}of n)t.add(i),o.length&&e.push(o);let r=t.has(Nf.HttpTransferCacheOptions);return Ft([[],tS(),t.has(Nf.NoHttpTransferCache)||r?[]:NS({}),e])}var U="primary",el=Symbol("RouteTitle"),Qy=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Qo(n){return new Qy(n)}function $S(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Ff(n){return new Promise((e,t)=>{n.pipe(Gn()).subscribe({next:r=>e(r),error:r=>t(r)})})}function Lx(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!An(n[t],e[t]))return!1;return!0}function An(n,e){let t=n?Jy(n):void 0,r=e?Jy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!zS(n[o],e[o]))return!1;return!0}function Jy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function zS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}else return n===e}function GS(n){return n.length>0?n[n.length-1]:null}function Zo(n){return ju(n)?n:Ts(n)?we(Promise.resolve(n)):z(n)}function qS(n){return ju(n)?Ff(n):Promise.resolve(n)}var Fx={exact:WS,subset:YS},KS={exact:Ux,subset:Hx,ignored:()=>!0};function xS(n,e,t){return Fx[t.paths](n.root,e.root,t.matrixParams)&&KS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Ux(n,e){return An(n,e)}function WS(n,e,t){if(!Wo(n.segments,e.segments)||!Pf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!WS(n.children[r],e.children[r],t))return!1;return!0}function Hx(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zS(n[t],e[t]))}function YS(n,e,t){return QS(n,e,e.segments,t)}function QS(n,e,t,r){if(n.segments.length>t.length){let o=n.segments.slice(0,t.length);return!(!Wo(o,t)||e.hasChildren()||!Pf(o,t,r))}else if(n.segments.length===t.length){if(!Wo(n.segments,t)||!Pf(n.segments,t,r))return!1;for(let o in e.children)if(!n.children[o]||!YS(n.children[o],e.children[o],r))return!1;return!0}else{let o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!Wo(n.segments,o)||!Pf(n.segments,o,r)||!n.children[U]?!1:QS(n.children[U],e,i,r)}}function Pf(n,e,t){return e.every((r,o)=>KS[t](n[o].parameters,r.parameters))}var sn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new J([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){return Vx.serialize(this)}},J=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xf(this)}},Gr=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Qo(this.parameters),this._parameterMap}toString(){return ZS(this)}};function Bx(n,e){return Wo(n,e)&&n.every((t,r)=>An(t.parameters,e[r].parameters))}function Wo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function jx(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===U&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==U&&(t=t.concat(e(o,r)))}),t}var tl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:()=>new qr,providedIn:"root"})}return n})(),qr=class{parse(e){let t=new Xy(e);return new sn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Vc(e.root,!0)}`,r=Gx(e.queryParams),o=typeof e.fragment=="string"?`#${$x(e.fragment)}`:"";return`${t}${r}${o}`}},Vx=new qr;function xf(n){return n.segments.map(e=>ZS(e)).join("/")}function Vc(n,e){if(!n.hasChildren())return xf(n);if(e){let t=n.children[U]?Vc(n.children[U],!1):"",r=[];return Object.entries(n.children).forEach(([o,i])=>{o!==U&&r.push(`${o}:${Vc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=jx(n,(r,o)=>o===U?[Vc(n.children[U],!1)]:[`${o}:${Vc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[U]!=null?`${xf(n)}/${t[0]}`:`${xf(n)}/(${t.join("//")})`}}function JS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kf(n){return JS(n).replace(/%3B/gi,";")}function $x(n){return encodeURI(n)}function Zy(n){return JS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lf(n){return decodeURIComponent(n)}function LS(n){return Lf(n.replace(/\+/g,"%20"))}function ZS(n){return`${Zy(n.path)}${zx(n.parameters)}`}function zx(n){return Object.entries(n).map(([e,t])=>`;${Zy(e)}=${Zy(t)}`).join("")}function Gx(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(o=>`${kf(t)}=${kf(o)}`).join("&"):`${kf(t)}=${kf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var qx=/^[^\/()?;#]+/;function qy(n){let e=n.match(qx);return e?e[0]:""}var Kx=/^[^\/()?;=#]+/;function Wx(n){let e=n.match(Kx);return e?e[0]:""}var Yx=/^[^=?&#]+/;function Qx(n){let e=n.match(Yx);return e?e[0]:""}var Jx=/^[^&#]+/;function Zx(n){let e=n.match(Jx);return e?e[0]:""}var Xy=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new J([],{}):new J([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[U]=new J(e,t)),r}parseSegment(){let e=qy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new _(4009,!1);return this.capture(e),new Gr(Lf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Wx(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=qy(this.remaining);o&&(r=o,this.capture(r))}e[Lf(t)]=Lf(r)}parseQueryParam(e){let t=Qx(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Zx(this.remaining);s&&(r=s,this.capture(r))}let o=LS(t),i=LS(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=qy(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new _(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=U);let s=this.parseChildren();t[i??U]=Object.keys(s).length===1&&s[U]?s[U]:new J([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new _(4011,!1)}};function XS(n){return n.segments.length>0?new J([],{[U]:n}):n}function eD(n){let e={};for(let[r,o]of Object.entries(n.children)){let i=eD(o);if(r===U&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let t=new J(n.segments,e);return Xx(t)}function Xx(n){if(n.numberOfChildren===1&&n.children[U]){let e=n.children[U];return new J(n.segments.concat(e.segments),e.children)}return n}function Ns(n){return n instanceof sn}function tD(n,e,t=null,r=null,o=new qr){let i=nD(n);return rD(i,e,t,r,o)}function nD(n){let e;function t(i){let s={};for(let c of i.children){let l=t(c);s[c.outlet]=l}let a=new J(i.url,s);return i===n&&(e=a),a}let r=t(n.root),o=XS(r);return e??o}function rD(n,e,t,r,o){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Ky(i,i,i,t,r,o);let s=e0(e);if(s.toRoot())return Ky(i,i,new J([],{}),t,r,o);let a=t0(s,i,n),c=a.processChildren?zc(a.segmentGroup,a.index,s.commands):iD(a.segmentGroup,a.index,s.commands);return Ky(i,a.segmentGroup,c,t,r,o)}function Uf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Kc(n){return typeof n=="object"&&n!=null&&n.outlets}function FS(n,e,t){n||="\u0275";let r=new sn;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function Ky(n,e,t,r,o,i){let s={};for(let[l,u]of Object.entries(r??{}))s[l]=Array.isArray(u)?u.map(f=>FS(l,f,i)):FS(l,u,i);let a;n===e?a=t:a=oD(n,e,t);let c=XS(eD(a));return new sn(c,s,o)}function oD(n,e,t){let r={};return Object.entries(n.children).forEach(([o,i])=>{i===e?r[o]=t:r[o]=oD(i,e,t)}),new J(n.segments,r)}var Hf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Uf(r[0]))throw new _(4003,!1);let o=r.find(Kc);if(o&&o!==GS(r))throw new _(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function e0(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Hf(!0,0,n);let e=0,t=!1,r=n.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new Hf(t,e,r)}var Rs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function t0(n,e,t){if(n.isAbsolute)return new Rs(e,!0,0);if(!t)return new Rs(e,!1,NaN);if(t.parent===null)return new Rs(t,!0,0);let r=Uf(n.commands[0])?0:1,o=t.segments.length-1+r;return n0(t,o,n.numberOfDoubleDots)}function n0(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new _(4005,!1);o=r.segments.length}return new Rs(r,!1,o-i)}function r0(n){return Kc(n[0])?n[0].outlets:{[U]:n}}function iD(n,e,t){if(n??=new J([],{}),n.segments.length===0&&n.hasChildren())return zc(n,e,t);let r=o0(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let i=new J(n.segments.slice(0,r.pathIndex),{});return i.children[U]=new J(n.segments.slice(r.pathIndex),n.children),zc(i,0,o)}else return r.match&&o.length===0?new J(n.segments,{}):r.match&&!n.hasChildren()?ev(n,e,t):r.match?zc(n,0,o):ev(n,e,t)}function zc(n,e,t){if(t.length===0)return new J(n.segments,{});{let r=r0(t),o={};if(Object.keys(r).some(i=>i!==U)&&n.children[U]&&n.numberOfChildren===1&&n.children[U].segments.length===0){let i=zc(n.children[U],e,t);return new J(n.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=iD(n.children[i],e,s))}),Object.entries(n.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new J(n.segments,o)}}function o0(n,e,t){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;let s=n.segments[o],a=t[r];if(Kc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(o>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!HS(c,l,s))return i;r+=2}else{if(!HS(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function ev(n,e,t){let r=n.segments.slice(0,e),o=0;for(;o<t.length;){let i=t[o];if(Kc(i)){let c=i0(i.outlets);return new J(r,c)}if(o===0&&Uf(t[0])){let c=n.segments[e];r.push(new Gr(c.path,US(t[0]))),o++;continue}let s=Kc(i)?i.outlets[U]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&Uf(a)?(r.push(new Gr(s,US(a))),o+=2):(r.push(new Gr(s,{})),o++)}return new J(r,{})}function i0(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=ev(new J([],{}),0,r))}),e}function US(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function HS(n,e,t){return n==t.path&&An(e,t.parameters)}var Gc="imperative",Le=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Le||{}),Nt=class{id;url;constructor(e,t){this.id=e,this.url=t}},Jo=class extends Nt{type=Le.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sr=class extends Nt{urlAfterRedirects;type=Le.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xe=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Xe||{}),Wc=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Wc||{}),Sn=class extends Nt{reason;code;type=Le.NavigationCancel;constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ar=class extends Nt{reason;code;type=Le.NavigationSkipped;constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o}},ks=class extends Nt{error;target;type=Le.NavigationError;constructor(e,t,r,o){super(e,t),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yc=class extends Nt{urlAfterRedirects;state;type=Le.RoutesRecognized;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bf=class extends Nt{urlAfterRedirects;state;type=Le.GuardsCheckStart;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jf=class extends Nt{urlAfterRedirects;state;shouldActivate;type=Le.GuardsCheckEnd;constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vf=class extends Nt{urlAfterRedirects;state;type=Le.ResolveStart;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$f=class extends Nt{urlAfterRedirects;state;type=Le.ResolveEnd;constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zf=class{route;type=Le.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Gf=class{route;type=Le.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qf=class{snapshot;type=Le.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kf=class{snapshot;type=Le.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wf=class{snapshot;type=Le.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yf=class{snapshot;type=Le.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Qc=class{},Os=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function s0(n){return!(n instanceof Qc)&&!(n instanceof Os)}function a0(n,e){return n.providers&&!n._injector&&(n._injector=vs(n.providers,e,`Route: ${n.path}`)),n._injector??e}function on(n){return n.outlet||U}function c0(n,e){let t=n.filter(r=>on(r)===e);return t.push(...n.filter(r=>on(r)!==e)),t}function Ls(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Qf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ls(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Fs(this.rootInjector)}},Fs=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Qf(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(N(Ae))};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=tv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=tv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=nv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return nv(e,this._root).map(t=>t.value)}};function tv(n,e){if(n===e.value)return e;for(let t of e.children){let r=tv(n,t);if(r)return r}return null}function nv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=nv(n,t);if(r.length)return r.unshift(e),r}return[]}var Mt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function bs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Jc=class extends Jf{snapshot;constructor(e,t){super(e),this.snapshot=t,cv(this,e)}toString(){return this.snapshot.toString()}};function sD(n){let e=l0(n),t=new Ue([new Gr("",{})]),r=new Ue({}),o=new Ue({}),i=new Ue({}),s=new Ue(""),a=new Kr(t,r,i,s,o,U,n,e.root);return a.snapshot=e.root,new Jc(new Mt(a,[]),e)}function l0(n){let e={},t={},r={},i=new Yo([],e,r,"",t,U,n,null,{});return new Zc("",new Mt(i,[]))}var Kr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(te(l=>l[el]))??z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>Qo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>Qo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Zf(n,e,t="emptyOnly"){let r,{routeConfig:o}=n;return e!==null&&(t==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:g(g({},e.params),n.params),data:g(g({},e.data),n.data),resolve:g(g(g(g({},n.data),e.data),o?.data),n._resolvedData)}:r={params:g({},n.params),data:g({},n.data),resolve:g(g({},n.data),n._resolvedData??{})},o&&cD(o)&&(r.resolve[el]=o.title),r}var Yo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[el]}constructor(e,t,r,o,i,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Zc=class extends Jf{url;constructor(e,t){super(t),this.url=e,cv(this,t)}toString(){return aD(this._root)}};function cv(n,e){e.value._routerState=n,e.children.forEach(t=>cv(n,t))}function aD(n){let e=n.children.length>0?` { ${n.children.map(aD).join(", ")} } `:"";return`${n.value}${e}`}function Wy(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,An(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),An(e.params,t.params)||n.paramsSubject.next(t.params),Lx(e.url,t.url)||n.urlSubject.next(t.url),An(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function rv(n,e){let t=An(n.params,e.params)&&Bx(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||rv(n.parent,e.parent))}function cD(n){return typeof n.title=="string"||n.title===null}var lD=new D(""),nl=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=U;activateEvents=new We;deactivateEvents=new We;attachEvents=new We;detachEvents=new We;routerOutletData=ZA();parentContexts=C(Fs);location=C(ys);changeDetector=C(Dy);inputBinder=C(nh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new _(4013,!1);this._activatedRoute=t;let o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new ov(t,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Mc({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Od]})}return n})(),ov=class{route;childContexts;parent;outletData;constructor(e,t,r,o){this.route=e,this.childContexts=t,this.parent=r,this.outletData=o}get(e,t){return e===Kr?this.route:e===Fs?this.childContexts:e===lD?this.outletData:this.parent.get(e,t)}},nh=new D("");var lv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=rn({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&Is(0,"router-outlet")},dependencies:[nl],encapsulation:2})}return n})();function uv(n){let e=n.children&&n.children.map(uv),t=e?A(g({},n),{children:e}):g({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==U&&(t.component=lv),t}function u0(n,e,t){let r=Xc(n,e._root,t?t._root:void 0);return new Jc(r,e)}function Xc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let o=d0(n,e,t);return new Mt(r,o)}else{if(n.shouldAttach(e.value)){let i=n.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Xc(n,a)),s}}let r=f0(e.value),o=e.children.map(i=>Xc(n,i));return new Mt(r,o)}}function d0(n,e,t){return e.children.map(r=>{for(let o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Xc(n,r,o);return Xc(n,r)})}function f0(n){return new Kr(new Ue(n.url),new Ue(n.params),new Ue(n.queryParams),new Ue(n.fragment),new Ue(n.data),n.outlet,n.component,n)}var Ps=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},uD="ngNavigationCancelingError";function Xf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ns(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=dD(!1,Xe.Redirect);return o.url=t,o.navigationBehaviorOptions=r,o}function dD(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[uD]=!0,t.cancellationCode=e,t}function h0(n){return fD(n)&&Ns(n.url)}function fD(n){return!!n&&n[uD]}var p0=(n,e,t,r)=>te(o=>(new iv(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)),iv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,o,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Wy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let o=bs(t);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=bs(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=bs(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let o=bs(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new Yf(i.value.snapshot))}),e.children.length&&this.forwardEvent(new Kf(e.value.snapshot))}activateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(Wy(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Wy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},eh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ms=class{component;route;constructor(e,t){this.component=e,this.route=t}};function g0(n,e,t){let r=n._root,o=e?e._root:null;return $c(r,o,t,[r.value])}function m0(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Us(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!gg(n)?n:e.get(n):r}function $c(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=bs(e);return n.children.forEach(s=>{y0(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>qc(a,t.getContext(s),o)),o}function y0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let c=v0(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new eh(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?$c(n,e,a?a.children:null,r,o):$c(n,e,t,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Ms(a.outlet.component,s))}else s&&qc(e,a,o),o.canActivateChecks.push(new eh(r)),i.component?$c(n,null,a?a.children:null,r,o):$c(n,null,t,r,o);return o}function v0(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Wo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wo(n.url,e.url)||!An(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rv(n,e)||!An(n.queryParams,e.queryParams);case"paramsChange":default:return!rv(n,e)}}function qc(n,e,t){let r=bs(n),o=n.value;Object.entries(r).forEach(([i,s])=>{o.component?e?qc(s,e.children.getContext(i),t):qc(s,null,t):qc(s,e,t)}),o.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ms(e.outlet.component,o)):t.canDeactivateChecks.push(new Ms(null,o)):t.canDeactivateChecks.push(new Ms(null,o))}function rl(n){return typeof n=="function"}function C0(n){return typeof n=="boolean"}function E0(n){return n&&rl(n.canLoad)}function T0(n){return n&&rl(n.canActivate)}function I0(n){return n&&rl(n.canActivateChild)}function w0(n){return n&&rl(n.canDeactivate)}function A0(n){return n&&rl(n.canMatch)}function hD(n){return n instanceof wo||n?.name==="EmptyError"}var Of=Symbol("INITIAL_VALUE");function xs(){return ut(n=>Yp(n.map(e=>e.pipe(zn(1),Jp(Of)))).pipe(te(e=>{for(let t of e)if(t!==!0){if(t===Of)return Of;if(t===!1||S0(t))return t}return!0}),Lt(e=>e!==Of),zn(1)))}function S0(n){return Ns(n)||n instanceof Ps}function pD(n){return n.aborted?z(void 0).pipe(zn(1)):new Y(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function gD(n){return Xa(pD(n))}function D0(n,e){return qe(t=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return s.length===0&&i.length===0?z(A(g({},t),{guardsResult:!0})):_0(s,r,o,n).pipe(qe(a=>a&&C0(a)?b0(r,i,n,e):z(a)),te(a=>A(g({},t),{guardsResult:a})))})}function _0(n,e,t,r){return we(n).pipe(qe(o=>O0(o.component,o.route,t,e,r)),Gn(o=>o!==!0,!0))}function b0(n,e,t,r){return we(e).pipe(ts(o=>es(M0(o.route.parent,r),R0(o.route,r),k0(n,o.path,t),N0(n,o.route,t))),Gn(o=>o!==!0,!0))}function R0(n,e){return n!==null&&e&&e(new Wf(n)),z(!0)}function M0(n,e){return n!==null&&e&&e(new qf(n)),z(!0)}function N0(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return z(!0);let o=r.map(i=>Qa(()=>{let s=Ls(e)??t,a=Us(i,s),c=T0(a)?a.canActivate(e,n):He(s,()=>a(e,n));return Zo(c).pipe(Gn())}));return z(o).pipe(xs())}function k0(n,e,t){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>m0(s)).filter(s=>s!==null).map(s=>Qa(()=>{let a=s.guards.map(c=>{let l=Ls(s.node)??t,u=Us(c,l),f=I0(u)?u.canActivateChild(r,n):He(l,()=>u(r,n));return Zo(f).pipe(Gn())});return z(a).pipe(xs())}));return z(i).pipe(xs())}function O0(n,e,t,r,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return z(!0);let s=i.map(a=>{let c=Ls(e)??o,l=Us(a,c),u=w0(l)?l.canDeactivate(n,e,t,r):He(c,()=>l(n,e,t,r));return Zo(u).pipe(Gn())});return z(s).pipe(xs())}function P0(n,e,t,r,o){let i=e.canLoad;if(i===void 0||i.length===0)return z(!0);let s=i.map(a=>{let c=Us(a,n),l=E0(c)?c.canLoad(e,t):He(n,()=>c(e,t)),u=Zo(l);return o?u.pipe(gD(o)):u});return z(s).pipe(xs(),mD(r))}function mD(n){return Gp(Ke(e=>{if(typeof e!="boolean")throw Xf(n,e)}),te(e=>e===!0))}function x0(n,e,t,r,o){let i=e.canMatch;if(!i||i.length===0)return z(!0);let s=i.map(a=>{let c=Us(a,n),l=A0(c)?c.canMatch(e,t):He(n,()=>c(e,t)),u=Zo(l);return o?u.pipe(gD(o)):u});return z(s).pipe(xs(),mD(r))}var Ko=class yD extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,yD.prototype)}},sv=class vD extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,vD.prototype)}};function L0(n){throw new _(4e3,!1)}function F0(n){throw dD(!1,Xe.GuardRejected)}var U0=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return r;if(o.numberOfChildren>1||!o.children[U])throw L0(`${e.redirectTo}`);o=o.children[U]}}async applyRedirectCommands(e,t,r,o,i){let s=await H0(t,o,i);if(s instanceof sn)throw new sv(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new sv(a);return a}applyRedirectCreateUrlTree(e,t,r,o){let i=this.createSegmentGroup(e,t.root,r,o);return new sn(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,o){let i=this.createSegments(e,t.segments,r,o),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new J(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path[0]===":"?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){let o=r[t.path.substring(1)];if(!o)throw new _(4001,!1);return o}findOrReturn(e,t){let r=0;for(let o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}};function H0(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,params:l,data:u,title:f}=e;return Ff(Zo(He(t,()=>r({params:l,data:u,queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,title:f}))))}var av={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function B0(n,e,t,r,o,i){let s=CD(n,e,t);return s.matched?(r=a0(e,r),x0(r,e,t,o,i).pipe(te(a=>a===!0?s:g({},av)))):z(s)}function CD(n,e,t){if(e.path==="**")return j0(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?g({},av):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let o=(e.matcher||$S)(t,n,e);if(!o)return g({},av);let i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let s=o.consumed.length>0?g(g({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function j0(n){return{matched:!0,parameters:n.length>0?GS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function BS(n,e,t,r){return t.length>0&&z0(n,t,r)?{segmentGroup:new J(e,$0(r,new J(t,n.children))),slicedSegments:[]}:t.length===0&&G0(n,t,r)?{segmentGroup:new J(n.segments,V0(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new J(n.segments,n.children),slicedSegments:t}}function V0(n,e,t,r){let o={};for(let i of t)if(rh(n,e,i)&&!r[on(i)]){let s=new J([],{});o[on(i)]=s}return g(g({},r),o)}function $0(n,e){let t={};t[U]=e;for(let r of n)if(r.path===""&&on(r)!==U){let o=new J([],{});t[on(r)]=o}return t}function z0(n,e,t){return t.some(r=>rh(n,e,r)&&on(r)!==U)}function G0(n,e,t){return t.some(r=>rh(n,e,r))}function rh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function q0(n,e,t){return e.length===0&&!n.children[t]}var K0=class{};async function W0(n,e,t,r,o,i,s="emptyOnly",a){return new Q0(n,e,t,r,o,s,i,a).recognize()}var Y0=31,Q0=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,o,i,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new U0(this.urlSerializer,this.urlTree)}noMatchError(e){return new _(4002,`'${e.segmentGroup}'`)}async recognize(){let e=BS(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),o=new Mt(r,t),i=new Zc("",o),s=tD(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}async match(e){let t=new Yo([],Object.freeze({}),Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),U,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,U,t),rootSnapshot:t}}catch(r){if(r instanceof sv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ko?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,o,i){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,i);let s=await this.processSegment(e,t,r,r.segments,o,!0,i);return s instanceof Mt?[s]:[]}async processChildren(e,t,r,o){let i=[];for(let c of Object.keys(r.children))c==="primary"?i.unshift(c):i.push(c);let s=[];for(let c of i){let l=r.children[c],u=c0(t,c),f=await this.processSegmentGroup(e,u,l,c,o);s.push(...f)}let a=ED(s);return J0(a),a}async processSegment(e,t,r,o,i,s,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,o,i,s,a)}catch(l){if(l instanceof Ko||hD(l))continue;throw l}if(q0(r,o,i))return new K0;throw new Ko(r)}async processSegmentAgainstRoute(e,t,r,o,i,s,a,c){if(on(r)!==s&&(s===U||!rh(o,i,r)))throw new Ko(o);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,o,r,i,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,i,s,c);throw new Ko(o)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:f,remainingSegments:p}=CD(t,o,i);if(!c)throw new Ko(t);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Y0&&(this.allowRedirects=!1));let h=new Yo(i,l,Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,jS(o),on(o),o.component??o._loadedComponent??null,o,VS(o)),E=Zf(h,a,this.paramsInheritanceStrategy);if(h.params=Object.freeze(E.params),h.data=Object.freeze(E.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let I=await this.applyRedirects.applyRedirectCommands(u,o.redirectTo,f,h,e),w=await this.applyRedirects.lineralizeSegments(o,I);return this.processSegment(e,r,t,w.concat(p),s,!1,a)}async matchSegmentAgainstRoute(e,t,r,o,i,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Ff(B0(t,r,o,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new Ko(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,o),l=r._loadedInjector??e,{parameters:u,consumedSegments:f,remainingSegments:p}=a,h=new Yo(f,u,Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,jS(r),on(r),r.component??r._loadedComponent??null,r,VS(r)),E=Zf(h,s,this.paramsInheritanceStrategy);h.params=Object.freeze(E.params),h.data=Object.freeze(E.data);let{segmentGroup:I,slicedSegments:w}=BS(t,f,p,c);if(w.length===0&&I.hasChildren()){let ie=await this.processChildren(l,c,I,h);return new Mt(h,ie)}if(c.length===0&&w.length===0)return new Mt(h,[]);let S=on(r)===i,G=await this.processSegment(l,c,I,w,S?U:i,!0,h);return new Mt(h,G instanceof Mt?[G]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Ff(P0(e,t,r,this.urlSerializer,this.abortSignal))){let i=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=i.routes,t._loadedInjector=i.injector,i}throw F0(t)}return{routes:[],injector:e}}};function J0(n){n.sort((e,t)=>e.value.outlet===U?-1:t.value.outlet===U?1:e.value.outlet.localeCompare(t.value.outlet))}function Z0(n){let e=n.value.routeConfig;return e&&e.path===""}function ED(n){let e=[],t=new Set;for(let r of n){if(!Z0(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),t.add(o)):e.push(r)}for(let r of t){let o=ED(r.children);e.push(new Mt(r.value,o))}return e.filter(r=>!t.has(r))}function jS(n){return n.data||{}}function VS(n){return n.resolve||{}}var X0=new D("",{factory:()=>W0});function eL(n,e,t,r,o,i,s){let a=n.get(X0);return qe(c=>z(c).pipe(ut(l=>a(n,e,t,r,l.extractedUrl,o,i,s)),te(({state:l,tree:u})=>A(g({},c),{targetSnapshot:l,urlAfterRedirects:u}))))}function tL(n,e){return qe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return z(t);let i=new Set(o.map(c=>c.route)),s=new Set;for(let c of i)if(!s.has(c))for(let l of TD(c))s.add(l);let a=0;return we(s).pipe(ts(c=>i.has(c)?nL(c,r,n,e):(c.data=Zf(c,c.parent,n).resolve,z(void 0))),Ke(()=>a++),Vu(1),qe(c=>a===s.size?z(t):ct))})}function TD(n){let e=n.children.map(t=>TD(t)).flat();return[n,...e]}function nL(n,e,t,r){let o=n.routeConfig,i=n._resolve;return o?.title!==void 0&&!cD(o)&&(i[el]=o.title),Qa(()=>(n.data=Zf(n,n.parent,t).resolve,rL(i,n,e,r).pipe(te(s=>(n._resolvedData=s,n.data=g(g({},n.data),s),null)))))}function rL(n,e,t,r){let o=Jy(n);if(o.length===0)return z({});let i={};return we(o).pipe(qe(s=>oL(n[s],e,t,r).pipe(Gn(),Ke(a=>{if(a instanceof Ps)throw Xf(new qr,a);i[s]=a}))),Vu(1),te(()=>i),Ja(s=>hD(s)?ct:Wp(s)))}function oL(n,e,t,r){let o=Ls(e)??r,i=Us(n,o),s=i.resolve?i.resolve(e,t):He(o,()=>i(e,t));return Zo(s)}function Yy(n){return ut(e=>{let t=n(e);return t?we(t).pipe(te(()=>e)):z(e)})}var dv=(()=>{class n{buildTitle(t){let r,o=t.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===U);return r}getResolvedTitleForRoute(t){return t.data[el]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:()=>C(ID),providedIn:"root"})}return n})(),ID=(()=>{class n extends dv{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(N(kS))};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ol=new D("",{factory:()=>({})}),il=new D(""),wD=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=C(gy);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=(async()=>{try{let i=await qS(He(t,()=>r.loadComponent())),s=await DD(SD(i));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=(async()=>{try{let i=await AD(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=i.routes,r._loadedInjector=i.injector,i}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function AD(n,e,t,r){let o=await qS(He(t,()=>n.loadChildren())),i=await DD(SD(o)),s;i instanceof ef||Array.isArray(i)?s=i:s=await e.compileModuleAsync(i),r&&r(n);let a,c,l=!1;return Array.isArray(s)?(c=s,l=!0):(a=s.create(t).injector,c=a.get(il,[],{optional:!0,self:!0}).flat()),{routes:c.map(uv),injector:a}}function iL(n){return n&&typeof n=="object"&&"default"in n}function SD(n){return iL(n)?n.default:n}async function DD(n){return n}var oh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:()=>C(sL),providedIn:"root"})}return n})(),sL=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_D=new D("");var aL=()=>{},bD=new D(""),RD=(()=>{class n{currentNavigation=en(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=en(null);events=new Ve;transitionAbortWithErrorSubject=new Ve;configLoader=C(wD);environmentInjector=C(Ae);destroyRef=C(Zn);urlSerializer=C(tl);rootContexts=C(Fs);location=C(ws);inputBindingEnabled=C(nh,{optional:!0})!==null;titleStrategy=C(dv);options=C(ol,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=C(oh);createViewTransition=C(_D,{optional:!0});navigationErrorHandler=C(bD,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>z(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=o=>this.events.next(new zf(o)),r=o=>this.events.next(new Gf(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;En(()=>{this.transitions?.next(A(g({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new Ue(null),this.transitions.pipe(Lt(r=>r!==null),ut(r=>{let o=!1,i=new AbortController;return z(r).pipe(ut(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Xe.SupersededByNewNavigation),ct;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?A(g({},a),{previousNavigation:null}):null,abort:()=>i.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new ar(s.id,this.urlSerializer.serialize(s.rawUrl),"",Wc.IgnoredSameUrlNavigation)),s.resolve(!1),ct;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return z(s).pipe(ut(u=>(this.events.next(new Jo(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?ct:Promise.resolve(u))),eL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,i.signal),Ke(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(p=>(p.finalUrl=u.urlAfterRedirects,p));let f=new Yc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:f,source:p,restoredState:h,extras:E}=s,I=new Jo(u,this.urlSerializer.serialize(f),p,h);this.events.next(I);let w=sD(this.rootComponentType).snapshot;return this.currentTransition=r=A(g({},s),{targetSnapshot:w,urlAfterRedirects:f,extras:A(g({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(S=>(S.finalUrl=f,S)),z(r)}else return this.events.next(new ar(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Wc.IgnoredByUrlHandlingStrategy)),s.resolve(!1),ct}),Ke(s=>{let a=new Bf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),te(s=>(this.currentTransition=r=A(g({},s),{guards:g0(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),D0(this.environmentInjector,s=>this.events.next(s)),Ke(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Xf(this.urlSerializer,s.guardsResult);let a=new jf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Lt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Xe.GuardRejected),!1)),Yy(s=>{if(s.guards.canActivateChecks.length!==0)return z(s).pipe(Ke(a=>{let c=new Vf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),ut(a=>{let c=!1;return z(a).pipe(tL(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Xe.NoDataFromResolver)}}))}),Ke(a=>{let c=new $f(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),Yy(s=>{let a=l=>{let u=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let f=Ls(l)??this.environmentInjector;u.push(this.configLoader.loadComponent(f,l.routeConfig).then(p=>{l.component=p}))}for(let f of l.children)u.push(...a(f));return u},c=a(s.targetSnapshot.root);return c.length===0?z(s):we(Promise.all(c).then(()=>s))}),Yy(()=>this.afterPreactivation()),ut(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?we(c).pipe(te(()=>r)):z(r)}),te(s=>{let a=u0(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=A(g({},s),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Ke(()=>{this.events.next(new Qc)}),p0(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),zn(1),Xa(pD(i.signal).pipe(Lt(()=>!o&&!r.targetRouterState),Ke(()=>{this.cancelNavigationTransition(r,i.signal.reason+"",Xe.Aborted)}))),Ke({next:s=>{o=!0,this.currentNavigation.update(a=>(a.abort=aL,a)),this.lastSuccessfulNavigation.set(En(this.currentNavigation)),this.events.next(new sr(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{o=!0}}),Xa(this.transitionAbortWithErrorSubject.pipe(Ke(s=>{throw s}))),Za(()=>{i.abort(),o||this.cancelNavigationTransition(r,"",Xe.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ja(s=>{if(this.destroyed)return r.resolve(!1),ct;if(o=!0,fD(s))this.events.next(new Sn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),h0(s)?this.events.next(new Os(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new ks(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=He(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Ps){let{message:l,cancellationCode:u}=Xf(this.urlSerializer,c);this.events.next(new Sn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new Os(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return ct}))}))}cancelNavigationTransition(t,r,o){let i=new Sn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=En(this.currentNavigation),o=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==o?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cL(n){return n!==Gc}var MD=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:()=>C(lL),providedIn:"root"})}return n})(),th=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},lL=(()=>{class n extends th{static \u0275fac=(()=>{let t;return function(o){return(t||(t=xd(n)))(o||n)}})();static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fv=(()=>{class n{urlSerializer=C(tl);options=C(ol,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=C(ws);urlHandlingStrategy=C(oh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new sn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:o}){let i=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=o??i;return s instanceof sn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:o}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=t):this.rawUrlTree=o}routerState=sD(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:()=>C(ND),providedIn:"root"})}return n})(),ND=(()=>{class n extends fv{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Jo?this.updateStateMemento():t instanceof ar?this.commitTransition(r):t instanceof Yc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Qc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Sn&&t.code!==Xe.SupersededByNewNavigation&&t.code!==Xe.Redirect?this.restoreHistory(r):t instanceof ks?this.restoreHistory(r,!0):t instanceof sr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||i){let a=this.browserPageId,c=g(g({},s),this.generateNgRouterState(o,a));this.location.replaceState(t,"",c)}else{let a=g(g({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===t.finalUrl&&i===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(o){return(t||(t=xd(n)))(o||n)}})();static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hv(n,e){n.events.pipe(Lt(t=>t instanceof sr||t instanceof Sn||t instanceof ks||t instanceof ar),te(t=>t instanceof sr||t instanceof ar?0:(t instanceof Sn?t.code===Xe.Redirect||t.code===Xe.SupersededByNewNavigation:!1)?2:1),Lt(t=>t!==2),zn(1)).subscribe(()=>{e()})}var uL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Dn=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=C(nf);stateManager=C(fv);options=C(ol,{optional:!0})||{};pendingTasks=C(Cn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=C(RD);urlSerializer=C(tl);location=C(ws);urlHandlingStrategy=C(oh);injector=C(Ae);_events=new Ve;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=C(MD);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=C(il,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!C(nh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Fe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=En(this.navigationTransitions.currentNavigation);if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof Sn&&r.code!==Xe.Redirect&&r.code!==Xe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sr)this.navigated=!0;else if(r instanceof Os){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c=g({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||cL(o.source)},s);this.scheduleNavigation(a,Gc,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}s0(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Gc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,o)=>{this.navigateToSyncWithBrowser(t,o,r)})}navigateToSyncWithBrowser(t,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let c=g({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,i).catch(c=>{this.disposed||this.injector.get(Vt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return En(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(uv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=g(g({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let f;try{let p=o?o.snapshot:this.routerState.snapshot.root;f=nD(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return rD(f,t,u,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let o=Ns(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,Gc,null,r)}navigate(t,r={skipLocationChange:!1}){return fL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Kn(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let o;if(r===!0?o=g({},uL):r===!1?o=g({},dL):o=r,Ns(t))return xS(this.currentUrlTree,t,o);let i=this.parseUrl(t);return xS(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.entries(t).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((f,p)=>{a=f,c=p});let u=this.pendingTasks.add();return hv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fL(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new _(4008,!1)}var pL=new D("");function pv(n,...e){return Ft([{provide:il,multi:!0,useValue:n},[],{provide:Kr,useFactory:gL},{provide:jr,multi:!0,useFactory:mL},e.map(t=>t.\u0275providers)])}function gL(){return C(Dn).routerState.root}function mL(){let n=C(Tt);return e=>{let t=n.get(Rt);if(e!==t.components[0])return;let r=n.get(Dn),o=n.get(yL);n.get(vL)===1&&r.initialNavigation(),n.get(CL,null,{optional:!0})?.setUpPreloading(),n.get(pL,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var yL=new D("",{factory:()=>new Ve}),vL=new D("",{factory:()=>1});var CL=new D("");var y={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},an={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},$t={GET:"GET",POST:"POST"},kt=[y.OPENID_SCOPE,y.PROFILE_SCOPE,y.OFFLINE_ACCESS_SCOPE],mv=[...kt,y.EMAIL_SCOPE],ve={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},ih={ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},cn={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Hs={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},fe={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"};var sl={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"},_n={QUERY:"query",FRAGMENT:"fragment"},yv={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},al={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Bs={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},cr={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Ce={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var cl="appmetadata",kD="client_info",Xo="1",js={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},et={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},Ne={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},j={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},lr={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},sh={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},ah={username:"username",password:"password"},ei={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},ch={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},bn={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},lh={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};var ll=300;var Wr={};Ct(Wr,{postRequestFailed:()=>dl,unexpectedError:()=>ul});var ul="unexpected_error",dl="post_request_failed";var uh={[ul]:"Unexpected error in authentication.",[dl]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},OD={unexpectedError:{code:ul,desc:uh[ul]},postRequestFailed:{code:dl,desc:uh[dl]}},P=class n extends Error{constructor(e,t,r){let o=t?`${e}: ${t}`:e;super(o),Object.setPrototypeOf(this,n.prototype),this.errorCode=e||y.EMPTY_STRING,this.errorMessage=t||y.EMPTY_STRING,this.subError=r||y.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function Vs(n,e){return new P(n,e?`${uh[n]} ${e}`:uh[n])}var ke={};Ct(ke,{authTimeNotFound:()=>ur,authorizationCodeMissingFromServerResponse:()=>gi,bindingKeyNotRemoved:()=>Il,cannotAppendScopeSet:()=>fi,cannotRemoveEmptyScope:()=>di,clientInfoDecodingError:()=>Yr,clientInfoEmptyError:()=>ti,deviceCodeExpired:()=>gl,deviceCodePollingCancelled:()=>pl,deviceCodeUnknownError:()=>ml,emptyInputScopeSet:()=>Zr,endSessionEndpointNotSupported:()=>mi,endpointResolutionError:()=>tt,hashNotDeserialized:()=>ii,invalidAssertion:()=>Cl,invalidCacheEnvironment:()=>fr,invalidCacheRecord:()=>hi,invalidClientCredential:()=>El,invalidState:()=>ln,keyIdMissing:()=>yi,maxAgeTranspired:()=>ci,methodNotImplemented:()=>H,missingTenantIdError:()=>Sl,multipleMatchingAccounts:()=>hl,multipleMatchingAppMetadata:()=>li,multipleMatchingTokens:()=>fl,nestedAppAuthBridgeDisabled:()=>Dl,networkError:()=>ri,noAccountFound:()=>yl,noAccountInSilentRequest:()=>dr,noCryptoObject:()=>Xr,noNetworkConnectivity:()=>wl,nonceMismatch:()=>ai,nullOrEmptyToken:()=>ni,openIdConfigError:()=>oi,platformBrokerError:()=>_l,requestCannotBeMade:()=>ui,stateMismatch:()=>si,stateNotFound:()=>Jr,tokenClaimsCnfRequiredForSignedJwt:()=>pi,tokenParsingError:()=>Qr,tokenRefreshRequired:()=>hr,unexpectedCredentialType:()=>vl,userCanceled:()=>Al,userTimeoutReached:()=>Tl});var Yr="client_info_decoding_error",ti="client_info_empty_error",Qr="token_parsing_error",ni="null_or_empty_token",tt="endpoints_resolution_error",ri="network_error",oi="openid_config_error",ii="hash_not_deserialized",ln="invalid_state",si="state_mismatch",Jr="state_not_found",ai="nonce_mismatch",ur="auth_time_not_found",ci="max_age_transpired",fl="multiple_matching_tokens",hl="multiple_matching_accounts",li="multiple_matching_appMetadata",ui="request_cannot_be_made",di="cannot_remove_empty_scope",fi="cannot_append_scopeset",Zr="empty_input_scopeset",pl="device_code_polling_cancelled",gl="device_code_expired",ml="device_code_unknown_error",dr="no_account_in_silent_request",hi="invalid_cache_record",fr="invalid_cache_environment",yl="no_account_found",Xr="no_crypto_object",vl="unexpected_credential_type",Cl="invalid_assertion",El="invalid_client_credential",hr="token_refresh_required",Tl="user_timeout_reached",pi="token_claims_cnf_required_for_signedjwt",gi="authorization_code_missing_from_server_response",Il="binding_key_not_removed",mi="end_session_endpoint_not_supported",yi="key_id_missing",wl="no_network_connectivity",Al="user_canceled",Sl="missing_tenant_id_error",H="method_not_implemented",Dl="nested_app_auth_bridge_disabled",_l="platform_broker_error";var x={[Yr]:"The client info could not be parsed/decoded correctly",[ti]:"The client info was empty",[Qr]:"Token cannot be parsed",[ni]:"The token is null or empty",[tt]:"Endpoints cannot be resolved",[ri]:"Network request failed",[oi]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[ii]:"The hash parameters could not be deserialized",[ln]:"State was not the expected format",[si]:"State mismatch error",[Jr]:"State not found",[ai]:"Nonce mismatch error",[ur]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[ci]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[fl]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[hl]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[li]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ui]:"Token request cannot be made without authorization code or refresh token.",[di]:"Cannot remove null or empty scope from ScopeSet",[fi]:"Cannot append ScopeSet",[Zr]:"Empty input ScopeSet cannot be processed",[pl]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[gl]:"Device code is expired.",[ml]:"Device code stopped polling for unknown reasons.",[dr]:"Please pass an account object, silent flow is not supported without account information",[hi]:"Cache record object was null or undefined.",[fr]:"Invalid environment when attempting to create cache entry",[yl]:"No account found in cache for given key.",[Xr]:"No crypto object detected.",[vl]:"Unexpected credential type.",[Cl]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[El]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[hr]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Tl]:"User defined timeout for device code polling reached",[pi]:"Cannot generate a POP jwt if the token_claims are not populated",[gi]:"Server response does not contain an authorization code to proceed",[Il]:"Could not remove the credential's binding key from storage.",[mi]:"The provided authority does not support logout",[yi]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[wl]:"No network connectivity. Check your internet connection.",[Al]:"User cancelled the flow.",[Sl]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[H]:"This method has not been implemented",[Dl]:"The nested app auth bridge is disabled",[_l]:"An error occurred in the native broker. See the platformBrokerError property for details."},PD={clientInfoDecodingError:{code:Yr,desc:x[Yr]},clientInfoEmptyError:{code:ti,desc:x[ti]},tokenParsingError:{code:Qr,desc:x[Qr]},nullOrEmptyToken:{code:ni,desc:x[ni]},endpointResolutionError:{code:tt,desc:x[tt]},networkError:{code:ri,desc:x[ri]},unableToGetOpenidConfigError:{code:oi,desc:x[oi]},hashNotDeserialized:{code:ii,desc:x[ii]},invalidStateError:{code:ln,desc:x[ln]},stateMismatchError:{code:si,desc:x[si]},stateNotFoundError:{code:Jr,desc:x[Jr]},nonceMismatchError:{code:ai,desc:x[ai]},authTimeNotFoundError:{code:ur,desc:x[ur]},maxAgeTranspired:{code:ci,desc:x[ci]},multipleMatchingTokens:{code:fl,desc:x[fl]},multipleMatchingAccounts:{code:hl,desc:x[hl]},multipleMatchingAppMetadata:{code:li,desc:x[li]},tokenRequestCannotBeMade:{code:ui,desc:x[ui]},removeEmptyScopeError:{code:di,desc:x[di]},appendScopeSetError:{code:fi,desc:x[fi]},emptyInputScopeSetError:{code:Zr,desc:x[Zr]},DeviceCodePollingCancelled:{code:pl,desc:x[pl]},DeviceCodeExpired:{code:gl,desc:x[gl]},DeviceCodeUnknownError:{code:ml,desc:x[ml]},NoAccountInSilentRequest:{code:dr,desc:x[dr]},invalidCacheRecord:{code:hi,desc:x[hi]},invalidCacheEnvironment:{code:fr,desc:x[fr]},noAccountFound:{code:yl,desc:x[yl]},noCryptoObj:{code:Xr,desc:x[Xr]},unexpectedCredentialType:{code:vl,desc:x[vl]},invalidAssertion:{code:Cl,desc:x[Cl]},invalidClientCredential:{code:El,desc:x[El]},tokenRefreshRequired:{code:hr,desc:x[hr]},userTimeoutReached:{code:Tl,desc:x[Tl]},tokenClaimsRequired:{code:pi,desc:x[pi]},noAuthorizationCodeFromServer:{code:gi,desc:x[gi]},bindingKeyNotRemovedError:{code:Il,desc:x[Il]},logoutNotSupported:{code:mi,desc:x[mi]},keyIdMissing:{code:yi,desc:x[yi]},noNetworkConnectivity:{code:wl,desc:x[wl]},userCanceledError:{code:Al,desc:x[Al]},missingTenantIdError:{code:Sl,desc:x[Sl]},nestedAppAuthBridgeDisabled:{code:Dl,desc:x[Dl]},platformBrokerError:{code:_l,desc:x[_l]}},bl=class n extends P{constructor(e,t){super(e,t?`${x[e]}: ${t}`:x[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,n.prototype)}};function v(n,e){return new bl(n,e)}var eo={createNewGuid:()=>{throw v(H)},base64Decode:()=>{throw v(H)},base64Encode:()=>{throw v(H)},base64UrlEncode:()=>{throw v(H)},encodeKid:()=>{throw v(H)},async getPublicKeyThumbprint(){throw v(H)},async removeTokenBindingKey(){throw v(H)},async clearKeystore(){throw v(H)},async signJwt(){throw v(H)},async hashString(){throw v(H)}};var re=(function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n})(re||{}),nt=class n{constructor(e,t,r){this.level=re.Info;let o=()=>{},i=e||n.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:re.Info,this.correlationId=i.correlationId||y.EMPTY_STRING,this.packageName=t||y.EMPTY_STRING,this.packageVersion=r||y.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:re.Info}}clone(e,t,r){return new n({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let i=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${re[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:re.Error,containsPii:!1,correlationId:t||y.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:re.Error,containsPii:!0,correlationId:t||y.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:re.Warning,containsPii:!1,correlationId:t||y.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:re.Warning,containsPii:!0,correlationId:t||y.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:re.Info,containsPii:!1,correlationId:t||y.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:re.Info,containsPii:!0,correlationId:t||y.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:re.Verbose,containsPii:!1,correlationId:t||y.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:re.Verbose,containsPii:!0,correlationId:t||y.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:re.Trace,containsPii:!1,correlationId:t||y.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:re.Trace,containsPii:!0,correlationId:t||y.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var dh="@azure/msal-common",$s="15.13.2";var to={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};var rt={};Ct(rt,{authorityMismatch:()=>Ll,authorityUriInsecure:()=>Ci,cannotAllowPlatformBroker:()=>xl,cannotSetOIDCOptions:()=>Pl,claimsRequestParsingError:()=>Rl,emptyInputScopesError:()=>Ti,invalidAuthenticationHeader:()=>Ol,invalidAuthorityMetadata:()=>Si,invalidAuthorizePostBodyParameters:()=>Ul,invalidClaims:()=>no,invalidCloudDiscoveryMetadata:()=>ro,invalidCodeChallengeMethod:()=>Ml,invalidRequestMethodForEAR:()=>Fl,logoutRequestEmpty:()=>wi,missingNonceAuthenticationHeader:()=>kl,missingSshJwk:()=>pr,missingSshKid:()=>Nl,pkceParamsMissing:()=>Ai,redirectUriEmpty:()=>vi,tokenRequestEmpty:()=>Ii,untrustedAuthority:()=>Di,urlEmptyError:()=>Ei,urlParseError:()=>Rn});var vi="redirect_uri_empty",Rl="claims_request_parsing_error",Ci="authority_uri_insecure",Rn="url_parse_error",Ei="empty_url_error",Ti="empty_input_scopes_error",no="invalid_claims",Ii="token_request_empty",wi="logout_request_empty",Ml="invalid_code_challenge_method",Ai="pkce_params_missing",ro="invalid_cloud_discovery_metadata",Si="invalid_authority_metadata",Di="untrusted_authority",pr="missing_ssh_jwk",Nl="missing_ssh_kid",kl="missing_nonce_authentication_header",Ol="invalid_authentication_header",Pl="cannot_set_OIDCOptions",xl="cannot_allow_platform_broker",Ll="authority_mismatch",Fl="invalid_request_method_for_EAR",Ul="invalid_authorize_post_body_parameters";var ue={[vi]:"A redirect URI is required for all calls, and none has been set.",[Rl]:"Could not parse the given claims request object.",[Ci]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Rn]:"URL could not be parsed into appropriate segments.",[Ei]:"URL was empty or null.",[Ti]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[no]:"Given claims parameter must be a stringified JSON object.",[Ii]:"Token request was empty and not found in cache.",[wi]:"The logout request was null or undefined.",[Ml]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Ai]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[ro]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Si]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Di]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[pr]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Nl]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[kl]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Ol]:"Invalid authentication header provided",[Pl]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[xl]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Ll]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[Ul]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[Fl]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."},xD={redirectUriNotSet:{code:vi,desc:ue[vi]},claimsRequestParsingError:{code:Rl,desc:ue[Rl]},authorityUriInsecure:{code:Ci,desc:ue[Ci]},urlParseError:{code:Rn,desc:ue[Rn]},urlEmptyError:{code:Ei,desc:ue[Ei]},emptyScopesError:{code:Ti,desc:ue[Ti]},invalidClaimsRequest:{code:no,desc:ue[no]},tokenRequestEmptyError:{code:Ii,desc:ue[Ii]},logoutRequestEmptyError:{code:wi,desc:ue[wi]},invalidCodeChallengeMethod:{code:Ml,desc:ue[Ml]},invalidCodeChallengeParams:{code:Ai,desc:ue[Ai]},invalidCloudDiscoveryMetadata:{code:ro,desc:ue[ro]},invalidAuthorityMetadata:{code:Si,desc:ue[Si]},untrustedAuthority:{code:Di,desc:ue[Di]},missingSshJwk:{code:pr,desc:ue[pr]},missingSshKid:{code:Nl,desc:ue[Nl]},missingNonceAuthenticationHeader:{code:kl,desc:ue[kl]},invalidAuthenticationHeader:{code:Ol,desc:ue[Ol]},cannotSetOIDCOptions:{code:Pl,desc:ue[Pl]},cannotAllowPlatformBroker:{code:xl,desc:ue[xl]},authorityMismatch:{code:Ll,desc:ue[Ll]},invalidAuthorizePostBodyParameters:{code:Ul,desc:ue[Ul]},invalidRequestMethodForEAR:{code:Fl,desc:ue[Fl]}},Hl=class n extends P{constructor(e){super(e,ue[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,n.prototype)}};function q(n){return new Hl(n)}var ae=class{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){let[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}};var he=class n{constructor(e){let t=e?ae.trimArrayEntries([...e]):[],r=t?ae.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw q(Ti);this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){let r=(e||y.EMPTY_STRING).split(" ");return new n(r)}static createSearchScopes(e){let t=e&&e.length>0?e:[...kt],r=new n(t);return r.containsOnlyOIDCScopes()?r.removeScope(y.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let t=this.printScopesLowerCase().split(" "),r=new n(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return mv.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw v(fi)}}removeScope(e){if(!e)throw v(di);this.scopes.delete(e.trim())}removeOIDCScopes(){mv.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw v(Zr);let t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw v(Zr);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):y.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function zs(n,e){if(!n)throw v(ti);try{let t=e(n);return JSON.parse(t)}catch{throw v(Yr)}}function Mn(n){if(!n)throw v(Yr);let e=n.split(cr.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?y.EMPTY_STRING:e[1]}}function vv(n,e){return!!n&&!!e&&n===e.split(".")[1]}function oo(n,e,t,r){if(r){let{oid:o,sub:i,tid:s,name:a,tfp:c,acr:l,preferred_username:u,upn:f,login_hint:p}=r,h=s||c||l||"";return{tenantId:h,localAccountId:o||i||"",name:a,username:u||f||"",loginHint:p,isHomeTenant:vv(h,n)}}else return{tenantId:t,localAccountId:e,username:"",isHomeTenant:vv(t,n)}}function _i(n,e,t,r){let o=n;if(e){let i=e,{isHomeTenant:a}=i,c=Kt(i,["isHomeTenant"]);o=g(g({},n),c)}if(t){let s=oo(n.homeAccountId,n.localAccountId,n.tenantId,t),{isHomeTenant:a}=s,c=Kt(s,["isHomeTenant"]);return o=A(g(g({},o),c),{idTokenClaims:t,idToken:r}),o}return o}var ot={Default:0,Adfs:1,Dsts:2,Ciam:3};function bi(n){return n&&(n.tid||n.tfp||n.acr)||null}var ce={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var oe=class n{static getAccountInfo(e){return{homeAccountId:e.homeAccountId,environment:e.environment,tenantId:e.realm,username:e.username,localAccountId:e.localAccountId,loginHint:e.loginHint,name:e.name,nativeAccountId:e.nativeAccountId,authorityType:e.authorityType,tenantProfiles:new Map((e.tenantProfiles||[]).map(t=>[t.tenantId,t])),dataBoundary:e.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,r){let o=new n;t.authorityType===ot.Adfs?o.authorityType=Bs.ADFS_ACCOUNT_TYPE:t.protocolMode===ce.OIDC?o.authorityType=Bs.GENERIC_ACCOUNT_TYPE:o.authorityType=Bs.MSSTS_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=zs(e.clientInfo,r),i.xms_tdbr&&(o.dataBoundary=i.xms_tdbr==="EU"?"EU":"None")),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;let s=e.environment||t&&t.getPreferredCache();if(!s)throw v(fr);o.environment=s,o.realm=i?.utid||bi(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,c=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||c||"",o.loginHint=e.idTokenClaims?.login_hint,o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{let l=oo(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[l]}return o}static createFromAccountInfo(e,t,r){let o=new n;return o.authorityType=e.authorityType||Bs.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.loginHint=e.loginHint,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o.dataBoundary=e.dataBoundary,o}static generateHomeAccountId(e,t,r,o,i){if(!(t===ot.Adfs||t===ot.Dsts)){if(e)try{let s=zs(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){let i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}};var Ee={};Ct(Ee,{checkMaxAge:()=>Bl,extractTokenClaims:()=>gr,getJWSPayload:()=>LD,isKmsi:()=>Cv});function gr(n,e){let t=LD(n);try{let r=e(t);return JSON.parse(r)}catch{throw v(Qr)}}function Cv(n){if(!n.signin_state)return!1;let e=["kmsi","dvc_dmjd"];return n.signin_state.some(r=>e.includes(r.trim().toLowerCase()))}function LD(n){if(!n)throw v(ni);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw v(Qr);return t[2]}function Bl(n,e){if(e===0||Date.now()-3e5>n+e)throw v(ci)}var kn={};Ct(kn,{getDeserializedResponse:()=>Ev,mapToQueryString:()=>Nn,normalizeUrlForComparison:()=>TL,stripLeadingHashOrQuery:()=>UD});function FD(n){if(!n)return n;let e=n.toLowerCase();return ae.endsWith(e,"?")?e=e.slice(0,-1):ae.endsWith(e,"?/")&&(e=e.slice(0,-2)),ae.endsWith(e,"/")||(e+="/"),e}function UD(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function Ev(n){if(!n||n.indexOf("=")<0)return null;try{let e=UD(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.ear_jwe||t.error||t.error_description||t.state)return t}catch{throw v(ii)}return null}function Nn(n,e=!0,t){let r=new Array;return n.forEach((o,i)=>{!e&&t&&i in t?r.push(`${i}=${o}`):r.push(`${i}=${encodeURIComponent(o)}`)}),r.join("&")}function TL(n){if(!n)return n;let e=n.split("#")[0];try{let t=new URL(e),r=t.origin+t.pathname+t.search;return FD(r)}catch{return FD(e)}}var V=class n{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw q(Ei);e.includes("#")||(this._urlString=n.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return ae.endsWith(t,"?")?t=t.slice(0,-1):ae.endsWith(t,"?/")&&(t=t.slice(0,-2)),ae.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw q(Rn)}if(!e.HostNameAndPort||!e.PathSegments)throw q(Rn);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw q(Ci)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return n.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===cn.COMMON||r[0]===cn.ORGANIZATIONS)&&(r[0]=e),n.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw q(Rn);let r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw q(Rn);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===y.FORWARD_SLASH){let o=new n(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new n(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Ev(e)}};var BD={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Tv=BD.endpointMetadata,Iv=BD.instanceDiscoveryMetadata,wv=new Set;Iv.metadata.forEach(n=>{n.aliases.forEach(e=>{wv.add(e)})});function jD(n,e){let t,r=n.canonicalAuthority;if(r){let o=new V(r).getUrlComponents().HostNameAndPort;t=HD(o,n.cloudDiscoveryMetadata?.metadata,et.CONFIG,e)||HD(o,Iv.metadata,et.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function HD(n,e,t,r){if(r?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){let o=jl(e,n);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function VD(n){return jl(Iv.metadata,n)}function jl(n,e){for(let t=0;t<n.length;t++){let r=n[t];if(r.aliases.includes(e))return r}return null}var $l={};Ct($l,{cacheErrorUnknown:()=>Vl,cacheQuotaExceeded:()=>fh});var fh="cache_quota_exceeded",Vl="cache_error_unknown";var Av={[fh]:"Exceeded cache storage capacity.",[Vl]:"Unexpected error occurred when using cache storage."},io=class n extends P{constructor(e,t){let r=t||(Av[e]?Av[e]:Av[Vl]);super(`${e}: ${r}`),Object.setPrototypeOf(this,n.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}};function Gs(n){return n instanceof Error?n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED"||n.message.includes("exceeded the quota")?new io(fh):new io(n.name,n.message):new io(Vl)}var Ri=class{constructor(e,t,r,o,i){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(dh,$s),this.staticAuthorityOptions=i,this.performanceClient=o}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(Object.keys(e).length===0||Object.values(e).every(o=>!o))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;let r=this.getAllAccounts(e,t);return r.length>1?r.sort(i=>i.idTokenClaims?-1:1)[0]:r.length===1?r[0]:null}getBaseAccountInfo(e,t){let r=this.getAccountsFilteredBy(e,t);return r.length>0?oe.getAccountInfo(r[0]):null}buildTenantProfiles(e,t,r){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,o,i){let s=null,a;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;let c=this.getIdToken(e,o,t,r.tenantId);return c&&(a=gr(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,i))?null:(s=_i(e,r,a,c?.secret),s)}getTenantProfilesFromAccountEntity(e,t,r,o){let i=oe.getAccountInfo(e),s=i.tenantProfiles||new Map,a=this.getTokenKeys();if(r){let l=s.get(r);if(l)s=new Map([[r,l]]);else return[]}let c=[];return s.forEach(l=>{let u=this.getTenantedAccountInfoByFilter(i,a,l,t,o);u&&c.push(u)}),c}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}async saveCacheRecord(e,t,r,o){if(!e)throw v(hi);try{e.account&&await this.setAccount(e.account,t,r),e.idToken&&o?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,t,r),e.accessToken&&o?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,t,r),e.refreshToken&&o?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,t,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof P?i:Gs(i)}}async saveAccessToken(e,t,r){let o={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),s=he.fromString(e.target);i.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,o,!1))return;let c=this.getAccessTokenCredential(a,t);c&&this.credentialMatchesFilter(c,o)&&he.fromString(c.target).intersectingScopeSets(s)&&this.removeAccessToken(a,t)}),await this.setAccessTokenCredential(e,t,r)}getAccountsFilteredBy(e,t){let r=this.getAccountKeys(),o=[];return r.forEach(i=>{let s=this.getAccount(i,t);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;let a={localAccountId:e?.localAccountId,name:e?.name},c=s.tenantProfiles?.filter(l=>this.tenantProfileMatchesFilter(l,a));c&&c.length===0||o.push(s)}),o}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===j.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){let t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;let i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;let i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}removeAllAccounts(e){this.getAllAccounts({},e).forEach(r=>{this.removeAccount(r,e)})}removeAccount(e,t){this.removeAccountContext(e,t);let r=this.getAccountKeys(),o=i=>i.includes(e.homeAccountId)&&i.includes(e.environment);r.filter(o).forEach(i=>{this.removeItem(i,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){let r=this.getTokenKeys(),o=i=>i.includes(e.homeAccountId)&&i.includes(e.environment);r.idToken.filter(o).forEach(i=>{this.removeIdToken(i,t)}),r.accessToken.filter(o).forEach(i=>{this.removeAccessToken(i,t)}),r.refreshToken.filter(o).forEach(i=>{this.removeRefreshToken(i,t)})}removeAccessToken(e,t){let r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==j.POP)return;let o=r.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${o}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");let s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ce.ID_TOKEN,clientId:this.clientId,realm:o},a=this.getIdTokensByFilter(s,t,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let l=a;if(!o){let u=new Map;a.forEach((p,h)=>{p.realm===e.tenantId&&u.set(h,p)});let f=u.size;if(f<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(f===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;l=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),l.forEach((u,f)=>{this.removeIdToken(f,t)}),i&&t&&i.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,r){let o=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return o.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,g({clientId:this.clientId},e)))return;let a=this.getIdTokenCredential(s,t);a&&this.credentialMatchesFilter(a,e)&&i.set(s,a)}),i}idTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,o){let i=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",i);let s=he.createSearchScopes(t.scopes),a=t.authenticationScheme||j.BEARER,c=a&&a.toLowerCase()!==j.BEARER.toLowerCase()?Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME:Ce.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:s,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=r&&r.accessToken||this.getTokenKeys().accessToken,f=[];u.forEach(h=>{if(this.accessTokenKeyMatchesFilter(h,l,!0)){let E=this.getAccessTokenCredential(h,i);E&&this.credentialMatchesFilter(E,l)&&f.push(E)}});let p=f.length;return p<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",i),null):p>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",i),f.forEach(h=>{this.removeAccessToken(this.generateCredentialKey(h),i)}),this.performanceClient.addFields({multiMatchedAT:f.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",i),f[0])}accessTokenKeyMatchesFilter(e,t,r){let o=e.toLowerCase();if(t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&o.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&o.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){let i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){let r=this.getTokenKeys(),o=[];return r.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;let s=this.getAccessTokenCredential(i,t);s&&this.credentialMatchesFilter(s,e)&&o.push(s)}),o}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");let s=t?Xo:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ce.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=o&&o.refreshToken||this.getTokenKeys().refreshToken,l=[];c.forEach(f=>{if(this.refreshTokenKeyMatchesFilter(f,a)){let p=this.getRefreshTokenCredential(f,r);p&&this.credentialMatchesFilter(p,a)&&l.push(p)}});let u=l.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&i&&r&&i.addFields({multiMatchedRT:u},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),l[0])}refreshTokenKeyMatchesFilter(e,t){let r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw v(li);return o[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===Xo)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){let r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&typeof e=="string"&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let o=jD(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}let r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==Ce.ACCESS_TOKEN&&e.credentialType!==Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:he.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(cl)!==-1}isAuthorityMetadata(e){return e.indexOf(js.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${js.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let r in t)e[r]=t[r];return e}},zl=class extends Ri{async setAccount(){throw v(H)}getAccount(){throw v(H)}async setIdTokenCredential(){throw v(H)}getIdTokenCredential(){throw v(H)}async setAccessTokenCredential(){throw v(H)}getAccessTokenCredential(){throw v(H)}async setRefreshTokenCredential(){throw v(H)}getRefreshTokenCredential(){throw v(H)}setAppMetadata(){throw v(H)}getAppMetadata(){throw v(H)}setServerTelemetry(){throw v(H)}getServerTelemetry(){throw v(H)}setAuthorityMetadata(){throw v(H)}getAuthorityMetadata(){throw v(H)}getAuthorityMetadataKeys(){throw v(H)}setThrottlingCache(){throw v(H)}getThrottlingCache(){throw v(H)}removeItem(){throw v(H)}getKeys(){throw v(H)}getAccountKeys(){throw v(H)}getTokenKeys(){throw v(H)}generateCredentialKey(){throw v(H)}generateAccountKey(){throw v(H)}};var d={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},nQ=new Map([[d.AcquireTokenByCode,"ATByCode"],[d.AcquireTokenByRefreshToken,"ATByRT"],[d.AcquireTokenSilent,"ATS"],[d.AcquireTokenSilentAsync,"ATSAsync"],[d.AcquireTokenPopup,"ATPopup"],[d.AcquireTokenRedirect,"ATRedirect"],[d.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[d.CryptoOptsSignJwt,"CryptoSignJwt"],[d.SilentCacheClientAcquireToken,"SltCacheClientAT"],[d.SilentIframeClientAcquireToken,"SltIframeClientAT"],[d.SilentRefreshClientAcquireToken,"SltRClientAT"],[d.SsoSilent,"SsoSlt"],[d.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[d.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[d.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[d.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[d.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[d.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[d.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[d.BrokerHandhshake,"BrokerHandshake"],[d.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[d.AcquireTokenByBroker,"ATByBroker"],[d.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[d.RefreshTokenClientAcquireToken,"RTClientAT"],[d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[d.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[d.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[d.AcquireTokenFromCache,"ATFromCache"],[d.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[d.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[d.AcquireTokenBySilentIframe,"ATBySltIframe"],[d.InitializeBaseRequest,"InitBaseReq"],[d.InitializeSilentRequest,"InitSltReq"],[d.InitializeClientApplication,"InitClientApplication"],[d.InitializeCache,"InitCache"],[d.ImportExistingCache,"importCache"],[d.SetUserData,"setUserData"],[d.LocalStorageUpdated,"localStorageUpdated"],[d.SilentIframeClientTokenHelper,"SIClientTHelper"],[d.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[d.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[d.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[d.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[d.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[d.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[d.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[d.GetAuthCodeUrl,"GetAuthCodeUrl"],[d.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[d.HandleCodeResponse,"HandleCodeResp"],[d.HandleResponseEar,"HandleRespEar"],[d.HandleResponseCode,"HandleRespCode"],[d.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[d.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[d.AuthClientAcquireToken,"AuthClientAT"],[d.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[d.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[d.PopTokenGenerateCnf,"PopTGenCnf"],[d.PopTokenGenerateKid,"PopTGenKid"],[d.HandleServerTokenResponse,"HandleServerTRes"],[d.DeserializeResponse,"DeserializeRes"],[d.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[d.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[d.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[d.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[d.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[d.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[d.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[d.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[d.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[d.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[d.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[d.AcquireTokenByCodeAsync,"ATByCodeAsync"],[d.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[d.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[d.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[d.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[d.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[d.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[d.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[d.NativeGenerateAuthResult,"NtvGenAuthRes"],[d.RemoveHiddenIframe,"RemoveHiddenIframe"],[d.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[d.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[d.GeneratePkceCodes,"GenPkceCodes"],[d.GenerateCodeVerifier,"GenCodeVerifier"],[d.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[d.Sha256Digest,"Sha256Digest"],[d.GetRandomValues,"GetRandomValues"],[d.GenerateHKDF,"genHKDF"],[d.GenerateBaseKey,"genBaseKey"],[d.Base64Decode,"b64Decode"],[d.UrlEncodeArr,"urlEncArr"],[d.Encrypt,"encrypt"],[d.Decrypt,"decrypt"],[d.GenerateEarKey,"genEarKey"],[d.DecryptEarResponse,"decryptEarResp"]]),Sv={NotStarted:0,InProgress:1,Completed:2};var hh=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},mr=class{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Sv.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new hh}}startPerformanceMeasurement(){return new hh}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var ph={tokenRenewalOffsetSeconds:ll,preventCorsPreflight:!1},IL={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:re.Info,correlationId:y.EMPTY_STRING},wL={claimsBasedCachingEnabled:!1},AL={async sendGetRequestAsync(){throw v(H)},async sendPostRequestAsync(){throw v(H)}},SL={sku:y.SKU,version:$s,cpu:y.EMPTY_STRING,os:y.EMPTY_STRING},DL={clientSecret:y.EMPTY_STRING,clientAssertion:void 0},_L={azureCloudInstance:to.None,tenant:`${y.DEFAULT_COMMON_TENANT}`},bL={application:{appName:"",appVersion:""}};function $D({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:l,serverTelemetryManager:u,persistencePlugin:f,serializableCache:p}){let h=g(g({},IL),t);return{authOptions:RL(n),systemOptions:g(g({},ph),e),loggerOptions:h,cacheOptions:g(g({},wL),r),storageInterface:o||new zl(n.clientId,eo,new nt(h),new mr),networkInterface:i||AL,cryptoInterface:s||eo,clientCredentials:a||DL,libraryInfo:g(g({},SL),c),telemetry:g(g({},bL),l),serverTelemetryManager:u||null,persistencePlugin:f||null,serializableCache:p||null}}function RL(n){return g({clientCapabilities:[],azureCloudOptions:_L,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1},n)}function gh(n){return n.authOptions.authority.options.protocolMode===ce.OIDC}var ze={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var Te={};Ct(Te,{addApplicationTelemetry:()=>Kl,addAuthorizationCode:()=>mC,addBrokerParameters:()=>Er,addCcsOid:()=>vr,addCcsUpn:()=>so,addClaims:()=>Pi,addClientAssertion:()=>Ql,addClientAssertionType:()=>Jl,addClientCapabilitiesToClaims:()=>zD,addClientId:()=>ki,addClientInfo:()=>Li,addClientSecret:()=>Yl,addCodeChallengeParams:()=>zL,addCodeVerifier:()=>vC,addCorrelationId:()=>xi,addDeviceCode:()=>GL,addDomainHint:()=>hC,addEARParameters:()=>QL,addExtraQueryParameters:()=>Cr,addGrantType:()=>Zl,addIdTokenHint:()=>fC,addInstanceAware:()=>Xl,addLibraryInfo:()=>ql,addLoginHint:()=>Ks,addLogoutHint:()=>CC,addNativeBroker:()=>$L,addNonce:()=>gC,addOboAssertion:()=>qL,addPassword:()=>YL,addPopToken:()=>eu,addPostBodyParameters:()=>JL,addPostLogoutRedirectUri:()=>dC,addPrompt:()=>pC,addRedirectUri:()=>Oi,addRefreshToken:()=>yC,addRequestTokenUse:()=>KL,addResponseMode:()=>uC,addResponseType:()=>VL,addScopes:()=>Ni,addServerTelemetry:()=>nu,addSid:()=>Th,addSshJwk:()=>tu,addState:()=>Wl,addThrottling:()=>ru,addUsername:()=>WL,instrumentBrokerParams:()=>Mi});var yr={};Ct(yr,{ACCESS_TOKEN:()=>kL,BROKER_CLIENT_ID:()=>Gl,BROKER_REDIRECT_URI:()=>Eh,CCS_HEADER:()=>BL,CLAIMS:()=>Rv,CLIENT_ASSERTION:()=>Xv,CLIENT_ASSERTION_TYPE:()=>eC,CLIENT_ID:()=>On,CLIENT_INFO:()=>FL,CLIENT_REQUEST_ID:()=>Hv,CLIENT_SECRET:()=>Zv,CODE:()=>xv,CODE_CHALLENGE:()=>Lv,CODE_CHALLENGE_METHOD:()=>Fv,CODE_VERIFIER:()=>Uv,DEVICE_CODE:()=>Jv,DOMAIN_HINT:()=>aC,EAR_JWE_CRYPTO:()=>lC,EAR_JWK:()=>cC,ERROR:()=>ML,ERROR_DESCRIPTION:()=>NL,EXPIRES_IN:()=>PL,FOCI:()=>HL,GRANT_TYPE:()=>bv,ID_TOKEN:()=>OL,ID_TOKEN_HINT:()=>Qv,INSTANCE_AWARE:()=>qs,LOGIN_HINT:()=>sC,LOGOUT_HINT:()=>oC,NATIVE_BROKER:()=>rC,NONCE:()=>Ov,OBO_ASSERTION:()=>tC,ON_BEHALF_OF:()=>UL,POST_LOGOUT_URI:()=>Yv,PROMPT:()=>Pv,REDIRECT_URI:()=>mh,REFRESH_TOKEN:()=>Nv,REFRESH_TOKEN_EXPIRES_IN:()=>xL,REQUESTED_TOKEN_USE:()=>nC,REQ_CNF:()=>vh,RESPONSE_MODE:()=>_v,RESPONSE_TYPE:()=>Dv,RETURN_SPA_CODE:()=>Ch,SCOPE:()=>Mv,SESSION_STATE:()=>LL,SID:()=>iC,STATE:()=>kv,TOKEN_TYPE:()=>yh,X_APP_NAME:()=>Kv,X_APP_VER:()=>Wv,X_CLIENT_CPU:()=>$v,X_CLIENT_CURR_TELEM:()=>zv,X_CLIENT_EXTRA_SKU:()=>jL,X_CLIENT_LAST_TELEM:()=>Gv,X_CLIENT_OS:()=>Vv,X_CLIENT_SKU:()=>Bv,X_CLIENT_VER:()=>jv,X_MS_LIB_CAPABILITY:()=>qv});var On="client_id",mh="redirect_uri",Dv="response_type",_v="response_mode",bv="grant_type",Rv="claims",Mv="scope",ML="error",NL="error_description",kL="access_token",OL="id_token",Nv="refresh_token",PL="expires_in",xL="refresh_token_expires_in",kv="state",Ov="nonce",Pv="prompt",LL="session_state",FL="client_info",xv="code",Lv="code_challenge",Fv="code_challenge_method",Uv="code_verifier",Hv="client-request-id",Bv="x-client-SKU",jv="x-client-VER",Vv="x-client-OS",$v="x-client-CPU",zv="x-client-current-telemetry",Gv="x-client-last-telemetry",qv="x-ms-lib-capability",Kv="x-app-name",Wv="x-app-ver",Yv="post_logout_redirect_uri",Qv="id_token_hint",Jv="device_code",Zv="client_secret",Xv="client_assertion",eC="client_assertion_type",yh="token_type",vh="req_cnf",tC="assertion",nC="requested_token_use",UL="on_behalf_of",HL="foci",BL="X-AnchorMailbox",Ch="return_spa_code",rC="nativebroker",oC="logout_hint",iC="sid",sC="login_hint",aC="domain_hint",jL="x-client-xtra-sku",Gl="brk_client_id",Eh="brk_redirect_uri",qs="instance_aware",cC="ear_jwk",lC="ear_jwe_crypto";function Mi(n,e,t){if(!e)return;let r=n.get(On);r&&n.has(Gl)&&t?.addFields({embeddedClientId:r,embeddedRedirectUri:n.get(mh)},e)}function VL(n,e){n.set(Dv,e)}function uC(n,e){n.set(_v,e||yv.QUERY)}function $L(n){n.set(rC,"1")}function Ni(n,e,t=!0,r=kt){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");let o=t?[...e||[],...r]:e||[],i=new he(o);n.set(Mv,i.printScopes())}function ki(n,e){n.set(On,e)}function Oi(n,e){n.set(mh,e)}function dC(n,e){n.set(Yv,e)}function fC(n,e){n.set(Qv,e)}function hC(n,e){n.set(aC,e)}function Ks(n,e){n.set(sC,e)}function so(n,e){n.set(ve.CCS_HEADER,`UPN:${e}`)}function vr(n,e){n.set(ve.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}function Th(n,e){n.set("sid",e)}function Pi(n,e,t){let r=zD(e,t);try{JSON.parse(r)}catch{throw q(no)}n.set(Rv,r)}function xi(n,e){n.set(Hv,e)}function ql(n,e){n.set(Bv,e.sku),n.set(jv,e.version),e.os&&n.set(Vv,e.os),e.cpu&&n.set($v,e.cpu)}function Kl(n,e){e?.appName&&n.set(Kv,e.appName),e?.appVersion&&n.set(Wv,e.appVersion)}function pC(n,e){n.set(Pv,e)}function Wl(n,e){e&&n.set(kv,e)}function gC(n,e){n.set(Ov,e)}function zL(n,e,t){if(e&&t)n.set(Lv,e),n.set(Fv,t);else throw q(Ai)}function mC(n,e){n.set(xv,e)}function GL(n,e){n.set(Jv,e)}function yC(n,e){n.set(Nv,e)}function vC(n,e){n.set(Uv,e)}function Yl(n,e){n.set(Zv,e)}function Ql(n,e){e&&n.set(Xv,e)}function Jl(n,e){e&&n.set(eC,e)}function qL(n,e){n.set(tC,e)}function KL(n,e){n.set(nC,e)}function Zl(n,e){n.set(bv,e)}function Li(n){n.set(kD,"1")}function Xl(n){n.has(qs)||n.set(qs,"true")}function Cr(n,e){Object.entries(e).forEach(([t,r])=>{!n.has(t)&&r&&n.set(t,r)})}function zD(n,e){let t;if(!n)t={};else try{t=JSON.parse(n)}catch{throw q(no)}return e&&e.length>0&&(t.hasOwnProperty(Hs.ACCESS_TOKEN)||(t[Hs.ACCESS_TOKEN]={}),t[Hs.ACCESS_TOKEN][Hs.XMS_CC]={values:e}),JSON.stringify(t)}function WL(n,e){n.set(ah.username,e)}function YL(n,e){n.set(ah.password,e)}function eu(n,e){e&&(n.set(yh,j.POP),n.set(vh,e))}function tu(n,e){e&&(n.set(yh,j.SSH),n.set(vh,e))}function nu(n,e){n.set(zv,e.generateCurrentRequestHeaderValue()),n.set(Gv,e.generateLastRequestHeaderValue())}function ru(n){n.set(qv,lr.X_MS_LIB_CAPABILITY_VALUE)}function CC(n,e){n.set(oC,e)}function Er(n,e,t){n.has(Gl)||n.set(Gl,e),n.has(Eh)||n.set(Eh,t)}function QL(n,e){n.set(cC,encodeURIComponent(e)),n.set(lC,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}function JL(n,e){Object.entries(e).forEach(([t,r])=>{r&&n.set(t,r)})}var Dh={};Ct(Dh,{createDiscoveredInstance:()=>SC});function GD(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}function qD(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}function KD(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}var Ie=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{let a=n(...i);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},m=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);let s=r?.startMeasurement(e,o);if(o){let a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};var WD=(()=>{class n{constructor(t,r,o,i){this.networkInterface=t,this.logger=r,this.performanceClient=o,this.correlationId=i}async detectRegion(t,r){this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryDetectRegion,this.correlationId);let o=t;if(o)r.region_source=ei.ENVIRONMENT_VARIABLE;else{let i=n.IMDS_OPTIONS;try{let s=await m(this.getRegionFromIMDS.bind(this),d.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(y.IMDS_VERSION,i);if(s.status===an.SUCCESS&&(o=s.body,r.region_source=ei.IMDS),s.status===an.BAD_REQUEST){let a=await m(this.getCurrentVersion.bind(this),d.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=ei.FAILED_AUTO_DETECTION,null;let c=await m(this.getRegionFromIMDS.bind(this),d.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===an.SUCCESS&&(o=c.body,r.region_source=ei.IMDS)}}catch{return r.region_source=ei.FAILED_AUTO_DETECTION,null}}return o||(r.region_source=ei.FAILED_AUTO_DETECTION),o||null}async getRegionFromIMDS(t,r){return this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${y.IMDS_ENDPOINT}?api-version=${t}&format=text`,r,y.IMDS_TIMEOUT)}async getCurrentVersion(t){this.performanceClient?.addQueueMeasurement(d.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${y.IMDS_ENDPOINT}?format=json`,t);return r.status===an.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();var pe={};Ct(pe,{createAccessTokenEntity:()=>IC,createIdTokenEntity:()=>TC,createRefreshTokenEntity:()=>wC,generateAppMetadataKey:()=>sF,generateAuthorityMetadataExpiresAt:()=>wh,isAccessTokenEntity:()=>tF,isAppMetadataEntity:()=>aF,isAuthorityMetadataEntity:()=>cF,isAuthorityMetadataExpired:()=>Ah,isCredentialEntity:()=>Ih,isIdTokenEntity:()=>nF,isRefreshTokenEntity:()=>rF,isServerTelemetryEntity:()=>oF,isThrottlingEntity:()=>iF,updateAuthorityEndpointMetadata:()=>Ys,updateCloudDiscoveryMetadata:()=>iu});var _e={};Ct(_e,{delay:()=>eF,isCacheExpired:()=>XL,isTokenExpired:()=>Ws,nowSeconds:()=>Ot,toDateFromSeconds:()=>ou,toSecondsFromDate:()=>ZL,wasClockTurnedBack:()=>EC});function Ot(){return Math.round(new Date().getTime()/1e3)}function ZL(n){return n.getTime()/1e3}function ou(n){return n?new Date(Number(n)*1e3):new Date}function Ws(n,e){let t=Number(n)||0;return Ot()+e>t}function XL(n,e){let t=Number(n)+e*24*60*60*1e3;return Date.now()>t}function EC(n){return Number(n)>Ot()}function eF(n,e){return new Promise(t=>setTimeout(()=>t(e),n))}function TC(n,e,t,r,o){return{credentialType:Ce.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o,lastUpdatedAt:Date.now().toString()}}function IC(n,e,t,r,o,i,s,a,c,l,u,f,p,h,E){let I={homeAccountId:n,credentialType:Ce.ACCESS_TOKEN,secret:t,cachedAt:Ot().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||j.BEARER,lastUpdatedAt:Date.now().toString()};if(f&&(I.userAssertionHash=f),l&&(I.refreshOn=l.toString()),h&&(I.requestedClaims=h,I.requestedClaimsHash=E),I.tokenType?.toLowerCase()!==j.BEARER.toLowerCase())switch(I.credentialType=Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME,I.tokenType){case j.POP:let w=gr(t,c);if(!w?.cnf?.kid)throw v(pi);I.keyId=w.cnf.kid;break;case j.SSH:I.keyId=p}return I}function wC(n,e,t,r,o,i,s){let a={credentialType:Ce.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,lastUpdatedAt:Date.now().toString()};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function Ih(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function tF(n){return n?Ih(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===Ce.ACCESS_TOKEN||n.credentialType===Ce.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function nF(n){return n?Ih(n)&&n.hasOwnProperty("realm")&&n.credentialType===Ce.ID_TOKEN:!1}function rF(n){return n?Ih(n)&&n.credentialType===Ce.REFRESH_TOKEN:!1}function oF(n,e){let t=n.indexOf(Ne.CACHE_KEY)===0,r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function iF(n,e){let t=!1;n&&(t=n.indexOf(lr.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function sF({environment:n,clientId:e}){return[cl,n,e].join(cr.CACHE_KEY_SEPARATOR).toLowerCase()}function aF(n,e){return e?n.indexOf(cl)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function cF(n,e){return e?n.indexOf(js.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function wh(){return Ot()+js.REFRESH_TIME_SECONDS}function Ys(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function iu(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function Ah(n){return n.expiresAt<=Ot()}var zt=class n{constructor(e,t,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new WD(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(y.CIAM_AUTH_URL))return ot.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case y.ADFS:return ot.Adfs;case y.DSTS:return ot.Dsts}return ot.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new V(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw v(tt)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw v(tt)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw v(tt)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw v(mi);return this.replacePath(this.metadata.end_session_endpoint)}else throw v(tt)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw v(tt)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw v(tt)}canReplaceTenant(e){return e.PathSegments.length===1&&!n.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===ot.Default&&this.protocolMode!==ce.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,o=new V(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let l=i[c];if(c===0&&this.canReplaceTenant(o)){let u=new V(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];l!==u&&(this.logger.verbose(`Replacing tenant domain name ${l} with id ${u}`),l=u)}a!==l&&(t=t.replace(`/${l}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===ot.Adfs||this.protocolMode===ce.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(d.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=await m(this.updateCloudDiscoveryMetadata.bind(this),d.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let r=await m(this.updateEndpointMetadata.bind(this),d.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:wh(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==et.CACHE&&r?.source!==et.CACHE&&(e.expiresAt=wh(),e.canonical_authority=this.canonicalAuthority);let o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===et.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){let o=await m(this.updateMetadataWithRegionalInformation.bind(this),d.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);Ys(e,o,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=await m(this.getEndpointMetadataFromNetwork.bind(this),d.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await m(this.updateMetadataWithRegionalInformation.bind(this),d.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),Ys(e,r,!0),et.NETWORK;throw v(oi,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Ys(e,t,!1),{source:et.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let o=this.getEndpointMetadataFromHardcodedValues();if(o)return Ys(e,o,!1),{source:et.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let r=Ah(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:et.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new V(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw q(Si)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(d.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{let r=await this.networkInterface.sendGetRequestAsync(t,e);return GD(r.body)?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Tv?Tv[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==y.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=ch.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,n.replaceWithRegionalInformation(e,t);let r=await m(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),d.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=ch.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,n.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=ch.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(d.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let r=await m(this.getCloudDiscoveryMetadataFromNetwork.bind(this),d.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return iu(e,r,!0),et.NETWORK;throw q(Di)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||y.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||y.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||y.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),iu(e,t,!1),et.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let o=VD(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),iu(e,o,!1),et.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let r=Ah(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),et.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===ot.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=jl(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),q(ro)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(d.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${y.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={},r=null;try{let o=await this.networkInterface.sendGetRequestAsync(e,t),i,s;if(qD(o.body))i=o.body,s=i.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${i.tenant_discovery_endpoint}`);else if(KD(o.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${o.status}`),i=o.body,i.error===y.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${i.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${i.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),s=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=jl(s,this.hostnameAndPort)}catch(o){if(o instanceof P)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${o.errorCode}
Error Description: ${o.errorMessage}`);else{let i=o;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${i.name}
Error Description: ${i.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&V.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==to.None){let o=t.tenant?t.tenant:y.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return y.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw v(tt)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return wv.has(e)}static isPublicCloudAuthority(e){return y.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){let o=new V(e);o.validateAsUri();let i=o.getUrlComponents(),s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${y.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=V.constructAuthorityUriFromObject(A(g({},o.getUrlComponents()),{HostNameAndPort:s})).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){let r=g({},e);return r.authorization_endpoint=n.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=n.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=n.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e,o=new V(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(y.CIAM_AUTH_URL)){let i=o.HostNameAndPort.split(".")[0];t=`${t}${i}${y.AAD_TENANT_DOMAIN_SUFFIX}`}return t}};zt.reservedTenantDomains=new Set(["{tenant}","{tenantid}",cn.COMMON,cn.CONSUMERS,cn.ORGANIZATIONS]);function YD(n){let r=new V(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case cn.COMMON:case cn.ORGANIZATIONS:case cn.CONSUMERS:return;default:return r}}function Sh(n){return n.endsWith(y.FORWARD_SLASH)?n:`${n}${y.FORWARD_SLASH}`}function AC(n){let e=n.cloudDiscoveryMetadata,t;if(e)try{t=JSON.parse(e)}catch{throw q(ro)}return{canonicalAuthority:n.authority?Sh(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}async function SC(n,e,t,r,o,i,s){s?.addQueueMeasurement(d.AuthorityFactoryCreateDiscoveredInstance,i);let a=zt.transformCIAMAuthority(Sh(n)),c=new zt(a,e,t,r,o,i,s);try{return await m(c.resolveEndpointsAsync.bind(c),d.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw v(tt)}}var pt=class n extends P{constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,n.prototype)}};function Tr(n,e,t){return{clientId:n,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:t,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}var Ir=class n{static generateThrottlingStorageKey(e){return`${lr.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t,r){let o=n.generateThrottlingStorageKey(t),i=e.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now()){e.removeItem(o,r);return}throw new pt(i.errorCodes?.join(" ")||y.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,t,r,o){if(n.checkResponseStatus(r)||n.checkResponseForRetryAfter(r)){let i={throttleTime:n.calculateThrottleTime(parseInt(r.headers[ve.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(n.generateThrottlingStorageKey(t),i,o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(ve.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||lr.DEFAULT_THROTTLE_TIME_SECONDS),r+lr.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,o){let i=Tr(t,r,o),s=this.generateThrottlingStorageKey(i);e.removeItem(s,r.correlationId)}};var Qs=class n extends P{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,n.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}};function Fi(n,e,t,r){return n.errorMessage=`${n.errorMessage}, additionalErrorInfo: error.name:${r?.name}, error.message:${r?.message}`,new Qs(n,e,t)}var ao=class{constructor(e,t){this.config=$D(e),this.logger=new nt(this.config.loggerOptions,dh,$s),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[ve.CONTENT_TYPE]=y.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case ze.HOME_ACCOUNT_ID:try{let r=Mn(e.credential);t[ve.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case ze.UPN:t[ve.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}async executePostToTokenEndpoint(e,t,r,o,i,s){s&&this.performanceClient?.addQueueMeasurement(s,i);let a=await this.sendPostRequest(o,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,t,r,o){Ir.preProcess(this.cacheManager,e,o);let i;try{i=await m(this.networkClient.sendPostRequestAsync.bind(this.networkClient),d.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(t,r);let s=i.headers||{};this.performanceClient?.addFields({refreshTokenSize:i.body.refresh_token?.length||0,httpVerToken:s[ve.X_MS_HTTP_VERSION]||"",requestId:s[ve.X_MS_REQUEST_ID]||""},o)}catch(s){if(s instanceof Qs){let a=s.responseHeaders;throw a&&this.performanceClient?.addFields({httpVerToken:a[ve.X_MS_HTTP_VERSION]||"",requestId:a[ve.X_MS_REQUEST_ID]||"",contentTypeHeader:a[ve.CONTENT_TYPE]||void 0,contentLengthHeader:a[ve.CONTENT_LENGTH]||void 0,httpStatus:s.httpStatus},o),s.error}throw s instanceof P?s:v(ri)}return Ir.postProcess(this.cacheManager,e,i,o),i}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(d.UpdateTokenEndpointAuthority,t);let r=`https://${e}/${this.authority.tenant}/`,o=await SC(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o}createTokenQueryParameters(e){let t=new Map;return e.embeddedClientId&&Er(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Cr(t,e.tokenQueryParameters),xi(t,e.correlationId),Mi(t,e.correlationId,this.performanceClient),Nn(t)}};var Pn={};Ct(Pn,{badToken:()=>lo,consentRequired:()=>_C,interactionRequired:()=>DC,loginRequired:()=>bC,nativeAccountUnavailable:()=>su,noTokensFound:()=>co,refreshTokenExpired:()=>au,uxNotAllowed:()=>_h});var co="no_tokens_found",su="native_account_unavailable",au="refresh_token_expired",_h="ux_not_allowed",DC="interaction_required",_C="consent_required",bC="login_required",lo="bad_token";var QD=[DC,_C,bC,lo,_h],lF=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],bh={[co]:"No refresh token found in the cache. Please sign-in.",[su]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[au]:"Refresh token has expired.",[lo]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[_h]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},JD={noTokensFoundError:{code:co,desc:bh[co]},native_account_unavailable:{code:su,desc:bh[su]},bad_token:{code:lo,desc:bh[lo]}},be=class n extends P{constructor(e,t,r,o,i,s,a,c){super(e,t,r),Object.setPrototypeOf(this,n.prototype),this.timestamp=o||y.EMPTY_STRING,this.traceId=i||y.EMPTY_STRING,this.correlationId=s||y.EMPTY_STRING,this.claims=a||y.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}};function Rh(n,e,t){let r=!!n&&QD.indexOf(n)>-1,o=!!t&&lF.indexOf(t)>-1,i=!!e&&QD.some(s=>e.indexOf(s)>-1);return r||i||o}function Ui(n){return new be(n,bh[n])}var un=class n{static setRequestState(e,t,r){let o=n.generateLibraryState(e,r);return t?`${o}${y.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw v(Xr);let r={id:e.createNewGuid()};t&&(r.meta=t);let o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw v(Xr);if(!t)throw v(ln);try{let r=t.split(y.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(y.RESOURCE_DELIM):y.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||y.EMPTY_STRING,libraryState:a}}catch{throw v(ln)}}};var uF={SW:"sw"},gt=class{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(d.PopTokenGenerateCnf,e.correlationId);let r=await m(this.generateKid.bind(this),d.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(d.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:uF.SW}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,o){let{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:l}=r,f=(s?new V(s):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt(g({at:e,ts:Ot(),m:i?.toUpperCase(),u:f?.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:f?.AbsolutePath,q:f?.QueryString?[[],f.QueryString]:void 0,client_claims:a||void 0},o),t,l,r.correlationId)}};var Mh=class{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var dn=class n{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let r=`Error(s): ${e.error_codes||y.NOT_AVAILABLE} - Timestamp: ${e.timestamp||y.NOT_AVAILABLE} - Description: ${e.error_description||y.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||y.NOT_AVAILABLE} - Trace ID: ${e.trace_id||y.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new pt(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=an.SERVER_ERROR_RANGE_START&&e.status<=an.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${i}`);return}else if(t&&e.status&&e.status>=an.CLIENT_ERROR_RANGE_START&&e.status<=an.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${i}`);return}throw Rh(e.error,e.error_description,e.suberror)?new be(e.error,e.error_description,e.suberror,e.timestamp||y.EMPTY_STRING,e.trace_id||y.EMPTY_STRING,e.correlation_id||y.EMPTY_STRING,e.claims||y.EMPTY_STRING,o):i}}async handleServerTokenResponse(e,t,r,o,i,s,a,c,l){this.performanceClient?.addQueueMeasurement(d.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=gr(e.id_token||y.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&u.nonce!==i.nonce)throw v(ai);if(o.maxAge||o.maxAge===0){let E=u.auth_time;if(!E)throw v(ur);Bl(E,o.maxAge)}}this.homeAccountIdentifier=oe.generateHomeAccountId(e.client_info||y.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u);let f;i&&i.state&&(f=un.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;let p=this.generateCacheRecord(e,t,r,o,u,s,i),h;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new Mh(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(h)),a&&!c&&p.account){let E=this.cacheStorage.generateAccountKey(oe.getAccountInfo(p.account));if(!this.cacheStorage.getAccount(E,o.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await n.generateAuthenticationResult(this.cryptoObj,t,p,!1,o,u,f,void 0,l)}await this.cacheStorage.saveCacheRecord(p,o.correlationId,Cv(u||{}),o.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(h))}return n.generateAuthenticationResult(this.cryptoObj,t,p,!1,o,u,f,e,l)}generateCacheRecord(e,t,r,o,i,s,a){let c=t.getPreferredCache();if(!c)throw v(fr);let l=bi(i),u,f;e.id_token&&i&&(u=TC(this.homeAccountIdentifier,c,e.id_token,this.clientId,l||""),f=Js(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,i,e.client_info,c,l,a,void 0,this.logger));let p=null;if(e.access_token){let I=e.scope?he.fromString(e.scope):new he(o.scopes||[]),w=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,S=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,G=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,ie=r+w,Z=ie+S,Ge=G&&G>0?r+G:void 0;p=IC(this.homeAccountIdentifier,c,e.access_token,this.clientId,l||t.tenant||"",I.printScopes(),ie,Z,this.cryptoObj.base64Decode,Ge,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let h=null;if(e.refresh_token){let I;if(e.refresh_token_expires_in){let w=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;I=r+w}h=wC(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,I)}let E=null;return e.foci&&(E={clientId:this.clientId,environment:c,familyId:e.foci}),{account:f,idToken:u,accessToken:p,refreshToken:h,appMetadata:E}}static async generateAuthenticationResult(e,t,r,o,i,s,a,c,l){let u=y.EMPTY_STRING,f=[],p=null,h,E,I=y.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===j.POP&&!i.popKid){let ie=new gt(e),{secret:Z,keyId:Ge}=r.accessToken;if(!Ge)throw v(yi);u=await ie.signPopToken(Z,Ge,i)}else u=r.accessToken.secret;f=he.fromString(r.accessToken.target).asArray(),p=ou(r.accessToken.expiresOn),h=ou(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(E=ou(r.accessToken.refreshOn))}r.appMetadata&&(I=r.appMetadata.familyId===Xo?Xo:"");let w=s?.oid||s?.sub||"",S=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);let G=r.account?_i(oe.getAccountInfo(r.account),void 0,s,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:w,tenantId:S,scopes:f,account:G,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:p,extExpiresOn:h,refreshOn:E,correlationId:i.correlationId,requestId:l||y.EMPTY_STRING,familyId:I,tokenType:r.accessToken?.tokenType||y.EMPTY_STRING,state:a?a.userRequestState:y.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||y.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||y.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}}};function Js(n,e,t,r,o,i,s,a,c,l,u,f){f?.verbose("setCachedAccount called");let h=n.getAccountKeys().find(G=>G.startsWith(t)),E=null;h&&(E=n.getAccount(h,o));let I=E||oe.createAccount({homeAccountId:t,idTokenClaims:i,clientInfo:s,environment:a,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:u},e,r),w=I.tenantProfiles||[],S=c||I.realm;if(S&&!w.find(G=>G.tenantId===S)){let G=oo(t,I.localAccountId,S,i);w.push(G)}return I.tenantProfiles=w,I}async function Nh(n,e,t){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})}var Hi=class extends ao{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(d.AuthClientAcquireToken,e.correlationId),!e.code)throw v(ui);let r=Ot(),o=await m(this.executeTokenRequest.bind(this),d.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=o.headers?.[ve.X_MS_REQUEST_ID],s=new dn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),m(s.handleServerTokenResponse.bind(s),d.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,t,void 0,void 0,void 0,i)}getLogoutUri(e){if(!e)throw q(wi);let t=this.createLogoutUrlQueryString(e);return V.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(d.AuthClientExecuteTokenRequest,t.correlationId);let r=this.createTokenQueryParameters(t),o=V.appendQueryString(e.tokenEndpoint,r),i=await m(this.createTokenRequestBody.bind(this),d.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),s;if(t.clientInfo)try{let l=zs(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${l.uid}${cr.CLIENT_INFO_SEPARATOR}${l.utid}`,type:ze.HOME_ACCOUNT_ID}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}let a=this.createTokenRequestHeaders(s||t.ccsCredential),c=Tr(this.config.authOptions.clientId,t);return m(this.executePostToTokenEndpoint.bind(this),d.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(o,i,a,c,t.correlationId,d.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(d.AuthClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(ki(t,e.embeddedClientId||e.tokenBodyParameters?.[On]||this.config.authOptions.clientId),this.includeRedirectUri)Oi(t,e.redirectUri);else if(!e.redirectUri)throw q(vi);if(Ni(t,e.scopes,!0,this.oidcDefaultScopes),mC(t,e.code),ql(t,this.config.libraryInfo),Kl(t,this.config.telemetry.application),ru(t),this.serverTelemetryManager&&!gh(this.config)&&nu(t,this.serverTelemetryManager),e.codeVerifier&&vC(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&Yl(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;Ql(t,await Nh(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Jl(t,o.assertionType)}if(Zl(t,al.AUTHORIZATION_CODE_GRANT),Li(t),e.authenticationScheme===j.POP){let o=new gt(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(await m(o.generateCnf.bind(o),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,eu(t,i)}else if(e.authenticationScheme===j.SSH)if(e.sshJwk)tu(t,e.sshJwk);else throw q(pr);(!ae.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Pi(t,e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{let o=zs(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${o.uid}${cr.CLIENT_INFO_SEPARATOR}${o.utid}`,type:ze.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case ze.HOME_ACCOUNT_ID:try{let o=Mn(r.credential);vr(t,o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case ze.UPN:so(t,r.credential);break}return e.embeddedClientId&&Er(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Cr(t,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[Ch])&&Cr(t,{[Ch]:"1"}),Mi(t,e.correlationId,this.performanceClient),Nn(t)}createLogoutUrlQueryString(e){let t=new Map;return e.postLogoutRedirectUri&&dC(t,e.postLogoutRedirectUri),e.correlationId&&xi(t,e.correlationId),e.idTokenHint&&fC(t,e.idTokenHint),e.state&&Wl(t,e.state),e.logoutHint&&CC(t,e.logoutHint),e.extraQueryParameters&&Cr(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&Xl(t),Nn(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};var dF=300,cu=class extends ao{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireToken,e.correlationId);let t=Ot(),r=await m(this.executeTokenRequest.bind(this),d.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=r.headers?.[ve.X_MS_REQUEST_ID],i=new dn(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),m(i.handleServerTokenResponse.bind(i),d.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,o)}async acquireTokenByRefreshToken(e){if(!e)throw q(Ii);if(this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw v(dr);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await m(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(r){let o=r instanceof be&&r.errorCode===co,i=r instanceof pt&&r.errorCode===sh.INVALID_GRANT_ERROR&&r.subError===sh.CLIENT_MISMATCH_ERROR;if(o||i)return m(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw r}return m(this.acquireTokenWithCachedRefreshToken.bind(this),d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let r=Ie(this.cacheManager.getRefreshToken.bind(this.cacheManager),d.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!r)throw Ui(co);if(r.expiresOn&&Ws(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||dF))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Ui(au);let o=A(g({},e),{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||j.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:ze.HOME_ACCOUNT_ID}});try{return await m(this.acquireToken.bind(this),d.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(i){if(i instanceof be&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),i.subError===lo)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let s=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(s,e.correlationId)}throw i}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientExecuteTokenRequest,e.correlationId);let r=this.createTokenQueryParameters(e),o=V.appendQueryString(t.tokenEndpoint,r),i=await m(this.createTokenRequestBody.bind(this),d.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a=Tr(this.config.authOptions.clientId,e);return m(this.executePostToTokenEndpoint.bind(this),d.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,d.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(d.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=new Map;if(ki(t,e.embeddedClientId||e.tokenBodyParameters?.[On]||this.config.authOptions.clientId),e.redirectUri&&Oi(t,e.redirectUri),Ni(t,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Zl(t,al.REFRESH_TOKEN_GRANT),Li(t),ql(t,this.config.libraryInfo),Kl(t,this.config.telemetry.application),ru(t),this.serverTelemetryManager&&!gh(this.config)&&nu(t,this.serverTelemetryManager),yC(t,e.refreshToken),this.config.clientCredentials.clientSecret&&Yl(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let r=this.config.clientCredentials.clientAssertion;Ql(t,await Nh(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Jl(t,r.assertionType)}if(e.authenticationScheme===j.POP){let r=new gt(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await m(r.generateCnf.bind(r),d.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,eu(t,o)}else if(e.authenticationScheme===j.SSH)if(e.sshJwk)tu(t,e.sshJwk);else throw q(pr);if((!ae.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Pi(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case ze.HOME_ACCOUNT_ID:try{let r=Mn(e.ccsCredential.credential);vr(t,r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case ze.UPN:so(t,e.ccsCredential.credential);break}return e.embeddedClientId&&Er(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Cr(t,e.tokenBodyParameters),Mi(t,e.correlationId,this.performanceClient),Nn(t)}};var lu=class extends ao{constructor(e,t){super(e,t)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(d.SilentFlowClientAcquireCachedToken,e.correlationId);let t=bn.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!ae.isEmptyObj(e.claims))throw this.setCacheOutcome(bn.FORCE_REFRESH_OR_CLAIMS,e.correlationId),v(hr);if(!e.account)throw v(dr);let r=e.account.tenantId||YD(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r);if(i){if(EC(i.cachedAt)||Ws(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(bn.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),v(hr);i.refreshOn&&Ws(i.refreshOn,0)&&(t=bn.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(bn.NO_CACHED_ACCESS_TOKEN,e.correlationId),v(hr);let s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,o,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await m(this.generateResultFromCacheRecord.bind(this),d.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==bn.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){this.performanceClient?.addQueueMeasurement(d.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=gr(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){let o=r?.auth_time;if(!o)throw v(ur);Bl(o,t.maxAge)}return dn.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}};var RC={sendGetRequestAsync:()=>Promise.reject(v(H)),sendPostRequestAsync:()=>Promise.reject(v(H))};var xn={};Ct(xn,{getAuthorizationCodePayload:()=>pF,getAuthorizeUrl:()=>hF,getStandardAuthorizeRequestParameters:()=>fF,validateAuthorizationResponse:()=>ZD});function fF(n,e,t,r){let o=e.correlationId,i=new Map;ki(i,e.embeddedClientId||e.extraQueryParameters?.[On]||n.clientId);let s=[...e.scopes||[],...e.extraScopesToConsent||[]];if(Ni(i,s,!0,n.authority.options.OIDCOptions?.defaultScopes),Oi(i,e.redirectUri),xi(i,o),uC(i,e.responseMode),Li(i),e.prompt&&(pC(i,e.prompt),r?.addFields({prompt:e.prompt},o)),e.domainHint&&(hC(i,e.domainHint),r?.addFields({domainHintFromRequest:!0},o)),e.prompt!==fe.SELECT_ACCOUNT)if(e.sid&&e.prompt===fe.NONE)t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Th(i,e.sid),r?.addFields({sidFromRequest:!0},o);else if(e.account){let a=mF(e.account),c=yF(e.account);if(c&&e.domainHint&&(t.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),c=null),c){t.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Ks(i,c),r?.addFields({loginHintFromClaim:!0},o);try{let l=Mn(e.account.homeAccountId);vr(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===fe.NONE){t.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Th(i,a),r?.addFields({sidFromClaim:!0},o);try{let l=Mn(e.account.homeAccountId);vr(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)t.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Ks(i,e.loginHint),so(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o);else if(e.account.username){t.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Ks(i,e.account.username),r?.addFields({loginHintFromUpn:!0},o);try{let l=Mn(e.account.homeAccountId);vr(i,l)}catch{t.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(t.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Ks(i,e.loginHint),so(i,e.loginHint),r?.addFields({loginHintFromRequest:!0},o));else t.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&gC(i,e.nonce),e.state&&Wl(i,e.state),(e.claims||n.clientCapabilities&&n.clientCapabilities.length>0)&&Pi(i,e.claims,n.clientCapabilities),e.embeddedClientId&&Er(i,n.clientId,n.redirectUri),n.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(qs))&&Xl(i),i}function hF(n,e,t,r){let o=Nn(e,t,r);return V.appendQueryString(n.authorizationEndpoint,o)}function pF(n,e){if(ZD(n,e),!n.code)throw v(gi);return n}function ZD(n,e){if(!n.state||!e)throw n.state?v(Jr,"Cached State"):v(Jr,"Server State");let t,r;try{t=decodeURIComponent(n.state)}catch{throw v(ln,n.state)}try{r=decodeURIComponent(e)}catch{throw v(ln,n.state)}if(t!==r)throw v(si);if(n.error||n.error_description||n.suberror){let o=gF(n);throw Rh(n.error,n.error_description,n.suberror)?new be(n.error||"",n.error_description,n.suberror,n.timestamp||"",n.trace_id||"",n.correlation_id||"",n.claims||"",o):new pt(n.error||"",n.error_description,n.suberror,o)}}function gF(n){let e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+e.length):void 0}function mF(n){return n.idTokenClaims?.sid||null}function yF(n){return n.loginHint||n.idTokenClaims?.login_hint||null}var XD=",",e_="|";function vF(n){let{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]),a=[];if(e?.length){if(a=e.split(XD),a.length<4)return e}else a=Array.from({length:4},()=>e_);return s.forEach((c,l)=>{c.length===2&&c[0]?.length&&c[1]?.length&&CF({skuArr:a,index:l,skuName:c[0],skuVersion:c[1]})}),a.join(XD)}function CF(n){let{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join(e_))}var Bi=class n{constructor(e,t){this.cacheOutcome=bn.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||y.EMPTY_STRING,this.wrapperVer=e.wrapperVer||y.EMPTY_STRING,this.telemetryCacheKey=Ne.CACHE_KEY+cr.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${Ne.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);let o=t.join(Ne.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(Ne.VALUE_SEPARATOR);return[Ne.SCHEMA_VERSION,s,o].join(Ne.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(Ne.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(Ne.VALUE_SEPARATOR),i=e.errors.length,s=t<i?Ne.OVERFLOW_TRUE:Ne.OVERFLOW_FALSE,a=[i,s].join(Ne.VALUE_SEPARATOR);return[Ne.SCHEMA_VERSION,e.cacheHits,r,o,a].join(Ne.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=Ne.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof P?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Ne.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let o={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,o=0,i=e.errors.length;for(t=0;t<i;t++){let s=e.failedRequests[2*t]||y.EMPTY_STRING,a=e.failedRequests[2*t+1]||y.EMPTY_STRING,c=e.errors[t]||y.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+c.length+3,o<Ne.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||y.EMPTY_STRING),e.push(this.regionSource||y.EMPTY_STRING),e.push(this.regionOutcome||y.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return vF(e)}};var kh="missing_kid_error",Oh="missing_alg_error";var EF={[kh]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Oh]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."},MC=class n extends P{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,n.prototype)}};function NC(n){return new MC(n,EF[n])}var uu=class n{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw NC(kh);if(!e.alg)throw NC(Oh);let t=new n({typ:e.typ||lh.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}};var ji="pkce_not_created",du="ear_jwk_empty",Ph="ear_jwe_empty",Vi="crypto_nonexistent",Ln="empty_navigate_uri",Zs="hash_empty_error",uo="no_state_in_hash",Xs="hash_does_not_contain_known_properties",ea="unable_to_parse_state",ta="state_interaction_type_mismatch",na="interaction_in_progress",ra="popup_window_error",oa="empty_window_error",fn="user_cancelled",xh="monitor_popup_timeout",ia="monitor_window_timeout",sa="redirect_in_iframe",aa="block_iframe_reload",ca="block_nested_popups",Lh="iframe_closed_prematurely",Fn="silent_logout_unsupported",la="no_account_error",Fh="silent_prompt_value_error",ua="no_token_request_cache_error",da="unable_to_parse_token_request_cache_error",Uh="auth_request_not_set_error",Hh="invalid_cache_type",Un="non_browser_environment",Hn="database_not_open",wr="no_network_connectivity",fa="post_request_failed",ha="get_request_failed",$i="failed_to_parse_response",pa="unable_to_load_token",fo="crypto_key_not_found",ga="auth_code_required",ma="auth_code_or_nativeAccountId_required",ya="spa_code_and_nativeAccountId_present",ho="database_unavailable",va="unable_to_acquire_token_from_native_platform",Ca="native_handshake_timeout",Ea="native_extension_not_installed",po="native_connection_not_established",Bn="uninitialized_public_client_application",Ta="native_prompt_not_supported",Ia="invalid_base64_string",wa="invalid_pop_token_request",Bh="failed_to_build_headers",jh="failed_to_parse_headers",Aa="failed_to_decrypt_ear_response",zi="timed_out";var Ar="For more visit: aka.ms/msaljs/browser-errors",L={[ji]:"The PKCE code challenge and verifier could not be generated.",[du]:"No EAR encryption key provided. This is unexpected.",[Ph]:"Server response does not contain ear_jwe property. This is unexpected.",[Vi]:"The crypto object or function is not available.",[Ln]:"Navigation URI is empty. Please check stack trace for more info.",[Zs]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Ar}`,[uo]:"Hash does not contain state. Please verify that the request originated from msal.",[Xs]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Ar}`,[ea]:"Unable to parse state. Please verify that the request originated from msal.",[ta]:"Hash contains state but the interaction type does not match the caller.",[na]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Ar}`,[ra]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[oa]:"window.open returned null or undefined window object.",[fn]:"User cancelled the flow.",[xh]:`Token acquisition in popup failed due to timeout.  ${Ar}`,[ia]:`Token acquisition in iframe failed due to timeout.  ${Ar}`,[sa]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[aa]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Ar}`,[ca]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Lh]:"The iframe being monitored was closed prematurely.",[Fn]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[la]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Fh]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[ua]:"No token request found in cache.",[da]:"The cached token request could not be parsed.",[Uh]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Hh]:"Invalid cache type",[Un]:"Login and token requests are not supported in non-browser environments.",[Hn]:"Database is not open!",[wr]:"No network connectivity. Check your internet connection.",[fa]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[ha]:"Network request failed. Please check the network trace to determine root cause.",[$i]:"Failed to parse network response. Check network trace.",[pa]:"Error loading token to cache.",[fo]:"Cryptographic Key or Keypair not found in browser storage.",[ga]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[ma]:"An authorization code or nativeAccountId must be provided to this flow.",[ya]:"Request cannot contain both spa code and native account id.",[ho]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[va]:`Unable to acquire token from native platform.  ${Ar}`,[Ca]:"Timed out while attempting to establish connection to browser extension",[Ea]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[po]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Ar}`,[Bn]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Ar}`,[Ta]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Ia]:"Invalid base64 encoded string.",[wa]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Bh]:"Failed to build request headers object.",[jh]:"Failed to parse response headers",[Aa]:"Failed to decrypt ear response",[zi]:"The request timed out."},x7={pkceNotGenerated:{code:ji,desc:L[ji]},cryptoDoesNotExist:{code:Vi,desc:L[Vi]},emptyNavigateUriError:{code:Ln,desc:L[Ln]},hashEmptyError:{code:Zs,desc:L[Zs]},hashDoesNotContainStateError:{code:uo,desc:L[uo]},hashDoesNotContainKnownPropertiesError:{code:Xs,desc:L[Xs]},unableToParseStateError:{code:ea,desc:L[ea]},stateInteractionTypeMismatchError:{code:ta,desc:L[ta]},interactionInProgress:{code:na,desc:L[na]},popupWindowError:{code:ra,desc:L[ra]},emptyWindowError:{code:oa,desc:L[oa]},userCancelledError:{code:fn,desc:L[fn]},monitorPopupTimeoutError:{code:xh,desc:L[xh]},monitorIframeTimeoutError:{code:ia,desc:L[ia]},redirectInIframeError:{code:sa,desc:L[sa]},blockTokenRequestsInHiddenIframeError:{code:aa,desc:L[aa]},blockAcquireTokenInPopupsError:{code:ca,desc:L[ca]},iframeClosedPrematurelyError:{code:Lh,desc:L[Lh]},silentLogoutUnsupportedError:{code:Fn,desc:L[Fn]},noAccountError:{code:la,desc:L[la]},silentPromptValueError:{code:Fh,desc:L[Fh]},noTokenRequestCacheError:{code:ua,desc:L[ua]},unableToParseTokenRequestCacheError:{code:da,desc:L[da]},authRequestNotSet:{code:Uh,desc:L[Uh]},invalidCacheType:{code:Hh,desc:L[Hh]},notInBrowserEnvironment:{code:Un,desc:L[Un]},databaseNotOpen:{code:Hn,desc:L[Hn]},noNetworkConnectivity:{code:wr,desc:L[wr]},postRequestFailed:{code:fa,desc:L[fa]},getRequestFailed:{code:ha,desc:L[ha]},failedToParseNetworkResponse:{code:$i,desc:L[$i]},unableToLoadTokenError:{code:pa,desc:L[pa]},signingKeyNotFoundInStorage:{code:fo,desc:L[fo]},authCodeRequired:{code:ga,desc:L[ga]},authCodeOrNativeAccountRequired:{code:ma,desc:L[ma]},spaCodeAndNativeAccountPresent:{code:ya,desc:L[ya]},databaseUnavailable:{code:ho,desc:L[ho]},unableToAcquireTokenFromNativePlatform:{code:va,desc:L[va]},nativeHandshakeTimeout:{code:Ca,desc:L[Ca]},nativeExtensionNotInstalled:{code:Ea,desc:L[Ea]},nativeConnectionNotEstablished:{code:po,desc:L[po]},uninitializedPublicClientApplication:{code:Bn,desc:L[Bn]},nativePromptNotSupported:{code:Ta,desc:L[Ta]},invalidBase64StringError:{code:Ia,desc:L[Ia]},invalidPopTokenRequest:{code:wa,desc:L[wa]}},Gi=class n extends P{constructor(e,t){super(e,L[e],t),Object.setPrototypeOf(this,n.prototype),this.name="BrowserAuthError"}};function T(n,e){return new Gi(n,e)}var ge={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},it={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS",MICROSOFT_ENTRA_BROKERID:"MicrosoftEntra",DOM_API_NAME:"DOM API",PLATFORM_DOM_APIS:"get-token-and-sign-out",PLATFORM_DOM_PROVIDER:"PlatformAuthDOMHandler",PLATFORM_EXTENSION_PROVIDER:"PlatformAuthExtensionHandler"},Sa={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},de={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},kC={GET:"GET",POST:"POST"},hn={SIGNIN:"signin",SIGNOUT:"signout"},me={ORIGIN_URI:"request.origin",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",VERIFIER:"code.verifier",INTERACTION_STATUS_KEY:"interaction.status",NATIVE_REQUEST:"request.native"},fu={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},W={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962},M=(function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n})(M||{});var OC={scopes:kt},PC="jwk";var Vh="msal.db",t_=1,n_=`${Vh}.keys`,Be={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},r_=[Be.Default,Be.Skip,Be.RefreshTokenAndNetwork];function hu(n){return encodeURIComponent(go(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Gt(n){return o_(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function go(n){return o_(new TextEncoder().encode(n))}function o_(n){let e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}function Re(n){return new TextDecoder().decode(jn(n))}function jn(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw T(Ia)}let t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}var TF="RSASSA-PKCS1-v1_5",Da="AES-GCM",a_="HKDF",LC="SHA-256",IF=2048,wF=new Uint8Array([1,0,1]),i_="0123456789abcdef",s_=new Uint32Array(1),FC="raw",c_="encrypt",UC="decrypt",AF="deriveKey",SF="crypto_subtle_undefined",HC={name:TF,hash:LC,modulusLength:IF,publicExponent:wF};function l_(n){if(!window)throw T(Un);if(!window.crypto)throw T(Vi);if(!n&&!window.crypto.subtle)throw T(Vi,SF)}async function BC(n,e,t){e?.addQueueMeasurement(d.Sha256Digest,t);let o=new TextEncoder().encode(n);return window.crypto.subtle.digest(LC,o)}function u_(n){return window.crypto.getRandomValues(n)}function xC(){return window.crypto.getRandomValues(s_),s_[0]}function Oe(){let n=Date.now(),e=xC()*1024+(xC()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=xC();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=i_.charAt(t[a]>>>4),s+=i_.charAt(t[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}async function d_(n,e){return window.crypto.subtle.generateKey(HC,n,e)}async function $h(n){return window.crypto.subtle.exportKey(PC,n)}async function f_(n,e,t){return window.crypto.subtle.importKey(PC,n,HC,e,t)}async function h_(n,e){return window.crypto.subtle.sign(HC,n,e)}async function _a(){let n=await jC(),t={alg:"dir",kty:"oct",k:Gt(new Uint8Array(n))};return go(JSON.stringify(t))}async function DF(n){let e=Re(n),r=JSON.parse(e).k,o=jn(r);return window.crypto.subtle.importKey(FC,o,Da,!1,[UC])}async function p_(n,e){let t=e.split(".");if(t.length!==5)throw T(Aa,"jwe_length");let r=await DF(n).catch(()=>{throw T(Aa,"import_key")});try{let o=new TextEncoder().encode(t[0]),i=jn(t[2]),s=jn(t[3]),a=jn(t[4]),c=a.byteLength*8,l=new Uint8Array(s.length+a.length);l.set(s),l.set(a,s.length);let u=await window.crypto.subtle.decrypt({name:Da,iv:i,tagLength:c,additionalData:o},r,l);return new TextDecoder().decode(u)}catch{throw T(Aa,"decrypt")}}async function jC(){let n=await window.crypto.subtle.generateKey({name:Da,length:256},!0,[c_,UC]);return window.crypto.subtle.exportKey(FC,n)}async function VC(n){return window.crypto.subtle.importKey(FC,n,a_,!1,[AF])}async function g_(n,e,t){return window.crypto.subtle.deriveKey({name:a_,salt:e,hash:LC,info:new TextEncoder().encode(t)},n,{name:Da,length:256},!1,[c_,UC])}async function m_(n,e,t){let r=new TextEncoder().encode(e),o=window.crypto.getRandomValues(new Uint8Array(16)),i=await g_(n,o,t),s=await window.crypto.subtle.encrypt({name:Da,iv:new Uint8Array(12)},i,r);return{data:Gt(new Uint8Array(s)),nonce:Gt(o)}}async function $C(n,e,t,r){let o=jn(r),i=await g_(n,jn(e),t),s=await window.crypto.subtle.decrypt({name:Da,iv:new Uint8Array(12)},i,o);return new TextDecoder().decode(s)}async function zh(n){let e=await BC(n),t=new Uint8Array(e);return Gt(t)}var mo="storage_not_supported",Gh="stubbed_public_client_application_called",ba="in_mem_redirect_unavailable";var qh={[mo]:"Given storage configuration option was not supported.",[Gh]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[ba]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},X7={storageNotSupportedError:{code:mo,desc:qh[mo]},stubPcaInstanceCalled:{code:Gh,desc:qh[Gh]},inMemRedirectUnavailable:{code:ba,desc:qh[ba]}},zC=class n extends P{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,n.prototype)}};function Ra(n){return new zC(n,qh[n])}function Kh(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function y_(n){let e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function Wh(){return window.parent!==window}function _F(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${ge.POPUP_NAME_PREFIX}.`)===0}function mt(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function v_(){let e=new V(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function bF(){if(V.hashContainsKnownProperties(window.location.hash)&&Wh())throw T(aa)}function RF(n){if(Wh()&&!n)throw T(sa)}function MF(){if(_F())throw T(ca)}function GC(){if(typeof window>"u")throw T(Un)}function qC(n){if(!n)throw T(Bn)}function Yh(n){GC(),bF(),MF(),qC(n)}function KC(n,e){if(Yh(n),RF(e.system.allowRedirectInIframe),e.cache.cacheLocation===de.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw Ra(ba)}function Qh(n){let e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function C_(){return Oe()}var cZ=Te.addClientCapabilitiesToClaims;var Jh=class n{navigateInternal(e,t){return n.defaultNavigateWindow(e,t)}navigateExternal(e,t){return n.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((r,o)=>{setTimeout(()=>{o(T(zi,"failed_to_redirect"))},t.timeout)})}};var Zh=class{async sendGetRequestAsync(e,t){let r,o={},i=0,s=E_(t);try{r=await fetch(e,{method:kC.GET,headers:s})}catch(a){throw Fi(T(window.navigator.onLine?ha:wr),void 0,void 0,a)}o=T_(r.headers);try{return i=r.status,{headers:o,body:await r.json(),status:i}}catch(a){throw Fi(T($i),i,o,a)}}async sendPostRequestAsync(e,t){let r=t&&t.body||"",o=E_(t),i,s=0,a={};try{i=await fetch(e,{method:kC.POST,headers:o,body:r})}catch(c){throw Fi(T(window.navigator.onLine?fa:wr),void 0,void 0,c)}a=T_(i.headers);try{return s=i.status,{headers:a,body:await i.json(),status:s}}catch(c){throw Fi(T($i),s,a,c)}}};function E_(n){try{let e=new Headers;if(!(n&&n.headers))return e;let t=n.headers;return Object.entries(t).forEach(([r,o])=>{e.append(r,o)}),e}catch(e){throw Fi(T(Bh),void 0,void 0,e)}}function T_(n){try{let e={};return n.forEach((t,r)=>{e[r]=t}),e}catch{throw T(jh)}}var NF=6e4,Xh=1e4,kF=3e4,WC=2e3;function I_({auth:n,cache:e,system:t,telemetry:r},o){let i={clientId:y.EMPTY_STRING,authority:`${y.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:y.EMPTY_STRING,authorityMetadata:y.EMPTY_STRING,redirectUri:typeof window<"u"?mt():"",postLogoutRedirectUri:y.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:ce.AAD,OIDCOptions:{serverResponseType:_n.FRAGMENT,defaultScopes:[y.OPENID_SCOPE,y.PROFILE_SCOPE,y.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:to.None,tenant:y.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},s={cacheLocation:de.SessionStorage,cacheRetentionDays:5,temporaryCacheLocation:de.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===de.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:re.Info,piiLoggingEnabled:!1},c=A(g({},ph),{loggerOptions:a,networkClient:o?new Zh:RC,navigationClient:new Jh,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||NF,iframeHashTimeout:t?.loadFrameTimeout||Xh,navigateFrameWait:0,redirectNavigationTimeout:kF,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||WC,pollIntervalMilliseconds:ge.DEFAULT_POLL_INTERVAL_MS}),l=A(g(g({},c),t),{loggerOptions:t?.loggerOptions||a}),u={application:{appName:y.EMPTY_STRING,appVersion:y.EMPTY_STRING},client:new mr};if(n?.protocolMode!==ce.OIDC&&n?.OIDCOptions&&new nt(l.loggerOptions).warning(JSON.stringify(q(rt.cannotSetOIDCOptions))),n?.protocolMode&&n.protocolMode===ce.OIDC&&l?.allowPlatformBroker)throw q(rt.cannotAllowPlatformBroker);return{auth:A(g(g({},i),n),{OIDCOptions:g(g({},i.OIDCOptions),n?.OIDCOptions)}),cache:g(g({},s),e),system:l,telemetry:g(g({},u),r)}}var w_="@azure/msal-browser",Pt="4.26.2";var Me="msal",ep="browser";var D_=`${Me}.${ep}.log.level`,__=`${Me}.${ep}.log.pii`,DZ=`${Me}.${ep}.performance.enabled`,b_=`${Me}.${ep}.platform.auth.dom`,YC=`${Me}.version`,A_="account.keys",S_="token.keys";function Sr(n=2){return n<1?`${Me}.${A_}`:`${Me}.${n}.${A_}`}function Dr(n,e=2){return e<1?`${Me}.${S_}.${n}`:`${Me}.${e}.${S_}.${n}`}var tp=class n{static loggerCallback(e,t){switch(e){case re.Error:console.error(t);return;case re.Info:console.info(t);return;case re.Verbose:console.debug(t);return;case re.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=I_(e,this.browserEnvironment);let t;try{t=window[de.SessionStorage]}catch{}let r=t?.getItem(D_),o=t?.getItem(__)?.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,s=g({},this.config.system.loggerOptions),a=r&&Object.keys(re).includes(r)?re[r]:void 0;a&&(s.loggerCallback=n.loggerCallback,s.logLevel=a),i!==void 0&&(s.piiLoggingEnabled=i),this.logger=new nt(s,w_,Pt),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}};var np=(()=>{class n extends tp{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}async initialize(){return this.available=typeof window<"u",this.available}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();var rp=class{constructor(){this.dbName=Vh,this.version=t_,this.tableName=n_,this.dbOpen=!1}async open(){return new Promise((e,t)=>{let r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{let i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(T(ho)))})}closeConnection(){let e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(T(Hn));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async setItem(e,t){return await this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(T(Hn));let a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),o(c)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(T(Hn));let s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),t()}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(T(Hn));let i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{let a=s;this.closeConnection(),e(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),t(s)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(T(Hn));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{let c=a;this.closeConnection(),t(c.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{let r=window.indexedDB.deleteDatabase(Vh),o=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),t(!1)))})}};var _r=class{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){let e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}};var op=class{constructor(e){this.inMemoryCache=new _r,this.indexedDBCache=new rp,this.logger=e}handleDatabaseAccessError(e){if(e instanceof Gi&&e.errorCode===ho)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){let t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}}async getKeys(){let e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e}async containsKey(e){let t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");let e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}};var Ma=(()=>{class n{constructor(t,r,o){this.logger=t,l_(o??!1),this.cache=new op(this.logger),this.performanceClient=r}createNewGuid(){return Oe()}base64Encode(t){return go(t)}base64Decode(t){return Re(t)}base64UrlEncode(t){return hu(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}async getPublicKeyThumbprint(t){let r=this.performanceClient?.startMeasurement(d.CryptoOptsGetPublicKeyThumbprint,t.correlationId),o=await d_(n.EXTRACTABLE,n.POP_KEY_USAGES),i=await $h(o.publicKey),s={e:i.e,kty:i.kty,n:i.n},a=R_(s),c=await this.hashString(a),l=await $h(o.privateKey),u=await f_(l,!1,["sign"]);return await this.cache.setItem(c,{privateKey:u,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),r&&r.end({success:!0}),c}async removeTokenBindingKey(t){if(await this.cache.removeItem(t),await this.cache.containsKey(t))throw v(ke.bindingKeyNotRemoved)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(t,r,o,i){let s=this.performanceClient?.startMeasurement(d.CryptoOptsSignJwt,i),a=await this.cache.getItem(r);if(!a)throw T(fo);let c=await $h(a.publicKey),l=R_(c),u=hu(JSON.stringify({kid:r})),f=uu.getShrHeaderString(A(g({},o?.header),{alg:c.alg,kid:u})),p=hu(f);t.cnf={jwk:JSON.parse(l)};let h=hu(JSON.stringify(t)),E=`${p}.${h}`,w=new TextEncoder().encode(E),S=await h_(a.privateKey,w),G=Gt(new Uint8Array(S)),ie=`${E}.${G}`;return s&&s.end({success:!0}),ie}async hashString(t){return zh(t)}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function R_(n){return JSON.stringify(n,Object.keys(n).sort())}var OF=1440*60*1e3,ip={Lax:"Lax",None:"None"},Na=class{initialize(){return Promise.resolve()}getItem(e){let t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===t)return c}return""}getUserData(){throw v(ke.methodNotImplemented)}setItem(e,t,r,o=!0,i=ip.Lax){let s=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${i};`;if(r){let a=PF(r);s+=`expires=${a};`}(o||i===ip.None)&&(s+="Secure;"),document.cookie=s}async setUserData(){return Promise.reject(v(ke.methodNotImplemented))}removeItem(e){this.setItem(e,"",-1)}getKeys(){let e=document.cookie.split(";"),t=[];return e.forEach(r=>{let o=decodeURIComponent(r).trim().split("=");t.push(o[0])}),t}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}};function PF(n){let e=new Date;return new Date(e.getTime()+n*OF).toUTCString()}function Vn(n,e){let t=n.getItem(Sr(e));return t?JSON.parse(t):[]}function xt(n,e,t){let r=e.getItem(Dr(n,t));if(r){let o=JSON.parse(r);if(o&&o.hasOwnProperty("idToken")&&o.hasOwnProperty("accessToken")&&o.hasOwnProperty("refreshToken"))return o}return{idToken:[],accessToken:[],refreshToken:[]}}function ka(n){return n.hasOwnProperty("id")&&n.hasOwnProperty("nonce")&&n.hasOwnProperty("data")}var M_="msal.cache.encryption",xF="msal.broadcast.cache",sp=class{constructor(e,t,r){if(!window.localStorage)throw Ra(mo);this.memoryStorage=new _r,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel(xF)}async initialize(e){let t=new Na,r=t.getItem(M_),o={key:"",id:""};if(r)try{o=JSON.parse(r)}catch{}if(o.key&&o.id){let i=Ie(jn,d.Base64Decode,this.logger,this.performanceClient,e)(o.key);this.encryptionCookie={id:o.id,key:await m(VC,d.GenerateHKDF,this.logger,this.performanceClient,e)(i)}}else{let i=Oe(),s=await m(jC,d.GenerateBaseKey,this.logger,this.performanceClient,e)(),a=Ie(Gt,d.UrlEncodeArr,this.logger,this.performanceClient,e)(new Uint8Array(s));this.encryptionCookie={id:i,key:await m(VC,d.GenerateHKDF,this.logger,this.performanceClient,e)(s)};let c={id:i,key:a};t.setItem(M_,JSON.stringify(c),0,!0,ip.None)}await m(this.importExistingCache.bind(this),d.ImportExistingCache,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw T(Bn);return this.memoryStorage.getItem(e)}async decryptData(e,t,r){if(!this.initialized||!this.encryptionCookie)throw T(Bn);if(t.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},r),null;let o=await m($C,d.Decrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t.nonce,this.getContext(e),t.data);if(!o)return null;try{return A(g({},JSON.parse(o)),{lastUpdatedAt:t.lastUpdatedAt})}catch{return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},r),null}}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,r,o,i){if(!this.initialized||!this.encryptionCookie)throw T(Bn);if(i)this.setItem(e,t);else{let{data:s,nonce:a}=await m(m_,d.Encrypt,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t,this.getContext(e)),c={id:this.encryptionCookie.id,nonce:a,data:s,lastUpdatedAt:o};this.setItem(e,JSON.stringify(c))}this.memoryStorage.setItem(e,t),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear(),Vn(this).forEach(r=>this.removeItem(r));let t=xt(this.clientId,this);t.idToken.forEach(r=>this.removeItem(r)),t.accessToken.forEach(r=>this.removeItem(r)),t.refreshToken.forEach(r=>this.removeItem(r)),this.getKeys().forEach(r=>{(r.startsWith(Me)||r.indexOf(this.clientId)!==-1)&&this.removeItem(r)})}async importExistingCache(e){if(!this.encryptionCookie)return;let t=Vn(this);t=await this.importArray(t,e),t.length?this.setItem(Sr(),JSON.stringify(t)):this.removeItem(Sr());let r=xt(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),r.idToken.length||r.accessToken.length||r.refreshToken.length?this.setItem(Dr(this.clientId),JSON.stringify(r)):this.removeItem(Dr(this.clientId))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;let r=this.getItem(e);if(!r)return null;let o;try{o=JSON.parse(r)}catch{return null}return ka(o)?o.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):(this.performanceClient.incrementFields({encryptedCacheCount:1},t),m($C,d.Decrypt,this.logger,this.performanceClient,t)(this.encryptionCookie.key,o.nonce,this.getContext(e),o.data)):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),r)}async importArray(e,t){let r=[],o=[];return e.forEach(i=>{let s=this.getItemFromEncryptedCache(i,t).then(a=>{a?(this.memoryStorage.setItem(i,a),r.push(i)):this.removeItem(i)});o.push(s)}),await Promise.all(o),r}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");let t=this.performanceClient.startMeasurement(d.LocalStorageUpdated);t.add({isBackground:!0});let{key:r,value:o,context:i}=e.data;if(!r){this.logger.error("Broadcast event missing key"),t.end({success:!1,errorCode:"noKey"});return}if(i&&i!==this.clientId){this.logger.trace(`Ignoring broadcast event from clientId: ${i}`),t.end({success:!1,errorCode:"contextMismatch"});return}o?(this.memoryStorage.setItem(r,o),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),t.end({success:!0})}};var ap=class{constructor(){if(!window.sessionStorage)throw Ra(mo)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}};var R={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache",BROKER_CONNECTION_ESTABLISHED:"msal:brokerConnectionEstablished"};function br(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Oa=class extends Ri{constructor(e,t,r,o,i,s,a){super(e,r,o,i,a),this.cacheConfig=t,this.logger=o,this.internalStorage=new _r,this.browserStorage=k_(e,t.cacheLocation,o,i),this.temporaryCacheStorage=k_(e,t.temporaryCacheLocation,o,i),this.cookieStorage=new Na,this.eventHandler=s}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){let t=Vn(this.browserStorage),r=xt(this.clientId,this.browserStorage);this.performanceClient.addFields({preMigrateAcntCount:t.length,preMigrateATCount:r.accessToken.length,preMigrateITCount:r.idToken.length,preMigrateRTCount:r.refreshToken.length},e);for(let i=0;i<2;i++){let s=i;await this.removeStaleAccounts(i,s,e)}for(let i=0;i<2;i++){let s=i;await this.migrateIdTokens(i,s,e)}let o=this.getKMSIValues();for(let i=0;i<2;i++)await this.migrateAccessTokens(i,o,e),await this.migrateRefreshTokens(i,o,e);t=Vn(this.browserStorage),r=xt(this.clientId,this.browserStorage),this.performanceClient.addFields({postMigrateAcntCount:t.length,postMigrateATCount:r.accessToken.length,postMigrateITCount:r.idToken.length,postMigrateRTCount:r.refreshToken.length},e)}async updateOldEntry(e,t){let r=this.browserStorage.getItem(e),o=this.validateAndParseJson(r||"");if(!o)return this.browserStorage.removeItem(e),null;if(!o.lastUpdatedAt)o.lastUpdatedAt=Date.now().toString(),this.setItem(e,JSON.stringify(o),t);else if(_e.isCacheExpired(o.lastUpdatedAt,this.cacheConfig.cacheRetentionDays))return this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null;let i=ka(o)?await this.browserStorage.decryptData(e,o,t):o;return!i||!pe.isCredentialEntity(i)?(this.performanceClient.incrementFields({invalidCacheCount:1},t),null):(pe.isAccessTokenEntity(i)||pe.isRefreshTokenEntity(i))&&i.expiresOn&&_e.isTokenExpired(i.expiresOn,ll)?(this.browserStorage.removeItem(e),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},t),null):i}async removeStaleAccounts(e,t,r){let o=Vn(this.browserStorage,e);if(o.length!==0){for(let i of[...o]){this.performanceClient.incrementFields({oldAcntCount:1},r);let s=this.browserStorage.getItem(i),a=this.validateAndParseJson(s||"");if(!a){br(o,i);continue}if(a.lastUpdatedAt)_e.isCacheExpired(a.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)&&(await this.removeAccountOldSchema(i,a,t,r),br(o,i));else{a.lastUpdatedAt=Date.now().toString(),this.setItem(i,JSON.stringify(a),r);continue}}this.setAccountKeys(o,r,e)}}async removeAccountOldSchema(e,t,r,o){let s=(ka(t)?await this.browserStorage.decryptData(e,t,o):t)?.homeAccountId;if(s){let a=this.getTokenKeys(r);[...a.idToken].filter(c=>c.includes(s)).forEach(c=>{this.browserStorage.removeItem(c),br(a.idToken,c)}),[...a.accessToken].filter(c=>c.includes(s)).forEach(c=>{this.browserStorage.removeItem(c),br(a.accessToken,c)}),[...a.refreshToken].filter(c=>c.includes(s)).forEach(c=>{this.browserStorage.removeItem(c),br(a.refreshToken,c)}),this.setTokenKeys(a,o,r)}this.performanceClient.incrementFields({expiredAcntRemovedCount:1},o),this.browserStorage.removeItem(e)}getKMSIValues(){let e={},t=this.getTokenKeys().idToken;for(let r of t){let o=this.browserStorage.getUserData(r);if(o){let i=JSON.parse(o),s=Ee.extractTokenClaims(i.secret,Re);s&&(e[i.homeAccountId]=Ee.isKmsi(s))}}return e}async migrateIdTokens(e,t,r){let o=xt(this.clientId,this.browserStorage,e);if(o.idToken.length===0)return;let i=xt(this.clientId,this.browserStorage,2),s=Vn(this.browserStorage),a=Vn(this.browserStorage,t);for(let c of[...o.idToken]){this.performanceClient.incrementFields({oldITCount:1},r);let l=await this.updateOldEntry(c,r);if(!l){br(o.idToken,c);continue}let u=s.find(G=>G.includes(l.homeAccountId)),f=a.find(G=>G.includes(l.homeAccountId)),p=null;if(u)p=this.getAccount(u,r);else if(f){let G=this.browserStorage.getItem(f),ie=this.validateAndParseJson(G||"");p=ie&&ka(ie)?await this.browserStorage.decryptData(f,ie,r):ie}if(!p){this.performanceClient.incrementFields({skipITMigrateCount:1},r);continue}let h=Ee.extractTokenClaims(l.secret,Re),E=this.generateCredentialKey(l),I=this.getIdTokenCredential(E,r),w=Object.keys(h).includes("signin_state"),S=I&&Object.keys(Ee.extractTokenClaims(I.secret,Re)||{}).includes("signin_state");if(!I||l.lastUpdatedAt>I.lastUpdatedAt&&(w||!S)){let G=p.tenantProfiles||[],ie=bi(h)||p.realm;if(ie&&!G.find($n=>$n.tenantId===ie)){let $n=oo(p.homeAccountId,p.localAccountId,ie,h);G.push($n)}p.tenantProfiles=G;let Z=this.generateAccountKey(oe.getAccountInfo(p)),Ge=Ee.isKmsi(h);await this.setUserData(Z,JSON.stringify(p),r,p.lastUpdatedAt,Ge),s.includes(Z)||s.push(Z),await this.setUserData(E,JSON.stringify(l),r,l.lastUpdatedAt,Ge),this.performanceClient.incrementFields({migratedITCount:1},r),i.idToken.push(E)}}this.setTokenKeys(o,r,e),this.setTokenKeys(i,r),this.setAccountKeys(s,r)}async migrateAccessTokens(e,t,r){let o=xt(this.clientId,this.browserStorage,e);if(o.accessToken.length===0)return;let i=xt(this.clientId,this.browserStorage,2);for(let s of[...o.accessToken]){this.performanceClient.incrementFields({oldATCount:1},r);let a=await this.updateOldEntry(s,r);if(!a){br(o.accessToken,s);continue}if(!Object.keys(t).includes(a.homeAccountId)){this.performanceClient.incrementFields({skipATMigrateCount:1},r);continue}let c=this.generateCredentialKey(a),l=t[a.homeAccountId];if(!i.accessToken.includes(c))await this.setUserData(c,JSON.stringify(a),r,a.lastUpdatedAt,l),this.performanceClient.incrementFields({migratedATCount:1},r),i.accessToken.push(c);else{let u=this.getAccessTokenCredential(c,r);(!u||a.lastUpdatedAt>u.lastUpdatedAt)&&(await this.setUserData(c,JSON.stringify(a),r,a.lastUpdatedAt,l),this.performanceClient.incrementFields({migratedATCount:1},r))}}this.setTokenKeys(o,r,e),this.setTokenKeys(i,r)}async migrateRefreshTokens(e,t,r){let o=xt(this.clientId,this.browserStorage,e);if(o.refreshToken.length===0)return;let i=xt(this.clientId,this.browserStorage,2);for(let s of[...o.refreshToken]){this.performanceClient.incrementFields({oldRTCount:1},r);let a=await this.updateOldEntry(s,r);if(!a){br(o.refreshToken,s);continue}if(!Object.keys(t).includes(a.homeAccountId)){this.performanceClient.incrementFields({skipRTMigrateCount:1},r);continue}let c=this.generateCredentialKey(a),l=t[a.homeAccountId];if(!i.refreshToken.includes(c))await this.setUserData(c,JSON.stringify(a),r,a.lastUpdatedAt,l),this.performanceClient.incrementFields({migratedRTCount:1},r),i.refreshToken.push(c);else{let u=this.getRefreshTokenCredential(c,r);(!u||a.lastUpdatedAt>u.lastUpdatedAt)&&(await this.setUserData(c,JSON.stringify(a),r,a.lastUpdatedAt,l),this.performanceClient.incrementFields({migratedRTCount:1},r))}}this.setTokenKeys(o,r,e),this.setTokenKeys(i,r)}trackVersionChanges(e){let t=this.browserStorage.getItem(YC);t&&(this.logger.info(`MSAL.js was last initialized by version: ${t}`),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==Pt&&this.setItem(YC,Pt,e)}validateAndParseJson(e){if(!e)return null;try{let t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}setItem(e,t,r){let o=new Array(3).fill(0),i=[],s=20;for(let a=0;a<=s;a++)try{if(this.browserStorage.setItem(e,t),a>0)for(let c=0;c<=2;c++){let l=o.slice(0,c).reduce((f,p)=>f+p,0);if(l>=a)break;let u=a>l+o[c]?l+o[c]:a;a>l&&o[c]>0&&this.removeAccessTokenKeys(i.slice(l,u),r,c)}break}catch(c){let l=Gs(c);if(l.errorCode===$l.cacheQuotaExceeded&&a<s){if(!i.length)for(let u=0;u<=2;u++)if(e===Dr(this.clientId,u)){let f=JSON.parse(t).accessToken;i.push(...f),o[u]=f.length}else{let f=this.getTokenKeys(u).accessToken;i.push(...f),o[u]=f.length}if(i.length<=a)throw l;this.removeAccessToken(i[a],r,!1)}else throw l}}async setUserData(e,t,r,o,i){let s=new Array(3).fill(0),a=[],c=20;for(let l=0;l<=c;l++)try{if(await m(this.browserStorage.setUserData.bind(this.browserStorage),d.SetUserData,this.logger,this.performanceClient)(e,t,r,o,i),l>0)for(let u=0;u<=2;u++){let f=s.slice(0,u).reduce((h,E)=>h+E,0);if(f>=l)break;let p=l>f+s[u]?f+s[u]:l;l>f&&s[u]>0&&this.removeAccessTokenKeys(a.slice(f,p),r,u)}break}catch(u){let f=Gs(u);if(f.errorCode===$l.cacheQuotaExceeded&&l<c){if(!a.length)for(let p=0;p<=2;p++){let h=this.getTokenKeys(p).accessToken;a.push(...h),s[p]=h.length}if(a.length<=l)throw f;this.removeAccessToken(a[l],r,!1)}else throw f}}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");let r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,t),null;let o=this.validateAndParseJson(r);return!o||!oe.isAccountEntity(o)?null:Ri.toObject(new oe,o)}async setAccount(e,t,r){this.logger.trace("BrowserCacheManager.setAccount called");let o=this.generateAccountKey(oe.getAccountInfo(e)),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(o,JSON.stringify(e),t,i,r);let s=this.addAccountKeyToMap(o,t);this.performanceClient.addFields({kmsi:r},t),this.cacheConfig.cacheLocation===de.LocalStorage&&s&&this.eventHandler.emitEvent(R.ACCOUNT_ADDED,void 0,oe.getAccountInfo(e))}getAccountKeys(){return Vn(this.browserStorage)}setAccountKeys(e,t,r=2){e.length===0?this.removeItem(Sr(r)):this.setItem(Sr(r),JSON.stringify(e),t)}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);let r=this.getAccountKeys();return r.indexOf(e)===-1?(r.push(e),this.setItem(Sr(),JSON.stringify(r),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);let r=this.getAccountKeys(),o=r.indexOf(e);o>-1?(r.splice(o,1),this.setAccountKeys(r,t),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){let r=this.getActiveAccount(t);r?.homeAccountId===e.homeAccountId&&r?.environment===e.environment&&this.setActiveAccount(null,t),super.removeAccount(e,t),this.removeAccountKeyFromMap(this.generateAccountKey(e),t),this.browserStorage.getKeys().forEach(o=>{o.includes(e.homeAccountId)&&o.includes(e.environment)&&this.browserStorage.removeItem(o)}),this.cacheConfig.cacheLocation===de.LocalStorage&&this.eventHandler.emitEvent(R.ACCOUNT_REMOVED,void 0,e)}removeIdToken(e,t){super.removeIdToken(e,t);let r=this.getTokenKeys(),o=r.idToken.indexOf(e);o>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(o,1),this.setTokenKeys(r,t))}removeAccessToken(e,t,r=!0){super.removeAccessToken(e,t),r&&this.removeAccessTokenKeys([e],t)}removeAccessTokenKeys(e,t,r=2){this.logger.trace("removeAccessTokenKey called");let o=this.getTokenKeys(r),i=0;if(e.forEach(s=>{let a=o.accessToken.indexOf(s);a>-1&&(o.accessToken.splice(a,1),i++)}),i>0){this.logger.info(`removed ${i} accessToken keys from tokenKeys map`),this.setTokenKeys(o,t,r);return}}removeRefreshToken(e,t){super.removeRefreshToken(e,t);let r=this.getTokenKeys(),o=r.refreshToken.indexOf(e);o>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(o,1),this.setTokenKeys(r,t))}getTokenKeys(e=2){return xt(this.clientId,this.browserStorage,e)}setTokenKeys(e,t,r=2){if(e.idToken.length===0&&e.accessToken.length===0&&e.refreshToken.length===0){this.removeItem(Dr(this.clientId,r));return}else this.setItem(Dr(this.clientId,r),JSON.stringify(e),t)}getIdTokenCredential(e,t){let r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;let o=this.validateAndParseJson(r);return!o||!pe.isIdTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o)}async setIdTokenCredential(e,t,r){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");let o=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(o,JSON.stringify(e),t,i,r);let s=this.getTokenKeys();s.idToken.indexOf(o)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),s.idToken.push(o),this.setTokenKeys(s,t))}getAccessTokenCredential(e,t){let r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],t),null;let o=this.validateAndParseJson(r);return!o||!pe.isAccessTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o)}async setAccessTokenCredential(e,t,r){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");let o=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(o,JSON.stringify(e),t,i,r);let s=this.getTokenKeys(),a=s.accessToken.indexOf(o);a!==-1&&s.accessToken.splice(a,1),this.logger.trace(`access token ${a===-1?"added to":"updated in"} map`),s.accessToken.push(o),this.setTokenKeys(s,t)}getRefreshTokenCredential(e,t){let r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,t),null;let o=this.validateAndParseJson(r);return!o||!pe.isRefreshTokenEntity(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o)}async setRefreshTokenCredential(e,t,r){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");let o=this.generateCredentialKey(e),i=Date.now().toString();e.lastUpdatedAt=i,await this.setUserData(o,JSON.stringify(e),t,i,r);let s=this.getTokenKeys();s.refreshToken.indexOf(o)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),s.refreshToken.push(o),this.setTokenKeys(s,t))}getAppMetadata(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!pe.isAppMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");let r=pe.generateAppMetadataKey(e);this.setItem(r,JSON.stringify(e),t)}getServerTelemetry(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!pe.isServerTelemetryEntity(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),r)}getAuthorityMetadata(e){let t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;let r=this.validateAndParseJson(t);return r&&pe.isAuthorityMetadataEntity(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(fu.WRAPPER_SKU,e),this.internalStorage.setItem(fu.WRAPPER_VER,t)}getWrapperMetadata(){let e=this.internalStorage.getItem(fu.WRAPPER_SKU)||y.EMPTY_STRING,t=this.internalStorage.getItem(fu.WRAPPER_VER)||y.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){let t=this.generateCacheKey(ih.ACTIVE_ACCOUNT_FILTERS),r=this.browserStorage.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;let o=this.validateAndParseJson(r);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){let r=this.generateCacheKey(ih.ACTIVE_ACCOUNT_FILTERS);if(e){this.logger.verbose("setActiveAccount: Active account set");let o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:_e.nowSeconds().toString()};this.setItem(r,JSON.stringify(o),t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(R.ACTIVE_ACCOUNT_CHANGED)}getThrottlingCache(e){let t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;let r=this.validateAndParseJson(t);return!r||!pe.isThrottlingEntity(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),r)}getTemporaryCache(e,t){let r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){let i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}let o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===de.LocalStorage){let i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){let o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(t=>{(t.indexOf(Me)!==-1||t.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(t)}),this.browserStorage.getKeys().forEach(t=>{(t.indexOf(Me)!==-1||t.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(t)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(d.ClearTokensAndKeysWithClaims,e);let t=this.getTokenKeys(),r=0;t.accessToken.forEach(o=>{let i=this.getAccessTokenCredential(o,e);i?.requestedClaimsHash&&o.includes(i.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(o,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return ae.startsWith(e,Me)?e:`${Me}.${this.clientId}.${e}`}generateCredentialKey(e){let t=e.credentialType===Ce.REFRESH_TOKEN&&e.familyId||e.clientId,r=e.tokenType&&e.tokenType.toLowerCase()!==j.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return[`${Me}.${2}`,e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",r].join("|").toLowerCase()}generateAccountKey(e){let t=e.homeAccountId.split(".")[1];return[`${Me}.${2}`,e.homeAccountId,e.environment,t||e.tenantId||""].join("|").toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(me.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(me.VERIFIER)),this.removeTemporaryItem(this.generateCacheKey(me.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(me.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(me.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");let r=go(JSON.stringify(e));if(this.setTemporaryCache(me.REQUEST_PARAMS,r,!0),t){let o=go(t);this.setTemporaryCache(me.VERIFIER,o,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");let e=this.getTemporaryCache(me.REQUEST_PARAMS,!0);if(!e)throw T(ua);let t=this.getTemporaryCache(me.VERIFIER,!0),r,o="";try{r=JSON.parse(Re(e)),t&&(o=Re(t))}catch(i){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${i}`),T(da)}return[r,o]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");let e=this.getTemporaryCache(me.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;let t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){let t=this.getInteractionInProgress()?.clientId;return e?t===this.clientId:!!t}getInteractionInProgress(){let e=`${Me}.${me.INTERACTION_STATUS_KEY}`,t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch{return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),Kh(window),null}}setInteractionInProgress(e,t=hn.SIGNIN){let r=`${Me}.${me.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw T(na);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:t}),!1)}else!e&&this.getInteractionInProgress()?.clientId===this.clientId&&this.removeTemporaryItem(r)}async hydrateCache(e,t){let r=pe.createIdTokenEntity(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId),o;t.claims&&(o=await this.cryptoImpl.hashString(t.claims));let i=pe.createAccessTokenEntity(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?_e.toSecondsFromDate(e.expiresOn):0,e.extExpiresOn?_e.toSecondsFromDate(e.extExpiresOn):0,Re,void 0,e.tokenType,void 0,t.sshKid,t.claims,o),s={idToken:r,accessToken:i};return this.saveCacheRecord(s,e.correlationId,Ee.isKmsi(Ee.extractTokenClaims(e.idToken,Re)))}async saveCacheRecord(e,t,r,o){try{await super.saveCacheRecord(e,t,r,o)}catch(i){if(i instanceof io&&this.performanceClient&&t)try{let s=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:s.refreshToken.length,cacheIdCount:s.idToken.length,cacheAtCount:s.accessToken.length},t)}catch{}throw i}}};function k_(n,e,t,r){try{switch(e){case de.LocalStorage:return new sp(n,t,r);case de.SessionStorage:return new ap;case de.MemoryStorage:default:break}}catch(o){t.error(o)}return new _r}var O_=(n,e,t,r)=>{let o={cacheLocation:de.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:de.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new Oa(n,o,eo,e,t,r)};function P_(n,e,t,r,o){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(o||{},r):[]}function x_(n,e,t,r){let o=t.getAccountInfoFilteredBy(n,r);return o?(e.verbose("getAccount: Account matching provided filter found, returning"),o):(e.verbose("getAccount: No matching account found, returning null"),null)}function L_(n,e,t,r){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;let o=t.getAccountInfoFilteredBy({username:n},r);return o?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),o):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function F_(n,e,t,r){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;let o=t.getAccountInfoFilteredBy({homeAccountId:n},r);return o?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),o):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function U_(n,e,t,r){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;let o=t.getAccountInfoFilteredBy({localAccountId:n},r);return o?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),o):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function H_(n,e,t){e.setActiveAccount(n,t)}function B_(n,e){return n.getActiveAccount(e)}var LF="msal.broadcast.event",cp=class{constructor(e){this.eventCallbacks=new Map,this.logger=e||new nt({}),typeof BroadcastChannel<"u"&&(this.broadcastChannel=new BroadcastChannel(LF)),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if(typeof window<"u"){let o=r||C_();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,o){let i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};switch(e){case R.ACCOUNT_ADDED:case R.ACCOUNT_REMOVED:case R.ACTIVE_ACCOUNT_CHANGED:this.broadcastChannel?.postMessage(i);break;default:this.invokeCallbacks(i);break}}invokeCallbacks(e){this.eventCallbacks.forEach(([t,r],o)=>{(r.length===0||r.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${o}: ${e.eventType}`),t.apply(null,[e]))})}invokeCrossTabCallbacks(e){let t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}};var Pa=class{constructor(e,t,r,o,i,s,a,c,l){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.platformAuthProvider=c,this.correlationId=l||Oe(),this.logger=o.clone(ge.MSAL_SKU,Pt,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e,t){if(t)try{this.browserStorage.removeAccount(t,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");let t=e||this.config.auth.redirectUri;return V.getAbsoluteUrl(t,mt())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");let r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Bi(r,this.browserStorage)}async getDiscoveredAuthority(e){let{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(d.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);let o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,s=r?.length?r==="true":this.config.auth.instanceAware,a=t&&s?this.config.auth.authority.replace(V.getDomainFromUrl(i),t.environment):i,c=zt.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),l=await m(Dh.createDiscoveredInstance,d.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(t&&!l.isAlias(t.environment))throw q(rt.authorityMismatch);return l}};async function pu(n,e,t,r){t.addQueueMeasurement(d.InitializeBaseRequest,n.correlationId);let o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s=A(g({},n),{correlationId:n.correlationId,authority:o,scopes:i});if(!s.authenticationScheme)s.authenticationScheme=j.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===j.SSH){if(!n.sshJwk)throw q(rt.missingSshJwk);if(!n.sshKid)throw q(rt.missingSshKid)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!ae.isEmptyObj(n.claims)&&(s.requestedClaimsHash=await zh(n.claims)),s}async function j_(n,e,t,r,o){r.addQueueMeasurement(d.InitializeSilentRequest,n.correlationId);let i=await m(pu,d.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return A(g(g({},n),i),{account:e,forceRefresh:n.forceRefresh||!1})}function lp(n,e){let t,r=n.httpMethod;if(e===ce.EAR){if(t=r||$t.POST,t!==$t.POST)throw q(rt.invalidRequestMethodForEAR)}else t=r||$t.GET;if(n.authorizePostBodyParameters&&t!==$t.POST)throw q(rt.invalidAuthorizePostBodyParameters);return t}var yt=class extends Pa{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);let t=g({correlationId:this.correlationId||Oe()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){let r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=V.getAbsoluteUrl(e.postLogoutRedirectUri,mt())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=V.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,mt())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=V.getAbsoluteUrl(mt(),mt())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){let t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(d.StandardInteractionClientCreateAuthCodeClient,this.correlationId);let t=await m(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new Hi(t,this.performanceClient)}async getClientConfiguration(e){let{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}=e;this.performanceClient.addQueueMeasurement(d.StandardInteractionClientGetClientConfiguration,this.correlationId);let a=e.authority||await m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:ge.MSAL_SKU,version:Pt,cpu:y.EMPTY_STRING,os:y.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(d.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);let r=this.getRedirectUri(e.redirectUri),o={interactionType:t},i=un.setRequestState(this.browserCrypto,e&&e.state||y.EMPTY_STRING,o),s=await m(pu,d.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(A(g({},e),{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=A(g({},s),{redirectUri:r,state:i,nonce:e.nonce||Oe(),responseMode:this.config.auth.OIDCOptions.serverResponseType}),c=A(g({},a),{httpMethod:lp(a,this.config.auth.protocolMode)});if(e.loginHint||e.sid)return c;let l=e.account||this.browserStorage.getActiveAccount(this.correlationId);return l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,this.correlationId),c.account=l),c}};function V_(n,e){if(!e)return null;try{return un.parseRequestState(n,e).libraryState.meta}catch{throw v(ke.invalidState)}}function qi(n,e,t){let r=kn.getDeserializedResponse(n);if(!r)throw kn.stripLeadingHashOrQuery(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),T(Xs)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),T(Zs));return r}function $_(n,e,t){if(!n.state)throw T(uo);let r=V_(e,n.state);if(!r)throw T(ea);if(r.interactionType!==t)throw T(ta)}var xa=class{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}async handleCodeResponse(e,t){this.performanceClient.addQueueMeasurement(d.HandleCodeResponse,t.correlationId);let r;try{r=xn.getAuthorizationCodePayload(e,t.state)}catch(o){throw o instanceof pt&&o.subError===fn?T(fn):o}return m(this.handleCodeResponseFromServer.bind(this),d.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)}async handleCodeResponseFromServer(e,t,r=!0){if(this.performanceClient.addQueueMeasurement(d.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await m(this.authModule.updateAuthority.bind(this.authModule),d.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{let i=this.createCcsCredentials(t);i&&(this.authCodeRequest.ccsCredential=i)}return await m(this.authModule.acquireToken.bind(this.authModule),d.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:ze.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:ze.UPN}:null}};var z_="ContentError",G_="PageException",up="user_switch";var q_="USER_INTERACTION_REQUIRED",K_="USER_CANCEL",W_="NO_NETWORK",Y_="DISABLED",Q_="ACCOUNT_UNAVAILABLE",J_="UX_NOT_ALLOWED";var FF=-2147186943,UF={[up]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},qt=class n extends P{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,n.prototype),this.name="NativeAuthError",this.ext=r}};function yo(n){if(n.ext&&n.ext.status&&n.ext.status===Y_||n.ext&&n.ext.error&&n.ext.error===FF)return!0;switch(n.errorCode){case z_:case G_:return!0;default:return!1}}function Ki(n,e,t){if(t&&t.status)switch(t.status){case Q_:return Ui(Pn.nativeAccountUnavailable);case q_:return new be(n,e);case K_:return T(fn);case W_:return T(wr);case J_:return Ui(Pn.uxNotAllowed)}return new qt(n,UF[n]||e,t)}var La=class extends yt{async acquireToken(e){this.performanceClient.addQueueMeasurement(d.SilentCacheClientAcquireToken,e.correlationId);let t=this.initializeServerTelemetryManager(W.acquireTokenSilent_silentFlow),r=await m(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new lu(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{let s=(await m(o.acquireCachedToken.bind(o),d.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(i){throw i instanceof Gi&&i.errorCode===fo&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}}logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t.correlationId,t?.account)}};var vo=class extends Pa{constructor(e,t,r,o,i,s,a,c,l,u,f,p){super(e,t,r,o,i,s,c,l,p),this.apiId=a,this.accountId=u,this.platformAuthProvider=l,this.nativeStorageManager=f,this.silentCacheClient=new La(e,this.nativeStorageManager,r,o,i,s,c,l,p);let h=this.platformAuthProvider.getExtensionName();this.skus=Bi.makeExtraSkuString({libraryName:ge.MSAL_SKU,libraryVersion:Pt,extensionName:h,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=A(g({},e.extraParameters),{[yr.X_CLIENT_EXTRA_SKU]:this.skus})}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(d.NativeInteractionClientAcquireToken,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");let r=this.performanceClient.startMeasurement(d.NativeInteractionClientAcquireToken,this.correlationId),o=_e.nowSeconds(),i=this.initializeServerTelemetryManager(this.apiId);try{let s=await this.initializeNativeRequest(e);try{let c=await this.acquireTokensFromCache(this.accountId,s);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),c}catch(c){if(t===Be.AccessToken)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),r.end({success:!1,brokerErrorCode:"cache_request_failed"}),c;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}let a=await this.platformAuthProvider.sendMessage(s);return await this.handleNativeResponse(a,s,o).then(c=>(r.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),i.clearNativeBrokerErrorCode(),c)).catch(c=>{throw r.end({success:!1,errorCode:c.errorCode,subErrorCode:c.subError}),c})}catch(s){throw s instanceof qt&&i.setNativeBrokerErrorCode(s.errorCode),r.end({success:!1}),s}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:he.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),v(ke.noAccountFound);let r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw v(ke.noAccountFound);try{let o=this.createSilentCacheRequest(t,r),i=await this.silentCacheClient.acquireToken(o),s=A(g({},r),{idTokenClaims:i?.idTokenClaims,idToken:i?.idToken});return A(g({},i),{account:s})}catch(o){throw o}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");let r=Kt(e,[]);delete r.onRedirectNavigate;let o=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(o)}catch(a){if(a instanceof qt&&(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(a.errorCode),yo(a)))throw a}this.browserStorage.setTemporaryCache(me.NATIVE_REQUEST,JSON.stringify(o),!0);let i={apiId:W.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(s,i)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;let a=r,{prompt:o}=a,i=Kt(a,["prompt"]);o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(me.NATIVE_REQUEST));let s=_e.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");let c=await this.platformAuthProvider.sendMessage(i),l=await this.handleNativeResponse(c,i,s);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),l}catch(c){throw c}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,r){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");let o=Ee.extractTokenClaims(e.id_token,Re),i=this.createHomeAccountIdentifier(e,o),s=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},this.correlationId)?.homeAccountId;if(t.extraParameters?.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(i!==s&&e.account.id!==t.accountId)throw Ki(up);let a=await this.getDiscoveredAuthority({requestAuthority:t.authority}),c=Js(this.browserStorage,a,i,Re,this.correlationId,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);let l=await this.generateAuthenticationResult(e,t,o,c,a.canonicalAuthority,r);return await this.cacheAccount(c,this.correlationId,Ee.isKmsi(o)),await this.cacheNativeTokens(e,t,i,o,e.access_token,l.tenantId,r),l}createHomeAccountIdentifier(e,t){return oe.generateHomeAccountId(e.client_info||y.EMPTY_STRING,ot.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return t?he.fromString(t):he.fromString(e)}async generatePopAccessToken(e,t){if(t.tokenType===j.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;let r=new gt(this.browserCrypto),o={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw v(ke.keyIdMissing);return r.signPopToken(e.access_token,t.keyId,o)}else return e.access_token}async generateAuthenticationResult(e,t,r,o,i,s){let a=this.addTelemetryFromNativeResponse(e.properties.MATS),c=this.generateScopes(t.scope,e.scope),l=e.account.properties||{},u=l.UID||r.oid||r.sub||y.EMPTY_STRING,f=l.TenantId||r.tid||y.EMPTY_STRING,p=_i(oe.getAccountInfo(o),void 0,r,e.id_token);p.nativeAccountId!==e.account.id&&(p.nativeAccountId=e.account.id);let h=await this.generatePopAccessToken(e,t),E=t.tokenType===j.POP?j.POP:j.BEARER;return{authority:i,uniqueId:u,tenantId:f,scopes:c.asArray(),account:p,idToken:e.id_token,idTokenClaims:r,accessToken:h,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:_e.toDateFromSeconds(s+e.expires_in),tokenType:E,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,t,r){await this.browserStorage.setAccount(e,this.correlationId,r),this.browserStorage.removeAccountContext(oe.getAccountInfo(e),t)}cacheNativeTokens(e,t,r,o,i,s,a){let c=pe.createIdTokenEntity(r,t.authority,e.id_token||"",t.clientId,o.tid||""),l=t.tokenType===j.POP?y.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+l,f=this.generateScopes(e.scope,t.scope),p=pe.createAccessTokenEntity(r,t.authority,i,t.clientId,o.tid||s,f.printScopes(),u,0,Re,void 0,t.tokenType,void 0,t.keyId),h={idToken:c,accessToken:p};return this.nativeStorageManager.saveCacheRecord(h,this.correlationId,Ee.isKmsi(o),t.storeInCache)}getExpiresInValue(e,t){return e===j.POP?y.SHR_NONCE_VALIDITY:(typeof t=="string"?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){let t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");let t=await this.getCanonicalAuthority(e),a=e,{scopes:r}=a,o=Kt(a,["scopes"]),i=new he(r||[]);i.appendScopes(kt);let s=A(g({},o),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:t.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:g(g({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(s.signPopToken&&e.popKid)throw T(wa);if(this.handleExtraBrokerParams(s),s.extraParameters=s.extraParameters||{},s.extraParameters.telemetry=it.MATS_TELEMETRY,e.authenticationScheme===j.POP){let c={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},l=new gt(this.browserCrypto),u;if(s.keyId)u=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:s.keyId})),s.signPopToken=!1;else{let f=await m(l.generateCnf.bind(l),d.PopTokenGenerateCnf,this.logger,this.performanceClient,this.correlationId)(c,this.logger);u=f.reqCnfString,s.keyId=f.kid,s.signPopToken=!0}s.reqCnf=u}return this.addRequestSKUs(s),s}async getCanonicalAuthority(e){let t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});let r=new V(t);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case W.ssoSilent:case W.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),fe.NONE}if(!e){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e){case fe.NONE:case fe.CONSENT:case fe.LOGIN:case fe.SELECT_ACCOUNT:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),T(Ta)}}handleExtraBrokerParams(e){let t=e.extraParameters&&e.extraParameters.hasOwnProperty(yr.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(yr.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(yr.CLIENT_ID);if(!e.embeddedClientId&&!t)return;let r="",o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[yr.BROKER_REDIRECT_URI],r=e.extraParameters[yr.CLIENT_ID]),e.extraParameters={child_client_id:r,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:o},this.correlationId)}};async function JC(n,e,t,r,o){let i=xn.getStandardAuthorizeRequestParameters(A(g({},n.auth),{authority:e}),t,r,o);if(Te.addLibraryInfo(i,{sku:ge.MSAL_SKU,version:Pt,os:"",cpu:""}),n.auth.protocolMode!==ce.OIDC&&Te.addApplicationTelemetry(i,n.telemetry.application),t.platformBroker&&(Te.addNativeBroker(i),o.addFields({isPlatformAuthorizeRequest:!0},t.correlationId),t.authenticationScheme===j.POP)){let s=new Ma(r,o),a=new gt(s),c;t.popKid?c=s.encodeKid(t.popKid):c=(await m(a.generateCnf.bind(a),d.PopTokenGenerateCnf,r,o,t.correlationId)(t,r)).reqCnfString,Te.addPopToken(i,c)}return Te.instrumentBrokerParams(i,t.correlationId,o),i}async function Fa(n,e,t,r,o){if(!t.codeChallenge)throw q(rt.pkceParamsMissing);let i=await m(JC,d.GetStandardParams,r,o,t.correlationId)(n,e,t,r,o);return Te.addResponseType(i,sl.CODE),Te.addCodeChallengeParams(i,t.codeChallenge,y.S256_CODE_CHALLENGE_METHOD),Te.addExtraQueryParameters(i,t.extraQueryParameters||{}),xn.getAuthorizeUrl(e,i,n.auth.encodeExtraQueryParams,t.extraQueryParameters)}async function Ua(n,e,t,r,o,i){if(!r.earJwk)throw T(du);let s=await JC(e,t,r,o,i);Te.addResponseType(s,sl.IDTOKEN_TOKEN_REFRESHTOKEN),Te.addEARParameters(s,r.earJwk),Te.addCodeChallengeParams(s,r.codeChallenge,y.S256_CODE_CHALLENGE_METHOD);let a=new Map;Te.addExtraQueryParameters(a,r.extraQueryParameters||{});let c=xn.getAuthorizeUrl(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return Z_(n,c,s)}async function Ha(n,e,t,r,o,i){let s=await JC(e,t,r,o,i);Te.addResponseType(s,sl.CODE),Te.addCodeChallengeParams(s,r.codeChallenge,r.codeChallengeMethod||y.S256_CODE_CHALLENGE_METHOD),Te.addPostBodyParameters(s,r.authorizePostBodyParameters||{});let a=new Map;Te.addExtraQueryParameters(a,r.extraQueryParameters||{});let c=xn.getAuthorizeUrl(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters);return Z_(n,c,s)}function Z_(n,e,t){let r=n.createElement("form");return r.method="post",r.action=e,t.forEach((o,i)=>{let s=n.createElement("input");s.hidden=!0,s.name=i,s.value=o,r.appendChild(s)}),n.body.appendChild(r),r}async function X_(n,e,t,r,o,i,s,a,c,l){if(a.verbose("Account id found, calling WAM for token"),!l)throw T(po);let u=new Ma(a,c),f=new vo(r,o,u,a,s,r.system.navigationClient,t,c,l,e,i,n.correlationId),{userRequestState:p}=un.parseRequestState(u,n.state);return m(f.acquireToken.bind(f),d.NativeInteractionClientAcquireToken,a,c,n.correlationId)(A(g({},n),{state:p,prompt:void 0}))}async function Rr(n,e,t,r,o,i,s,a,c,l,u,f){if(Ir.removeThrottle(s,o.auth.clientId,n),e.accountId)return m(X_,d.HandleResponsePlatformBroker,l,u,n.correlationId)(n,e.accountId,r,o,s,a,c,l,u,f);let p=A(g({},n),{code:e.code||"",codeVerifier:t}),h=new xa(i,s,p,l,u);return await m(h.handleCodeResponse.bind(h),d.HandleCodeResponse,l,u,n.correlationId)(e,n)}async function Ba(n,e,t,r,o,i,s,a,c,l,u){if(Ir.removeThrottle(i,r.auth.clientId,n),xn.validateAuthorizationResponse(e,n.state),!e.ear_jwe)throw T(Ph);if(!n.earJwk)throw T(du);let f=JSON.parse(await m(p_,d.DecryptEarResponse,c,l,n.correlationId)(n.earJwk,e.ear_jwe));if(f.accountId)return m(X_,d.HandleResponsePlatformBroker,c,l,n.correlationId)(n,f.accountId,t,r,i,s,a,c,l,u);let p=new dn(r.auth.clientId,i,new Ma(c,l),c,null,null,l);p.validateTokenResponse(f);let h={code:"",state:n.state,nonce:n.nonce,client_info:f.client_info,cloud_graph_host_name:f.cloud_graph_host_name,cloud_instance_host_name:f.cloud_instance_host_name,cloud_instance_name:f.cloud_instance_name,msgraph_host:f.msgraph_host};return await m(p.handleServerTokenResponse.bind(p),d.HandleServerTokenResponse,c,l,n.correlationId)(f,o,_e.nowSeconds(),n,h,void 0,void 0,void 0,void 0)}var HF=32;async function pn(n,e,t){n.addQueueMeasurement(d.GeneratePkceCodes,t);let r=Ie(BF,d.GenerateCodeVerifier,e,n,t)(n,e,t),o=await m(jF,d.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t);return{verifier:r,challenge:o}}function BF(n,e,t){try{let r=new Uint8Array(HF);return Ie(u_,d.GetRandomValues,e,n,t)(r),Gt(r)}catch{throw T(ji)}}async function jF(n,e,t,r){e.addQueueMeasurement(d.GenerateCodeChallengeFromVerifier,r);try{let o=await m(BC,d.Sha256Digest,t,e,r)(n,e,r);return Gt(new Uint8Array(o))}catch{throw T(ji)}}var dp=class n{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(d.NativeMessageHandlerHandshake),this.platformAuthType=it.PLATFORM_EXTENSION_PROVIDER}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");let t={method:Sa.GetToken,request:e},r={channel:it.CHANNEL_ID,extensionId:this.extensionId,responseId:Oe(),body:t};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);let o=await new Promise((s,a)=>{this.resolvers.set(r.responseId,{resolve:s,reject:a})});return this.validatePlatformBrokerResponse(o)}static async createProvider(e,t,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{let o=new n(e,t,r,it.PREFERRED_EXTENSION_ID);return await o.sendHandshakeRequest(),o}catch{let i=new n(e,t,r);return await i.sendHandshakeRequest(),i}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);let e={channel:it.CHANNEL_ID,extensionId:this.extensionId,responseId:Oe(),body:{method:Sa.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(T(Ca)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;let t=e.data;if(!(!t.channel||t.channel!==it.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===Sa.HandshakeRequest){let r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(T(Ea))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");let t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{let i=t.body.method;if(i===Sa.Response){if(!r)return;let s=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")r.reject(Ki(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?r.reject(Ki(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result);else throw Vs(Wr.unexpectedError,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(i===Sa.HandshakeResponse){if(!o){this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Vs(Wr.unexpectedError,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===it.PREFERRED_EXTENSION_ID?"chrome":this.getExtensionId()?.length?"unknown":void 0}};var fp=class n{constructor(e,t,r){this.logger=e,this.performanceClient=t,this.correlationId=r,this.platformAuthType=it.PLATFORM_DOM_PROVIDER}static async createProvider(e,t,r){if(e.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication&&(await window.navigator.platformAuthentication.getSupportedContracts(it.MICROSOFT_ENTRA_BROKERID))?.includes(it.PLATFORM_DOM_APIS))return e.trace("Platform auth api available in DOM"),new n(e,t,r)}getExtensionId(){return it.MICROSOFT_ENTRA_BROKERID}getExtensionVersion(){return""}getExtensionName(){return it.DOM_API_NAME}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{let t=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(t);return this.validatePlatformBrokerResponse(r)}catch(t){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),t}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");let I=e,{accountId:t,clientId:r,authority:o,scope:i,redirectUri:s,correlationId:a,state:c,storeInCache:l,embeddedClientId:u,extraParameters:f}=I,p=Kt(I,["accountId","clientId","authority","scope","redirectUri","correlationId","state","storeInCache","embeddedClientId","extraParameters"]),h=this.getDOMExtraParams(p);return{accountId:t,brokerId:this.getExtensionId(),authority:o,clientId:r,correlationId:a||this.correlationId,extraParameters:g(g({},f),h),isSecurityTokenService:!1,redirectUri:s,scope:i,state:c,storeInCache:l,embeddedClientId:u}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){let t=e;if(t.isSuccess===!1&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),Ki(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw Vs(Wr.unexpectedError,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){return this.logger.trace(this.platformAuthType+" - convertToNativeResponse called"),{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){let t=Object.entries(e).reduce((o,[i,s])=>(o[i]=String(s),o),{});return g({},t)}};async function eb(n,e,t,r){n.trace("getPlatformAuthProvider called",t);let o=VF();n.trace("Has client allowed platform auth via DOM API: "+o);let i;try{o&&(i=await fp.createProvider(n,e,t)),i||(n.trace("Platform auth via DOM API not available, checking for extension"),i=await dp.createProvider(n,r||WC,e))}catch(s){n.trace("Platform auth not available",s)}return i}function VF(){let n;try{return n=window[de.SessionStorage],n?.getItem(b_)==="true"}catch{return!1}}function Mr(n,e,t,r){if(e.trace("isPlatformAuthAllowed called"),!n.system.allowPlatformBroker)return e.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!t)return e.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case j.BEARER:case j.POP:return e.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return e.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}var hp=class extends yt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c,this.eventHandler=i}acquireToken(e,t){let r;try{if(r={popupName:this.generatePopupName(e.scopes||kt,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t);{let i=A(g({},e),{httpMethod:lp(e,this.config.auth.protocolMode)});return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(i,r,t)}}catch(o){return Promise.reject(o)}}logout(e){try{this.logger.verbose("logoutPopup called");let t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,o,i))}catch(t){return Promise.reject(t)}}async acquireTokenPopupAsync(e,t,r){this.logger.verbose("acquireTokenPopupAsync called");let o=await m(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,M.Popup);t.popup&&Qh(o.authority);let i=Mr(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return o.platformBroker=i,this.config.auth.protocolMode===ce.EAR?this.executeEarFlow(o,t,r):this.executeCodeFlow(o,t,r)}async executeCodeFlow(e,t,r){let o=e.correlationId,i=this.initializeServerTelemetryManager(W.acquireTokenPopup),s=r||await m(pn,d.GeneratePkceCodes,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o),a=A(g({},e),{codeChallenge:s.challenge});try{let c=await m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,o)({serverTelemetryManager:i,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account});if(a.httpMethod===$t.POST)return await this.executeCodeFlowWithPost(a,t,c,s.verifier);{let l=await m(Fa,d.GetAuthCodeUrl,this.logger,this.performanceClient,o)(this.config,c.authority,a,this.logger,this.performanceClient),u=this.initiateAuthRequest(l,t);this.eventHandler.emitEvent(R.POPUP_OPENED,M.Popup,{popupWindow:u},null);let f=await this.monitorPopupForHash(u,t.popupWindowParent),p=Ie(qi,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(f,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await m(Rr,d.HandleResponseCode,this.logger,this.performanceClient,o)(e,p,s.verifier,W.acquireTokenPopup,this.config,c,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(c){throw t.popup?.close(),c instanceof P&&(c.setCorrelationId(this.correlationId),i.cacheFailedRequest(c)),c}}async executeEarFlow(e,t,r){let o=e.correlationId,i=await m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,o)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),s=await m(_a,d.GenerateEarKey,this.logger,this.performanceClient,o)(),a=r||await m(pn,d.GeneratePkceCodes,this.logger,this.performanceClient,o)(this.performanceClient,this.logger,o),c=A(g({},e),{earJwk:s,codeChallenge:a.challenge}),l=t.popup||this.openPopup("about:blank",t);(await Ua(l.document,this.config,i,c,this.logger,this.performanceClient)).submit();let f=await m(this.monitorPopupForHash.bind(this),d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,o)(l,t.popupWindowParent),p=Ie(qi,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(f,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(!p.ear_jwe&&p.code){let h=await m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,o)({serverTelemetryManager:this.initializeServerTelemetryManager(W.acquireTokenPopup),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:i});return m(Rr,d.HandleResponseCode,this.logger,this.performanceClient,o)(c,p,a.verifier,W.acquireTokenPopup,this.config,h,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return m(Ba,d.HandleResponseEar,this.logger,this.performanceClient,o)(c,p,W.acquireTokenPopup,this.config,i,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,t,r,o){let i=e.correlationId,s=await m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,i)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=t.popup||this.openPopup("about:blank",t);(await Ha(a.document,this.config,s,e,this.logger,this.performanceClient)).submit();let l=await m(this.monitorPopupForHash.bind(this),d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,i)(a,t.popupWindowParent),u=Ie(qi,d.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return m(Rr,d.HandleResponseCode,this.logger,this.performanceClient,i)(e,u,o,W.acquireTokenPopup,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,t,r,o){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(R.LOGOUT_START,M.Popup,e);let i=this.initializeServerTelemetryManager(W.logoutPopup);try{await this.clearCacheOnLogout(this.correlationId,e.account);let s=await m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r,account:e.account||void 0});try{s.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&s.authority.protocolMode===ce.OIDC){if(this.eventHandler.emitEvent(R.LOGOUT_SUCCESS,M.Popup,e),o){let l={apiId:W.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=V.getAbsoluteUrl(o,mt());await this.navigationClient.navigateInternal(u,l)}t.popup?.close();return}}let a=s.getLogoutUri(e);this.eventHandler.emitEvent(R.LOGOUT_SUCCESS,M.Popup,e);let c=this.openPopup(a,t);if(this.eventHandler.emitEvent(R.POPUP_OPENED,M.Popup,{popupWindow:c},null),await this.monitorPopupForHash(c,t.popupWindowParent).catch(()=>{}),o){let l={apiId:W.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=V.getAbsoluteUrl(o,mt());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${u}`),await this.navigationClient.navigateInternal(u,l)}else this.logger.verbose("No main window navigation requested")}catch(s){throw t.popup?.close(),s instanceof P&&(s.setCorrelationId(this.correlationId),i.cacheFailedRequest(s)),this.eventHandler.emitEvent(R.LOGOUT_FAILURE,M.Popup,null,s),this.eventHandler.emitEvent(R.LOGOUT_END,M.Popup),s}this.eventHandler.emitEvent(R.LOGOUT_END,M.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),T(Ln)}monitorPopupForHash(e,t){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");let i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),o(T(fn));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(i);let a="",c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===_n.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw T(oa);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),T(ra)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:o}){let i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=r.popupSize?.width,u=r.popupSize?.height,f=r.popupPosition?.top,p=r.popupPosition?.left;return(!l||l<0||l>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=ge.POPUP_WIDTH),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=ge.POPUP_HEIGHT),(!f||f<0||f>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),f=Math.max(0,c/2-ge.POPUP_HEIGHT/2+s)),(!p||p<0||p>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),p=Math.max(0,a/2-ge.POPUP_WIDTH/2+i)),o.open(e,t,`width=${l}, height=${u}, top=${f}, left=${p}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return`${ge.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){let t=e.account&&e.account.homeAccountId;return`${ge.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}};function $F(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;let n=window.performance.getEntriesByType("navigation");return(n.length?n[0]:void 0)?.type}var pp=class extends yt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,a,l,u),this.nativeStorage=c}async acquireToken(e){let t=await m(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,M.Redirect);t.platformBroker=Mr(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);let r=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(R.RESTORE_FROM_BFCACHE,M.Redirect))},o=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${o}`),this.browserStorage.setTemporaryCache(me.ORIGIN_URI,o,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===ce.EAR?await this.executeEarFlow(t):await this.executeCodeFlow(t,e.onRedirectNavigate)}catch(i){throw i instanceof P&&i.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),i}}async executeCodeFlow(e,t){let r=e.correlationId,o=this.initializeServerTelemetryManager(W.acquireTokenRedirect),i=await m(pn,d.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),s=A(g({},e),{codeChallenge:i.challenge});this.browserStorage.cacheAuthorizeRequest(s,i.verifier);try{if(s.httpMethod===$t.POST)return await this.executeCodeFlowWithPost(s);{let a=await m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:s.authority,requestAzureCloudOptions:s.azureCloudOptions,requestExtraQueryParameters:s.extraQueryParameters,account:s.account}),c=await m(Fa,d.GetAuthCodeUrl,this.logger,this.performanceClient,e.correlationId)(this.config,a.authority,s,this.logger,this.performanceClient);return await this.initiateAuthRequest(c,t)}}catch(a){throw a instanceof P&&(a.setCorrelationId(this.correlationId),o.cacheFailedRequest(a)),a}}async executeEarFlow(e){let t=e.correlationId,r=await m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=await m(_a,d.GenerateEarKey,this.logger,this.performanceClient,t)(),i=await m(pn,d.GeneratePkceCodes,this.logger,this.performanceClient,t)(this.performanceClient,this.logger,t),s=A(g({},e),{earJwk:o,codeChallenge:i.challenge});return this.browserStorage.cacheAuthorizeRequest(s,i.verifier),(await Ua(document,this.config,r,s,this.logger,this.performanceClient)).submit(),new Promise((c,l)=>{setTimeout(()=>{l(T(zi,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){let t=e.correlationId,r=await m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return this.browserStorage.cacheAuthorizeRequest(e),(await Ha(document,this.config,r,e,this.logger,this.performanceClient)).submit(),new Promise((i,s)=>{setTimeout(()=>{s(T(zi,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(e="",t,r,o){let i=this.initializeServerTelemetryManager(W.handleRedirectPromise);try{let[s,a]=this.getRedirectResponse(e||"");if(!s)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),$F()!=="back_forward"?o.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;let c=this.browserStorage.getTemporaryCache(me.ORIGIN_URI,!0)||y.EMPTY_STRING,l=kn.normalizeUrlForComparison(c),u=kn.normalizeUrlForComparison(window.location.href);if(l===u&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),c.indexOf("#")>-1&&y_(c),await this.handleResponse(s,t,r,i);if(this.config.auth.navigateToLoginRequestUrl){if(!Wh()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(me.URL_HASH,a,!0);let f={apiId:W.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},p=!0;if(!c||c==="null"){let h=v_();this.browserStorage.setTemporaryCache(me.ORIGIN_URI,h,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),p=await this.navigationClient.navigateInternal(h,f)}else this.logger.verbose(`Navigating to loginRequestUrl: ${c}`),p=await this.navigationClient.navigateInternal(c,f);if(!p)return await this.handleResponse(s,t,r,i)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(s,t,r,i);return null}catch(s){throw s instanceof P&&(s.setCorrelationId(this.correlationId),i.cacheFailedRequest(s)),s}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===_n.QUERY?t=window.location.search:t=window.location.hash);let r=kn.getDeserializedResponse(t);if(r){try{$_(r,this.browserCrypto,M.Redirect)}catch(i){return i instanceof P&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return Kh(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}let o=this.browserStorage.getTemporaryCache(me.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(me.URL_HASH)),o&&(r=kn.getDeserializedResponse(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}async handleResponse(e,t,r,o){if(!e.state)throw T(uo);if(e.ear_jwe){let a=await m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return m(Ba,d.HandleResponseEar,this.logger,this.performanceClient,t.correlationId)(t,e,W.acquireTokenRedirect,this.config,a,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}let s=await m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:t.authority});return m(Rr,d.HandleResponseCode,this.logger,this.performanceClient,t.correlationId)(t,e,r,W.acquireTokenRedirect,this.config,s,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);let r={apiId:W.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=t||this.config.auth.onRedirectNavigate;if(typeof o=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),o(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await this.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await this.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),T(Ln)}async logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(W.logout);try{this.eventHandler.emitEvent(R.LOGOUT_START,M.Redirect,e),await this.clearCacheOnLogout(this.correlationId,t.account);let o={apiId:W.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=await m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(i.authority.protocolMode===ce.OIDC)try{i.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId){this.eventHandler.emitEvent(R.LOGOUT_SUCCESS,M.Redirect,t);return}}let s=i.getLogoutUri(t);if(this.eventHandler.emitEvent(R.LOGOUT_SUCCESS,M.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(s)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,hn.SIGNOUT),await this.navigationClient.navigateExternal(s,o);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,hn.SIGNOUT),await this.navigationClient.navigateExternal(s,o);return}}catch(o){throw o instanceof P&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.eventHandler.emitEvent(R.LOGOUT_FAILURE,M.Redirect,null,o),this.eventHandler.emitEvent(R.LOGOUT_END,M.Redirect),o}this.eventHandler.emitEvent(R.LOGOUT_END,M.Redirect)}getRedirectStartPage(e){let t=e||window.location.href;return V.getAbsoluteUrl(t,mt())}};async function tb(n,e,t,r,o){if(e.addQueueMeasurement(d.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),T(Ln);return o?m(zF,d.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):Ie(GF,d.SilentHandlerLoadFrameSync,t,e,r)(n)}async function nb(n,e,t,r,o){let i=gp();if(!i.contentDocument)throw"No document associated with iframe!";return(await Ha(i.contentDocument,n,e,t,r,o)).submit(),i}async function rb(n,e,t,r,o){let i=gp();if(!i.contentDocument)throw"No document associated with iframe!";return(await Ua(i.contentDocument,n,e,t,r,o)).submit(),i}async function ZC(n,e,t,r,o,i,s){return r.addQueueMeasurement(d.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<Xh&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Xh}ms). This may result in timeouts.`);let l=window.setTimeout(()=>{window.clearInterval(u),c(T(ia))},e),u=window.setInterval(()=>{let f="",p=n.contentWindow;try{f=p?p.location.href:""}catch{}if(!f||f==="about:blank")return;let h="";p&&(s===_n.QUERY?h=p.location.search:h=p.location.hash),window.clearTimeout(l),window.clearInterval(u),a(h)},t)}).finally(()=>{Ie(qF,d.RemoveHiddenIframe,o,r,i)(n)})}function zF(n,e,t,r){return t.addQueueMeasurement(d.SilentHandlerLoadFrame,r),new Promise((o,i)=>{let s=gp();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=n,o(s)},e)})}function GF(n){let e=gp();return e.src=n,e}function gp(){let n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),n.setAttribute("allow","local-network-access *"),document.body.appendChild(n),n}function qF(n){document.body===n.parentNode&&document.body.removeChild(n)}var mp=class extends yt{constructor(e,t,r,o,i,s,a,c,l,u,f){super(e,t,r,o,i,s,c,u,f),this.apiId=a,this.nativeStorage=l}async acquireToken(e){this.performanceClient.addQueueMeasurement(d.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");let t=g({},e);t.prompt?t.prompt!==fe.NONE&&t.prompt!==fe.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${fe.NONE}`),t.prompt=fe.NONE):t.prompt=fe.NONE;let r=await m(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,M.Silent);return r.platformBroker=Mr(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),Qh(r.authority),this.config.auth.protocolMode===ce.EAR?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let t,r=this.initializeServerTelemetryManager(this.apiId);try{return t=await m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await m(this.silentTokenHelper.bind(this),d.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(o){if(o instanceof P&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),!t||!(o instanceof P)||o.errorCode!==ge.INVALID_GRANT_ERROR)throw o;return this.performanceClient.addFields({retryError:o.errorCode},this.correlationId),await m(this.silentTokenHelper.bind(this),d.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(t,e)}}async executeEarFlow(e){let t=e.correlationId,r=await m(this.getDiscoveredAuthority.bind(this),d.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=await m(_a,d.GenerateEarKey,this.logger,this.performanceClient,t)(),i=await m(pn,d.GeneratePkceCodes,this.logger,this.performanceClient,t)(this.performanceClient,this.logger,t),s=A(g({},e),{earJwk:o,codeChallenge:i.challenge}),a=await m(rb,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,t)(this.config,r,s,this.logger,this.performanceClient),c=this.config.auth.OIDCOptions.serverResponseType,l=await m(ZC,d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,t)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,c),u=Ie(qi,d.DeserializeResponse,this.logger,this.performanceClient,t)(l,c,this.logger);if(!u.ear_jwe&&u.code){let f=await m(this.createAuthCodeClient.bind(this),d.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,t)({serverTelemetryManager:this.initializeServerTelemetryManager(this.apiId),requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account,authority:r});return m(Rr,d.HandleResponseCode,this.logger,this.performanceClient,t)(s,u,i.verifier,this.apiId,this.config,f,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}else return m(Ba,d.HandleResponseEar,this.logger,this.performanceClient,t)(s,u,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(T(Fn))}async silentTokenHelper(e,t){let r=t.correlationId;this.performanceClient.addQueueMeasurement(d.SilentIframeClientTokenHelper,r);let o=await m(pn,d.GeneratePkceCodes,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),i=A(g({},t),{codeChallenge:o.challenge}),s;if(t.httpMethod===$t.POST)s=await m(nb,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(this.config,e.authority,i,this.logger,this.performanceClient);else{let u=await m(Fa,d.GetAuthCodeUrl,this.logger,this.performanceClient,r)(this.config,e.authority,i,this.logger,this.performanceClient);s=await m(tb,d.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(u,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait)}let a=this.config.auth.OIDCOptions.serverResponseType,c=await m(ZC,d.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(s,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,a),l=Ie(qi,d.DeserializeResponse,this.logger,this.performanceClient,r)(c,a,this.logger);return m(Rr,d.HandleResponseCode,this.logger,this.performanceClient,r)(t,l,o.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}};var yp=class extends yt{async acquireToken(e){this.performanceClient.addQueueMeasurement(d.SilentRefreshClientAcquireToken,e.correlationId);let t=await m(pu,d.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r=g(g({},e),t);e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));let o=this.initializeServerTelemetryManager(W.acquireTokenSilent_silentFlow),i=await this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return m(i.acquireTokenByRefreshToken.bind(i),d.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})}logout(){return Promise.reject(T(Fn))}async createRefreshTokenClient(e){let t=await m(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new cu(t,this.performanceClient)}};var vp=class{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}async loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw T(Un);let o=e.correlationId||Oe(),i=t.id_token?Ee.extractTokenClaims(t.id_token,Re):void 0,s=Ee.isKmsi(i||{}),a={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},c=e.authority?new zt(zt.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,a,this.logger,e.correlationId||Oe()):void 0,l=await this.loadAccount(e,r.clientInfo||t.client_info||"",o,i,c),u=await this.loadIdToken(t,l.homeAccountId,l.environment,l.realm,o,s),f=await this.loadAccessToken(e,t,l.homeAccountId,l.environment,l.realm,r,o,s),p=await this.loadRefreshToken(t,l.homeAccountId,l.environment,o,s);return this.generateAuthenticationResult(e,{account:l,idToken:u,accessToken:f,refreshToken:p},i,c)}async loadAccount(e,t,r,o,i){if(this.logger.verbose("TokenCache - loading account"),e.account){let l=oe.createFromAccountInfo(e.account);return await this.storage.setAccount(l,r,Ee.isKmsi(o||{})),l}else if(!i||!t&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),T(pa);let s=oe.generateHomeAccountId(t,i.authorityType,this.logger,this.cryptoObj,o),a=o?.tid,c=Js(this.storage,i,s,Re,r,o,t,i.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(c,r,Ee.isKmsi(o||{})),c}async loadIdToken(e,t,r,o,i,s){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");let a=pe.createIdTokenEntity(t,r,e.id_token,this.config.auth.clientId,o);return await this.storage.setIdTokenCredential(a,i,s),a}async loadAccessToken(e,t,r,o,i,s,a,c){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");let l=t.scope?he.fromString(t.scope):new he(e.scopes),u=s.expiresOn||t.expires_in+_e.nowSeconds(),f=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+_e.nowSeconds(),p=pe.createAccessTokenEntity(r,o,t.access_token,this.config.auth.clientId,i,l.printScopes(),u,f,Re);return await this.storage.setAccessTokenCredential(p,a,c),p}async loadRefreshToken(e,t,r,o,i){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");let s=pe.createRefreshTokenEntity(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(s,o,i),s}generateAuthenticationResult(e,t,r,o){let i="",s=[],a=null,c;t?.accessToken&&(i=t.accessToken.secret,s=he.fromString(t.accessToken.target).asArray(),a=_e.toDateFromSeconds(t.accessToken.expiresOn),c=_e.toDateFromSeconds(t.accessToken.extendedExpiresOn));let l=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:oe.getAccountInfo(l),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:l.cloudGraphHostName||"",msGraphHost:l.msGraphHost||"",fromNativeBroker:!1}}};var Cp=class extends Hi{constructor(e){super(e),this.includeRedirectUri=!1}};var Ep=class extends yt{constructor(e,t,r,o,i,s,a,c,l,u){super(e,t,r,o,i,s,c,l,u),this.apiId=a}async acquireToken(e){if(!e.code)throw T(ga);let t=await m(this.initializeAuthorizationRequest.bind(this),d.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,M.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{let o=A(g({},t),{code:e.code}),i=await m(this.getClientConfiguration.bind(this),d.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=new Cp(i);this.logger.verbose("Auth code client created");let a=new xa(s,this.browserStorage,o,this.logger,this.performanceClient);return await m(a.handleCodeResponseFromServer.bind(a),d.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(o){throw o instanceof P&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}}logout(){return Promise.reject(T(Fn))}};function ob(n,e,t){let r=window.msal?.clientIds||[],o=r.length,i=r.filter(s=>s===n).length;i>1&&t.warning("There is already an instance of MSAL.js in the window with the same client id."),e.add({msalInstanceCount:o,sameClientIdInstanceCount:i})}function Tp(n,e,t){try{Yh(n)}catch(r){throw e.end({success:!1},r,t),r}}var ja=class n{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Ma(this.logger,this.performanceClient):eo,this.eventHandler=new cp(this.logger),this.browserStorage=this.isBrowserEnvironment?new Oa(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,AC(this.config.auth)):O_(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);let t={cacheLocation:de.MemoryStorage,cacheRetentionDays:5,temporaryCacheLocation:de.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Oa(this.config.auth.clientId,t,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new vp(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){let r=new n(e);return await r.initialize(t),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,t){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(R.INITIALIZE_END);return}let r=e?.correlationId||this.getRequestCorrelationId(),o=this.config.system.allowPlatformBroker,i=this.performanceClient.startMeasurement(d.InitializeClientApplication,r);if(this.eventHandler.emitEvent(R.INITIALIZE_START),!t)try{this.logMultipleInstances(i)}catch{}if(await m(this.browserStorage.initialize.bind(this.browserStorage),d.InitializeCache,this.logger,this.performanceClient,r)(r),o)try{this.platformAuthProvider=await eb(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(s){this.logger.verbose(s)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),Ie(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),d.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(R.INITIALIZE_END),i.end({allowPlatformBroker:o,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),qC(this.initialized),this.isBrowserEnvironment){let t=e||"",r=this.redirectResponse.get(t);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if(this.browserStorage.getInteractionInProgress()?.type===hn.SIGNOUT)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);let r=this.getAllAccounts(),o=this.browserStorage.getCachedNativeRequest(),i=o&&this.platformAuthProvider&&!e,s;this.eventHandler.emitEvent(R.HANDLE_REDIRECT_START,M.Redirect);let a;try{if(i&&this.platformAuthProvider){s=this.performanceClient.startMeasurement(d.AcquireTokenRedirect,o?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),s.add({isPlatformBrokerRequest:!0});let c=new vo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,W.handleRedirectPromise,this.performanceClient,this.platformAuthProvider,o.accountId,this.nativeInternalStorage,o.correlationId);a=m(c.handleRedirectPromise.bind(c),d.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{let[c,l]=this.browserStorage.getCachedRequest(),u=c.correlationId;s=this.performanceClient.startMeasurement(d.AcquireTokenRedirect,u),this.logger.trace("handleRedirectPromise - acquiring token from web flow");let f=this.createRedirectClient(u);a=m(f.handleRedirectPromise.bind(f),d.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,c,l,s)}}catch(c){throw this.browserStorage.resetRequestCache(),c}return a.then(c=>(c?(this.browserStorage.resetRequestCache(),r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(R.LOGIN_SUCCESS,M.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_SUCCESS,M.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0},void 0,c.account)):s.event.errorCode?s.end({success:!1},void 0):s.discard(),this.eventHandler.emitEvent(R.HANDLE_REDIRECT_END,M.Redirect),c)).catch(c=>{this.browserStorage.resetRequestCache();let l=c;throw r.length>0?this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_FAILURE,M.Redirect,null,l):this.eventHandler.emitEvent(R.LOGIN_FAILURE,M.Redirect,null,l),this.eventHandler.emitEvent(R.HANDLE_REDIRECT_END,M.Redirect),s.end({success:!1},l),c})}async acquireTokenRedirect(e){let t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);let r=this.performanceClient.startMeasurement(d.AcquireTokenPreRedirect,t);r.add({scenarioId:e.scenarioId});let o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{let a=typeof o=="function"?o(s):void 0;return r.add({navigateCallbackResult:a!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,a};else{let s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{let c=typeof s=="function"?s(a):void 0;return r.add({navigateCallbackResult:c!==!1}),r.event=r.end({success:!0},void 0,e.account)||r.event,c}}let i=this.getAllAccounts().length>0;try{KC(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,hn.SIGNIN),i?this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_START,M.Redirect,e):this.eventHandler.emitEvent(R.LOGIN_START,M.Redirect,e);let s;return this.platformAuthProvider&&this.canUsePlatformBroker(e)?s=new vo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,W.acquireTokenRedirect,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(c=>{if(r.add({brokerErrorName:c.name,brokerErrorCode:c.errorCode}),c instanceof qt&&yo(c))return this.platformAuthProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(c instanceof be)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw c}):s=this.createRedirectClient(t).acquireToken(e),await s}catch(s){throw this.browserStorage.resetRequestCache(),r.event.status===2?this.performanceClient.startMeasurement(d.AcquireTokenRedirect,t).end({success:!1},s,e.account):r.end({success:!1},s,e.account),i?this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_FAILURE,M.Redirect,null,s):this.eventHandler.emitEvent(R.LOGIN_FAILURE,M.Redirect,null,s),s}}acquireTokenPopup(e){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(d.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",t),Tp(this.initialized,r,e.account),this.browserStorage.setInteractionInProgress(!0,hn.SIGNIN)}catch(a){return Promise.reject(a)}let o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_START,M.Popup,e):this.eventHandler.emitEvent(R.LOGIN_START,M.Popup,e);let i,s=this.getPreGeneratedPkceCodes(t);return this.canUsePlatformBroker(e)?(r.add({isPlatformBrokerRequest:!0}),i=this.acquireTokenNative(A(g({},e),{correlationId:t}),W.acquireTokenPopup).then(a=>(r.end({success:!0},void 0,a.account),a)).catch(a=>{if(r.add({brokerErrorName:a.name,brokerErrorCode:a.errorCode}),a instanceof qt&&yo(a))return this.platformAuthProvider=void 0,this.createPopupClient(t).acquireToken(e,s);if(a instanceof be)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e,s);throw a})):i=this.createPopupClient(t).acquireToken(e,s),i.then(a=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(R.LOGIN_SUCCESS,M.Popup,a):this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_SUCCESS,M.Popup,a),r.end({success:!0,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length},void 0,a.account),a)).catch(a=>(o.length>0?this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_FAILURE,M.Popup,null,a):this.eventHandler.emitEvent(R.LOGIN_FAILURE,M.Popup,null,a),r.end({success:!1},a,e.account),Promise.reject(a))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t)})}trackPageVisibilityWithMeasurement(){let e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){let t=this.getRequestCorrelationId(e),r=A(g({},e),{prompt:e.prompt,correlationId:t});this.ssoSilentMeasurement=this.performanceClient.startMeasurement(d.SsoSilent,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId}),Tp(this.initialized,this.ssoSilentMeasurement,e.account),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(R.SSO_SILENT_START,M.Silent,r);let o;return this.canUsePlatformBroker(r)?(this.ssoSilentMeasurement?.add({isPlatformBrokerRequest:!0}),o=this.acquireTokenNative(r,W.ssoSilent).catch(i=>{if(this.ssoSilentMeasurement?.add({brokerErrorName:i.name,brokerErrorCode:i.errorCode}),i instanceof qt&&yo(i))return this.platformAuthProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw i})):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(i=>(this.eventHandler.emitEvent(R.SSO_SILENT_SUCCESS,M.Silent,i),this.ssoSilentMeasurement?.end({success:!0,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length},void 0,i.account),i)).catch(i=>{throw this.eventHandler.emitEvent(R.SSO_SILENT_FAILURE,M.Silent,null,i),this.ssoSilentMeasurement?.end({success:!1},i,e.account),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){let t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);let r=this.performanceClient.startMeasurement(d.AcquireTokenByCode,t);Tp(this.initialized,r),this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_BY_CODE_START,M.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw T(ya);if(e.code){let o=e.code,i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),i=this.acquireTokenByCodeAsync(A(g({},e),{correlationId:t})).then(s=>(this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_BY_CODE_SUCCESS,M.Silent,s),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length},void 0,s.account),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_BY_CODE_FAILURE,M.Silent,null,s),r.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,i)),await i}else if(e.nativeAccountId)if(this.canUsePlatformBroker(e,e.nativeAccountId)){r.add({isPlatformBrokerRequest:!0});let o=await this.acquireTokenNative(A(g({},e),{correlationId:t}),W.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof qt&&yo(i)&&(this.platformAuthProvider=void 0),r.add({brokerErrorName:i.name,brokerErrorCode:i.errorCode}),i});return r.end({success:!0},void 0,o.account),o}else throw T(va);else throw T(ma)}catch(o){throw this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_BY_CODE_FAILURE,M.Silent,null,o),r.end({success:!1},o),o}}async acquireTokenByCodeAsync(e){return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(d.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(o=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:o.fromCache}),o)).catch(o=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},o),o}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(d.AcquireTokenFromCache,e.correlationId),t){case Be.Default:case Be.AccessToken:case Be.AccessTokenAndRefreshToken:let r=this.createSilentCacheClient(e.correlationId);return m(r.acquireToken.bind(r),d.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw v(ke.tokenRefreshRequired)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(d.AcquireTokenByRefreshToken,e.correlationId),t){case Be.Default:case Be.AccessTokenAndRefreshToken:case Be.RefreshToken:case Be.RefreshTokenAndNetwork:let r=this.createSilentRefreshClient(e.correlationId);return m(r.acquireToken.bind(r),d.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw v(ke.tokenRefreshRequired)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(d.AcquireTokenBySilentIframe,e.correlationId);let t=this.createSilentIframeClient(e.correlationId);return m(t.acquireToken.bind(t),d.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){let t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(g({correlationId:t},e))}async logoutRedirect(e){let t=this.getRequestCorrelationId(e);return KC(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,hn.SIGNOUT),this.createRedirectClient(t).logout(e)}logoutPopup(e){try{let t=this.getRequestCorrelationId(e);return Yh(this.initialized),this.browserStorage.setInteractionInProgress(!0,hn.SIGNOUT),this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}let t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){let t=this.getRequestCorrelationId();return P_(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){let t=this.getRequestCorrelationId();return x_(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){let t=this.getRequestCorrelationId();return L_(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){let t=this.getRequestCorrelationId();return F_(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){let t=this.getRequestCorrelationId();return U_(e,this.logger,this.browserStorage,t)}setActiveAccount(e){let t=this.getRequestCorrelationId();H_(e,this.browserStorage,t)}getActiveAccount(){let e=this.getRequestCorrelationId();return B_(this.browserStorage,e)}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");let r=oe.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId,Ee.isKmsi(e.idTokenClaims)),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,r,o){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw T(po);return new vo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,o)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Mr(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case fe.NONE:case fe.CONSENT:case fe.LOGIN:case fe.SELECT_ACCOUNT:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){let t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new hp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new pp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new mp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,W.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new La(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new yp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new Ep(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,W.acquireTokenByCode,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return GC(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){if(this.config.cache.cacheLocation!==de.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.subscribeCrossTab()}disableAccountStorageEvents(){if(this.config.cache.cacheLocation!==de.LocalStorage){this.logger.info("Account storage events are only available when cacheLocation is set to localStorage");return}this.eventHandler.unsubscribeCrossTab()}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?Oe():y.EMPTY_STRING}async loginRedirect(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(g({correlationId:t},e||OC))}loginPopup(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(g({correlationId:t},e||OC))}async acquireTokenSilent(e){let t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(d.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Tp(this.initialized,r,e.account),this.logger.verbose("acquireTokenSilent called",t);let o=e.account||this.getActiveAccount();if(!o)throw T(la);return this.acquireTokenSilentDeduped(e,o,t).then(i=>(r.end({success:!0,fromCache:i.fromCache,accessTokenSize:i.accessToken.length,idTokenSize:i.idToken.length},void 0,i.account),A(g({},i),{state:e.state,correlationId:t}))).catch(i=>{throw i instanceof P&&i.setCorrelationId(t),r.end({success:!1},i,o),i})}async acquireTokenSilentDeduped(e,t,r){let o=Tr(this.config.auth.clientId,A(g({},e),{authority:e.authority||this.config.auth.authority,correlationId:r}),t.homeAccountId),i=JSON.stringify(o),s=this.activeSilentTokenRequests.get(i);if(typeof s>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);let a=m(this.acquireTokenSilentAsync.bind(this),d.AcquireTokenSilentAsync,this.logger,this.performanceClient,r)(A(g({},e),{correlationId:r}),t);return this.activeSilentTokenRequests.set(i,a),a.finally(()=>{this.activeSilentTokenRequests.delete(i)})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),s}async acquireTokenSilentAsync(e,t){let r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(d.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_START,M.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);let o=await m(j_,d.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||Be.Default;return this.acquireTokenSilentNoIframe(o,i).catch(async a=>{if(KF(a,i))if(this.activeIframeRequest)if(i!==Be.Skip){let[l,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,o.correlationId);let f=this.performanceClient.startMeasurement(d.AwaitConcurrentIframe,o.correlationId);f.add({awaitIframeCorrelationId:u});let p=await l;if(f.end({success:p}),p)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),m(this.acquireTokenBySilentIframe.bind(this),d.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let l;return this.activeIframeRequest=[new Promise(u=>{l=u}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),m(this.acquireTokenBySilentIframe.bind(this),d.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(u=>(l(!0),u)).catch(u=>{throw l(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a}).then(a=>(this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_SUCCESS,M.Silent,a),this.performanceClient.addFields({fromCache:a.fromCache},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_FAILURE,M.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,t){return Mr(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,W.acquireTokenSilent_silentFlow,e.account.nativeAccountId,t).catch(async r=>{throw this.performanceClient.addFields({brokerErrorName:r.name,brokerErrorCode:r.errorCode},e.correlationId),r instanceof qt&&yo(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,v(ke.tokenRefreshRequired)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===Be.AccessToken&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),m(this.acquireTokenFromCache.bind(this),d.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===Be.AccessToken)throw r;return this.eventHandler.emitEvent(R.ACQUIRE_TOKEN_NETWORK_START,M.Silent,e),m(this.acquireTokenByRefreshToken.bind(this),d.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await m(pn,d.GeneratePkceCodes,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");let t=this.pkceCode?g({},this.pkceCode):void 0;return this.pkceCode=void 0,this.logger.verbose(`${t?"Found":"Did not find"} pre-generated PKCE codes`),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){let t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[],window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),ob(t,e,this.logger)}};function KF(n,e){let t=!(n instanceof be&&n.subError!==Pn.badToken),r=n.errorCode===ge.INVALID_GRANT_ERROR||n.errorCode===ke.tokenRefreshRequired,o=t&&r||n.errorCode===Pn.noTokensFound||n.errorCode===Pn.refreshTokenExpired,i=r_.includes(e);return o&&i}async function ib(n,e){let t=new np(n);return await t.initialize(),ja.createController(t,e)}var gu=class n{static async createPublicClientApplication(e){let t=await ib(e);return new n(e,t)}constructor(e,t){this.isBroker=!1,this.controller=t||new ja(new np(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}};var vt=class n{pca=new gu({auth:{clientId:"ef5d2fca-24a1-4bb9-9cd4-b0afb21757c4",authority:"https://login.microsoftonline.com/b650ce8e-3b91-445f-8a1d-92de6ad1fa16",redirectUri:"http://localhost:4200/"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}});constructor(){this.isBrowser()&&this.pca.initialize()}isBrowser(){return typeof window<"u"}login(){return this.isBrowser()?this.pca.loginRedirect({scopes:["openid","profile","email"]}):Promise.resolve()}logout(){return this.isBrowser()?this.pca.logoutRedirect({postLogoutRedirectUri:"http://localhost:4200/login"}):Promise.resolve()}getAccount(){let e=this.pca.getActiveAccount();if(e)return e;let t=this.pca.getAllAccounts();return t.length>0?(this.pca.setActiveAccount(t[0]),t[0]):null}isAuthenticated(){return!!this.getAccount()}async acquireToken(e){let t=this.getAccount();if(!t||!this.isBrowser())return null;try{let r=await this.pca.acquireTokenSilent({scopes:e,account:t});return r.accessToken||r.idToken}catch(r){return r instanceof be&&await this.pca.acquireTokenRedirect({scopes:e}),null}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ip=class n{constructor(e,t){this.auth=e;this.router=t}login(){this.auth.login()}static \u0275fac=function(t){return new(t||n)(bt(vt),bt(Dn))};static \u0275cmp=rn({type:n,selectors:[["app-login"]],decls:7,vars:0,consts:[[1,"container"],[3,"click"]],template:function(t,r){t&1&&(tr(0,"div",0)(1,"h2"),Ze(2,"Login"),nr(),tr(3,"p"),Ze(4,"Voc\xEA n\xE3o est\xE1 autenticado."),nr(),tr(5,"button",1),sf("click",function(){return r.login()}),Ze(6,"Entrar com Azure AD"),nr()())},dependencies:[zr],styles:[".container[_ngcontent-%COMP%]{max-width:400px;margin:2rem auto;text-align:center}button[_ngcontent-%COMP%]{padding:.5rem 1rem}"]})};function WF(n,e){if(n&1){let t=fy();er(0,"div",2)(1,"h2"),Ze(2,"Home"),wn(),er(3,"p"),Ze(4,"Usu\xE1rio autenticado."),wn(),er(5,"p")(6,"strong"),Ze(7,"Usu\xE1rio:"),wn(),Ze(8),wn(),er(9,"button",3),of("click",function(){od(t);let o=af();return id(o.goLogout())}),Ze(10,"Logout"),wn()()}if(n&2){let t=af();Gm(8),cf(" ",t.displayName())}}function YF(n,e){n&1&&(er(0,"p"),Ze(1,"Verificando autentica\xE7\xE3o..."),wn())}var wp=class n{constructor(e,t){this.auth=e;this.router=t;let r=this.auth.getAccount();r&&this.accountSignal.set(r)}accountSignal=en(null);isAuthenticated=Pc(()=>!!this.accountSignal());displayName=Pc(()=>this.auth.getAccount()?.name||this.auth.getAccount()?.username||"Desconhecido");goLogout(){this.router.navigate(["/logout"])}static \u0275fac=function(t){return new(t||n)(bt(vt),bt(Dn))};static \u0275cmp=rn({type:n,selectors:[["app-home"]],decls:3,vars:2,consts:[["loading",""],["class","container",4,"ngIf","ngIfElse"],[1,"container"],[3,"click"]],template:function(t,r){if(t&1&&tf(0,WF,11,1,"div",1)(1,YF,2,0,"ng-template",null,0,py),t&2){let o=hy(2);rf("ngIf",r.isAuthenticated())("ngIfElse",o)}},dependencies:[zr,Ry],styles:[".container[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;text-align:center}button[_ngcontent-%COMP%]{padding:.5rem 1rem}"]})};var Ap=class n{constructor(e){this.auth=e;this.auth.logout()}static \u0275fac=function(t){return new(t||n)(bt(vt))};static \u0275cmp=rn({type:n,selectors:[["app-logout"]],decls:5,vars:0,consts:[[1,"container"]],template:function(t,r){t&1&&(tr(0,"div",0)(1,"h2"),Ze(2,"Logout"),nr(),tr(3,"p"),Ze(4,"Saindo..."),nr()())},dependencies:[zr],styles:[".container[_ngcontent-%COMP%]{max-width:400px;margin:2rem auto;text-align:center}"]})};var Va=class n{constructor(e,t){this.auth=e;this.router=t}canActivate(){return this.auth.isAuthenticated()?!0:this.router.parseUrl("/login")}static \u0275fac=function(t){return new(t||n)(N(vt),N(Dn))};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})};var sb=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:Ip},{path:"home",component:wp,canActivate:[Va]},{path:"logout",component:Ap},{path:"**",redirectTo:"login"}];var ab={production:!1,backendUrl:"https://localhost:5001/api"};var Sp=class n{constructor(e){this.auth=e}intercept(e,t){return e.url.startsWith(ab.backendUrl)?we(this.auth.acquireToken(["openid","profile","email"])).pipe(ut(r=>{if(r){let o=e.clone({setHeaders:{Authorization:`Bearer ${r}`}});return t.handle(o)}return t.handle(e)})):t.handle(e)}static \u0275fac=function(t){return new(t||n)(N(vt))};static \u0275prov=b({token:n,factory:n.\u0275fac})};var cb={providers:[tm(),pv(sb),PS(OS()),zy(),vt,Va,{provide:By,useClass:Sp,multi:!0}]};var Dp=class n{title=en("azureAD.auth.patterns.web");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=rn({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&Is(0,"router-outlet")},dependencies:[nl],encapsulation:2})};Fy(Dp,cb).catch(n=>console.error(n));
